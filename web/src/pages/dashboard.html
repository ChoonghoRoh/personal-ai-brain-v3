<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="/static/favicon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="/static/css/dashboard.css" />
    <script src="/static/libs/chartjs/chart.min.js"></script>
    <title>Personal AI Brain - Dashboard</title>
  </head>
  <body>
    <div class="container">
      <!-- Header: JS 동적 생성 -->

      <!-- 1단: 시스템 상태 한줄 요약 -->
      <div class="system-status-bar" id="systemStatusBar">
        <span class="status-ind" id="indPostgres"><span class="dot"></span> PostgreSQL</span>
        <span class="status-ind" id="indQdrant"><span class="dot"></span> Qdrant</span>
        <span class="status-ind" id="indRedis"><span class="dot"></span> Redis</span>
        <span class="status-ind" id="indOllama"><span class="dot"></span> Ollama</span>
      </div>

      <!-- 2단: 등록 지식 현황 -->
      <section class="dash-tier">
        <h3 class="dash-tier-title">등록 지식 현황</h3>
        <div class="knowledge-cards">
          <div class="kc-card">
            <div class="kc-icon">📄</div>
            <div class="kc-value" id="dashTotalDocs">-</div>
            <div class="kc-label">총 문서</div>
          </div>
          <div class="kc-card">
            <div class="kc-icon">🧩</div>
            <div class="kc-value" id="dashTotalChunks">-</div>
            <div class="kc-label">총 청크</div>
          </div>
          <div class="kc-card">
            <div class="kc-icon">🏷️</div>
            <div class="kc-value" id="dashTotalLabels">-</div>
            <div class="kc-label">총 라벨</div>
          </div>
          <div class="kc-card">
            <div class="kc-icon">📁</div>
            <div class="kc-value" id="dashTotalProjects">-</div>
            <div class="kc-label">프로젝트</div>
          </div>
        </div>
      </section>

      <!-- 3단: Reasoning 가이드 -->
      <section class="dash-tier">
        <h3 class="dash-tier-title">Reasoning 가이드</h3>
        <div class="reasoning-guide">
          <div class="rg-card">
            <div class="rg-icon">🏗️</div>
            <div class="rg-title">설계/배경 설명</div>
            <div class="rg-desc">코드 구조, 아키텍처 의도 분석</div>
          </div>
          <div class="rg-card">
            <div class="rg-icon">⚠️</div>
            <div class="rg-title">리스크 분석</div>
            <div class="rg-desc">잠재적 문제점, 영향도 평가</div>
          </div>
          <div class="rg-card">
            <div class="rg-icon">🚀</div>
            <div class="rg-title">다음 단계 제안</div>
            <div class="rg-desc">TODO, 구현 순서 추천</div>
          </div>
          <div class="rg-card">
            <div class="rg-icon">📜</div>
            <div class="rg-title">히스토리 추적</div>
            <div class="rg-desc">변경이력, 의사결정 맥락</div>
          </div>
        </div>
        <div class="rg-action">
          <a href="/reason" class="dash-btn dash-btn-green">🧠 Reasoning Lab 시작하기</a>
        </div>
      </section>

      <!-- 4단: 주요 기능 바로가기 -->
      <section class="dash-tier">
        <h3 class="dash-tier-title">주요 기능</h3>
        <div class="quick-links">
          <a href="/knowledge" class="ql-card">
            <div class="ql-icon ql-icon-blue">📊</div>
            <div class="ql-body">
              <div class="ql-title">Knowledge Studio</div>
              <div class="ql-desc">지식 구조 탐색 및 분석</div>
            </div>
          </a>
          <a href="/knowledge-admin" class="ql-card">
            <div class="ql-icon ql-icon-purple">🔧</div>
            <div class="ql-body">
              <div class="ql-title">Knowledge Admin</div>
              <div class="ql-desc">라벨 관리 및 청크 승인</div>
            </div>
          </a>
        </div>
      </section>

      <!-- 5단: 최근 업데이트 문서 -->
      <section class="dash-tier">
        <h3 class="dash-tier-title">최근 업데이트 문서</h3>
        <div class="recent-docs-grid" id="recentDocsGrid">
          <div class="loading">로딩 중...</div>
        </div>
      </section>

      <!-- 6단: 활동 분석 (통계 차트 재사용) -->
      <section class="dash-tier">
        <h3 class="dash-tier-title">활동 분석</h3>
        <div class="dashboard-charts">
          <div class="dash-chart-card">
            <h4>문서 유형 분포</h4>
            <div class="dash-chart-box"><canvas id="docTypeChart"></canvas></div>
          </div>
          <div class="dash-chart-card">
            <h4>일별 트렌드 (최근 7일)</h4>
            <div class="dash-chart-box-wide"><canvas id="trendsChart"></canvas></div>
          </div>
        </div>
      </section>
    </div>

    <script src="/static/js/components/layout-component.js"></script>
    <script src="/static/js/components/header-component.js"></script>
    <script src="/static/js/components/utils.js"></script>
    <script src="/static/js/admin/statistics-charts.js"></script>
    <script src="/static/js/dashboard/dashboard-api.js"></script>
    <script src="/static/js/dashboard/dashboard.js"></script>
  </body>
</html>
