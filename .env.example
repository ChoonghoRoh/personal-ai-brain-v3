# =============================================================================
# Personal AI Brain - Environment Configuration
# =============================================================================
# 복사: cp .env.example .env 후 값 수정
# docker-compose는 .env 를 자동으로 읽습니다.
# =============================================================================

# ============================================
# 프로젝트 설정
# ============================================
# 프로젝트 루트 (호스트 경로). 상대 경로(.) 또는 절대 경로
PAB_PROJECT_ROOT=.

# 환경 설정 (development | production)
ENVIRONMENT=development
DEBUG=false

# ============================================
# Database Configuration (PostgreSQL)
# ============================================
# ver3: docker-compose가 5433으로 노출. 호스트에서 접속/백업 시 POSTGRES_PORT=5433
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_USER=brain
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=knowledge

# DATABASE_URL은 docker-compose에서 자동 구성됨
# 로컬 개발 시 직접 설정 가능
# DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ============================================
# Qdrant Configuration (Vector Database)
# ============================================
# ver3: docker-compose가 6343으로 노출. 호스트에서 접속/백업 시 QDRANT_PORT=6343
QDRANT_HOST=localhost
QDRANT_PORT=6343
QDRANT_API_KEY=

# ============================================
# Ollama Configuration (Local LLM)
# ============================================
# Ollama는 호스트의 localhost:11434 에서 실행. backend(Docker)는 host.docker.internal 로 접속.
OLLAMA_BASE_URL=http://host.docker.internal:11434
OLLAMA_MODEL=qwen2.5:7b

# ============================================
# Security Configuration (Phase 9-1)
# ============================================
# JWT 인증 설정
# 시크릿 키 생성: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=your_super_secret_jwt_key_change_this_in_production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=30

# API Key 인증 (간단한 API 키 방식)
API_SECRET_KEY=your_api_secret_key_for_simple_auth

# ============================================
# CORS Configuration (Phase 9-1)
# ============================================
# 쉼표로 구분된 허용 오리진 목록
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=*
CORS_ALLOW_HEADERS=*

# ============================================
# Rate Limiting Configuration (Phase 9-1)
# ============================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_LLM_PER_MINUTE=10
RATE_LIMIT_SEARCH_PER_MINUTE=30
RATE_LIMIT_IMPORT_PER_MINUTE=5
RATE_LIMIT_AUTH_PER_MINUTE=5

# Redis URL (분산 환경에서 Rate Limiting 사용 시)
# REDIS_URL=redis://localhost:6379

# ============================================
# RAG Enhancement (Phase 9-3-3)
# ============================================
HYBRID_SEARCH_SEMANTIC_WEIGHT=0.7
HYBRID_SEARCH_KEYWORD_WEIGHT=0.3
RERANKER_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
RERANKER_ENABLED=true
CONTEXT_MAX_TOKENS_SIMPLE=800
CONTEXT_MAX_TOKENS_COMPLEX=2000
MULTIHOP_MAX_DEPTH=2

# ============================================
# 지식구조 자동 매칭 (Phase 9-3-2)
# ============================================
AUTO_STRUCTURE_MATCHING_ENABLED=true
AUTO_LABEL_MIN_CONFIDENCE=0.5
AUTO_RELATION_MIN_CONFIDENCE=0.7
AUTO_CATEGORY_MIN_CONFIDENCE=0.6
MAX_LABEL_SUGGESTIONS=10
MAX_RELATION_SUGGESTIONS=5
MAX_SIMILAR_DOCUMENTS=5

# ============================================
# External API Keys (선택)
# ============================================
ANTHROPIC_API_KEY=
