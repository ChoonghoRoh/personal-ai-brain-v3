# Phase 19 작업 목록

> 작성일: 2026-02-18
> 최종 갱신: 2026-02-21
> 상태: 기획 (미착수)

---

## 1. 작업 목록 요약

| 번호     | 작업명                         | 구분         |     중요도      | 비고                                                                                          |
| -------- | ------------------------------ | ------------ | :-------------: | --------------------------------------------------------------------------------------------- |
| **19-1** | **키워드 추천 엔진 고도화**    | **[BE][FE]** | **P0 (최우선)** | PAB 핵심 기능. LLM 키워드 추천 파이프라인 5건 버그/품질 수정                                  |
| **19-3** | **키워드 그룹 관리 UI 리뉴얼** | **[FE]**     |     **P1**      | 트리 폴더형 전환 + D&D 제거 + 노드 이동 성능 + 바로 수정 모드                                 |
| 19-2     | 통계 메뉴 레이아웃 변경        | [FE]         |       P2        | Statistics Dashboard 2단 레이아웃                                                             |
| **19-4** | **청크 관리 통합·고도화**      | **[FE][BE]** |     **P1**      | 생성·승인·관리 통합 UI, 1→2→3단계 단계적 고도화 (참조: 260221-1802 청크관리 통합 최적화 전략) |

---

## 2. 키워드 추천 엔진 고도화 (19-1) — P0 최우선

### 2.0 배경 및 중요도

**키워드 추천 기능은 PAB의 핵심 기능 중 하나**이다.

- 지식 관리 시스템의 **기반 리소스(키워드)를 수집하는 핵심 경로**이며, 키워드 품질이 전체 검색·관계·추론 품질을 좌우한다.
- **세밀하게 튜닝 가능한 기술 기반 기능**이어야 한다 — 한글/영어 최적화, 의미 이해, 유사 의미 키워드 구분이 핵심 요건.
- 현재 "IT" 등 특정 단순 키워드만 작동하고, 그 외 키워드 추천에 구조적 결함이 있어 **즉시 수정 필요**.

### 2.1 현행 파이프라인 & 발견된 문제점 (5건)

```
[사용자 입력: 그룹 설명]
     |
[1] FE: suggestKeywordsFromDescription() --> POST /api/labels/groups/suggest-keywords
     |
[2] BE: handle_suggest_keywords() --> GroupKeywordRecommender.recommend()
     |
[3] BE: LLM 프롬프트 --> ollama_generate()
     |
[4] BE: postprocess_korean_keywords()   <-- 1차 정제 (**FIX-3, FIX-4**)
     |
[5] BE: generate_keywords_via_llm()     <-- 공백 분리 (**FIX-1**)
     |
[6] BE: match_and_score_labels()        <-- DB 매칭 (**FIX-2**)
     |
[7] FE: extractKeywordsOnly()           <-- 2차 정제 (**FIX-5**)
     |
[8] UI 렌더링
```

### 2.2 수정 항목 상세

#### FIX-1: `generate_keywords_via_llm()` 공백 분리 로직 개선 — 치명적

| 항목      | 내용                                                                                                            |
| --------- | --------------------------------------------------------------------------------------------------------------- |
| 파일      | `backend/services/reasoning/recommendation_llm.py` L76-90                                                       |
| 공유 범위 | `GroupKeywordRecommender`, `ChunkLabelRecommender` 공통                                                         |
| 현상      | LLM이 단일 줄로 응답 시 무조건 공백 분리 → 복합 키워드 파괴                                                     |
| 예시      | `"머신 러닝, 데이터 분석"` → `["머신", "러닝,", "데이터", "분석"]`                                              |
| 수정 방향 | 1순위 쉼표/세미콜론 분리 시도 → 2순위 공백 분리는 **각 토큰이 단일 개념어(한글만/영문만 2자+)**인 경우에만 수행 |
| 핵심      | `_is_single_concept_word()` 헬퍼 추가: `^[가-힣]{2,}$` 또는 `^[a-zA-Z]{2,}$` 매칭 시만 분리 허용                |

#### FIX-2: `match_and_score_labels()` 3단계 계층 매칭으로 변경 — 치명적

| 항목      | 내용                                                                                                   |
| --------- | ------------------------------------------------------------------------------------------------------ |
| 파일      | `backend/services/reasoning/recommendation_llm.py` L93-154                                             |
| 공유 범위 | `GroupKeywordRecommender`, `ChunkLabelRecommender` 공통                                                |
| 현상      | `ILIKE '%keyword%'` 부분매칭 → 거의 모든 키워드가 엉뚱한 라벨과 매칭 → `new_keywords` 소멸             |
| 예시      | `"화성"` → ILIKE '%화성%' → "화성시", "경기도화성" 매칭 → suggestions에 엉뚱한 라벨, new_keywords 없음 |
| 수정 방향 | 3단계 계층 매칭 도입                                                                                   |

**계층 매칭 설계**:

| Tier                    | 조건                                 | 신뢰도              | 예시                            |
| ----------------------- | ------------------------------------ | ------------------- | ------------------------------- |
| **Tier 1: 정확 매칭**   | `func.lower(Label.name) == kw_lower` | base_conf (0.9~0.5) | "Python" = "python"             |
| **Tier 2: 접두사 매칭** | `Label.name.ilike(f"{kw}%")`, 3자+   | base_conf \* 0.85   | "딥러닝" → "딥러닝모델"         |
| **Tier 3: 부분 매칭**   | `Label.name.ilike(f"%{kw}%")`, 4자+  | base_conf \* 0.7    | "자연어처리" → "고급자연어처리" |
| **미매칭**              | Tier 1~3 모두 실패                   | —                   | → `new_keywords`로 분류         |

- **2자 키워드** (IT, AI 등): Tier 1만 시도 → 정확 매칭 없으면 new_keywords
- **3자 키워드** (화성, 우주 등): Tier 1 → Tier 2 → 없으면 new_keywords
- **4자+ 키워드**: Tier 1 → Tier 2 → Tier 3

#### FIX-3: `_clean_disallowed_chars()` 허용 문자 확장 — 높음

| 항목      | 내용                                                                                  |
| --------- | ------------------------------------------------------------------------------------- |
| 파일      | `backend/utils/korean_utils.py` L15-34                                                |
| 공유 범위 | `postprocess_korean_keywords()` → 모든 LLM 키워드 추출                                |
| 현상      | `+`, `#`, `&`, `@` 제거 → `C++` → `C` (1글자 → 삭제), `C#` → `C` (삭제), `R&D` → `RD` |
| 수정 방향 | 허용 정규식에 `+#&@` 추가                                                             |
| 변경      | `[^가-힣a-zA-Z0-9\s\-\./_]` → `[^가-힣a-zA-Z0-9\s\-\./_+#&@]`                         |

#### FIX-4: `_is_garbled_keyword()` 오탐 완화 — 중간

| 항목      | 내용                                                                                                             |
| --------- | ---------------------------------------------------------------------------------------------------------------- |
| 파일      | `backend/utils/korean_utils.py` L37-58                                                                           |
| 공유 범위 | `postprocess_korean_keywords()` → 모든 LLM 키워드 추출                                                           |
| 현상      | 한글 뒤 소문자 영어 → 무조건 garbled 판정 → `"서버less"`, `"딥러닝model"` 삭제                                   |
| 수정 방향 | 한글→영어 방향: 영어 부분 3자 이상이면 허용. 영어→한글 방향: 기존대로 차단                                       |
| 핵심      | `re.search(r"[가-힣][a-z]", text)` → `re.search(r"[가-힣]([a-z]+)", token)` 후 영어 부분 길이 3자 미만만 garbled |

#### FIX-5: 프론트엔드 이중 정제 호출 제거 — 중간

| 항목      | 내용                                                                                                                                                       |
| --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 파일      | `web/public/js/admin/keyword-group-suggestion.js` L82                                                                                                      |
| 영향      | 키워드 그룹 추천 UI만                                                                                                                                      |
| 현상      | `new_keywords`가 백엔드 `postprocess_korean_keywords()`로 1차 정제 완료 후, 프론트에서 `extractKeywordsOnly()` + `cleanKeyword()`로 2차 정제 → 과잉 필터링 |
| 수정 방향 | `extractKeywordsOnly()` 호출 제거, `.map(kw => kw.trim()).filter(kw => kw.length >= 2)` 최소 처리만 유지                                                   |
| 비고      | `extractKeywordsOnly()`, `cleanKeyword()` 메서드 자체는 삭제하지 않음 (향후 사용 가능)                                                                     |

### 2.3 수정 순서 (의존성 기반)

```
FIX-2 (계층 매칭) ──→ FIX-1 (공백 분리) ──→ FIX-3 (허용 문자) ──→ FIX-4 (garbled) ──→ FIX-5 (이중 정제)
  [BE 핵심]             [BE 핵심]             [BE 유틸]            [BE 유틸]            [FE]
```

### 2.4 관련 파일

| 구분    | 경로                                               | 수정 항목                               |
| ------- | -------------------------------------------------- | --------------------------------------- |
| BE 핵심 | `backend/services/reasoning/recommendation_llm.py` | FIX-1, FIX-2                            |
| BE 유틸 | `backend/utils/korean_utils.py`                    | FIX-3, FIX-4                            |
| FE      | `web/public/js/admin/keyword-group-suggestion.js`  | FIX-5                                   |
| 테스트  | `tests/test_keyword_recommenders.py`               | FIX-2 mock 패턴 변경에 따른 테스트 수정 |

### 2.5 공유 함수 영향 분석

`generate_keywords_via_llm()`, `match_and_score_labels()`, `postprocess_korean_keywords()`는 아래 두 Recommender가 공유:

| Recommender               | 사용처                         | FIX-1~4 영향                                    |
| ------------------------- | ------------------------------ | ----------------------------------------------- |
| `GroupKeywordRecommender` | 키워드 그룹 설명 → 키워드 추천 | 직접 영향 (수정 대상)                           |
| `ChunkLabelRecommender`   | 청크 콘텐츠 → 라벨 추천        | 간접 영향 (동일 함수 사용, 품질 향상 동일 적용) |

두 Recommender 모두 **동일 매칭/정제 파이프라인**을 사용하므로 수정 시 양쪽 품질이 함께 개선됨.

### 2.6 향후 확장 방향 (Phase 19 이후)

키워드 추천 엔진이 PAB 핵심 리소스 수집 경로인 만큼, 아래 고도화 방향을 중장기로 검토:

| 방향                 | 내용                                                                         | 단계 |
| -------------------- | ---------------------------------------------------------------------------- | ---- |
| **의미 기반 매칭**   | DB 매칭 시 Qdrant 벡터 유사도 결합 — 문자열 매칭 + 의미 유사도 하이브리드    | 중기 |
| **유사 의미 구분**   | "머신러닝" vs "기계학습", "AI" vs "인공지능" 등 동의어/유사어 그룹 자동 감지 | 중기 |
| **프롬프트 튜닝 UI** | 관리자가 LLM 프롬프트 템플릿을 직접 편집할 수 있는 설정 화면                 | 장기 |
| **추천 피드백 루프** | 사용자가 수락/거부한 추천 이력을 학습 데이터로 활용                          | 장기 |
| **다국어 최적화**    | 한글/영어 외 일본어·중국어 지원 시 정제 로직 확장                            | 장기 |

---

**⚠️ 상세 분석 참조**: [docs/planning/260221-phase19-정밀분석.md §0 (19-1 키워드 추천 엔진 고도화)](260221-phase19-정밀분석.md#0-19-1-키워드-추천-엔진-고도화--p0-최우선)

**핵심 내용**:

- 5개 버그 상세 분석 (FIX-1~5) 및 구현 코드 예시
- 테스트 시나리오 (BDD 형식)
- 구현 순서 (의존성 기반, 4주 일정)
- DB 인덱스 최적화 및 리스크 평가

---

## 3. 통계 메뉴 레이아웃 변경 (19-2) — P2

### 3.1 요구사항

- **서브타이틀만 1단**
  "Statistics Dashboard" + 새로고침 영역은 **1단(전체 너비)** 유지.
- **이하 2단 레이아웃**
  서브타이틀·새로고침 영역 **아래부터** 2단 레이아웃으로 구성.
- **하위 블록 한 줄씩**
  - **요약** — 한 줄(한 행)에 배치
  - **분포 현황** — 한 줄에 배치
  - **일일 트렌드** — 한 줄에 배치
- **상세 현황 한 줄 좌우**
  - **인기 라벨** | **프로젝트별 현황** 를 **한 줄에 좌우로** 표기.

### 3.2 TO-BE 레이아웃 개요

```
+-------------------------------------------------------------------+
|  Statistics Dashboard                    [ 새로고침 ]               |  <-- 1단
+-------------------------------------------------------------------+
|  요약 (한 줄)                                                       |
|  [ 총 문서 ] [ 총 청크 ] [ 총 라벨 ] [ 오늘 사용 ]  ...              |
+-------------------------------------------------------------------+
|  분포 현황 (한 줄)                                                   |
|  [ 문서 유형 분포 ] [ 청크 상태 분포 ] [ 라벨 유형 분포 ]  ...        |
+-------------------------------------------------------------------+
|  일일 트렌드 (한 줄)                                                 |
|  [ 일별 트렌드 (최근 7일) 차트 ]                                     |
+-------------------------------------------------------------------+
|  상세 현황 (한 줄, 좌우)                                             |
|  [ 인기 라벨 TOP 10 ]        |  [ 프로젝트별 현황 ]                  |
+-------------------------------------------------------------------+
```

### 3.3 세부 변경사항

| 항목                | 변경 내용                                                                  |
| ------------------- | -------------------------------------------------------------------------- |
| 서브타이틀·새로고침 | 1단 유지. 기존 `page-header` 영역 그대로 또는 마크업만 정리                |
| 요약                | 한 줄(한 행) 배치. 기존 `summary-cards` 2단 그리드 → 1행 N열 또는 1행 유지 |
| 분포 현황           | 한 줄 배치. `charts-row` 1행에 3개 차트 카드 유지                          |
| 일일 트렌드         | 한 줄 배치. `trends-section` 1행 유지                                      |
| 상세 현황           | **좌우 2단**: 왼쪽 인기 라벨 TOP 10, 오른쪽 프로젝트별 현황. 한 줄에 표기  |

### 3.4 관련 파일 (예상)

| 구분 | 경로                                                                            |
| ---- | ------------------------------------------------------------------------------- |
| HTML | `web/src/pages/admin/statistics.html`                                           |
| CSS  | `web/public/css/statistics.css`                                                 |
| JS   | `web/public/js/admin/statistics.js`, `web/public/js/admin/statistics-charts.js` |

---

**⚠️ 상세 분석 참조**: [docs/planning/260221-phase19-정밀분석.md §0 (19-2 통계 메뉴 레이아웃 변경)](260221-phase19-정밀분석.md#0-19-2-통계-메뉴-레이아웃-변경--p2)

**핵심 내용**:

- CSS Grid 반응형 설계 (Desktop/Tablet/Mobile 3단계)
- HTML 마크업 + JS 렌더링 구조
- API 경로: `/api/admin/statistics`
- 테스트 체크리스트 (7가지 해상도)

---

## 4. 키워드 그룹 관리 UI 리뉴얼 (19-3) — P1

### 4.0 배경 및 목적

현재 키워드 그룹 관리 화면은 **좌측 트리 + 우측 상세 패널** 구조이나, 아래 UX 문제가 있다:

- **노드 이동 시 로딩이 느리고 피드백 없음**: 트리 노드 클릭/이동 후 응답이 올 때까지 시각적 피드백이 전혀 없어 사용자가 클릭이 동작했는지 알 수 없음
- **D&D(Drag & Drop) 불필요**: 실사용에서 D&D는 거의 사용되지 않으며, 모바일 대응도 불가. 파일 탐색기 스타일의 폴더형 트리가 더 직관적
- **상세 → 수정 2단계 진입**: 그룹 선택 시 읽기 전용 상세 화면이 먼저 표시되고, 수정하려면 별도 버튼 클릭 필요 → **1단계 뎁스 낭비**

### 4.1 수정 항목 상세

#### UI-1: D&D 제거 + 폴더형 트리 전환

| 항목      | 내용                                                                                             |
| --------- | ------------------------------------------------------------------------------------------------ |
| 파일      | `keyword-group-treeview.js` (D&D 이벤트 핸들러 전체)                                             |
| 현상      | `dragstart`, `dragend`, `dragover`, `dragleave`, `drop` 이벤트 + 루트 드롭 영역 구현             |
| 수정 방향 | D&D 관련 코드 전면 제거. 폴더형 아이콘(📁/📂) + 화살표(▶/▼) 토글로 전환                          |
| TO-BE     | 파일 탐색기 스타일: 폴더 아이콘 + 이름 클릭으로 선택, 화살표로 접기/펼치기                       |
| 노드 이동 | D&D 대신 **우클릭 컨텍스트 메뉴 "이동"** 또는 **상세 패널의 "부모 그룹 변경" 드롭다운**으로 대체 |

#### UI-2: 클릭 즉시 피드백 + 노드 이동 성능 개선

| 항목      | 내용                                                                                                                                                                                          |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 파일      | `keyword-group-treeview.js`, `keyword-group-matching.js`                                                                                                                                      |
| 현상      | 트리 노드 클릭 시 API 응답까지 아무 피드백 없음. 이동 API 호출 후 전체 트리 재로드                                                                                                            |
| 수정 방향 | (1) 클릭 즉시 **CSS `.selected` 하이라이트** 적용 (API 완료 전). (2) 노드 이동 시 **낙관적 UI 업데이트**: 먼저 트리 DOM 갱신 → API 호출 → 실패 시 롤백. (3) 로딩 중 **스피너/로딩 표시** 추가 |

#### UI-3: 바로 수정 모드 (상세 → 수정 1단계 통합)

| 항목      | 내용                                                                                                     |
| --------- | -------------------------------------------------------------------------------------------------------- |
| 파일      | `keyword-group-crud.js` (상세 패널 렌더링), `groups.html` (상세 패널 마크업)                             |
| 현상      | 그룹 선택 시 읽기 전용 상세 화면 → 수정 버튼 클릭 → 수정 화면 전환 (2단계)                               |
| 수정 방향 | 그룹 선택 시 **바로 수정 가능한 인라인 편집 폼**을 표시. 이름/설명 필드가 즉시 편집 가능한 상태로 렌더링 |
| TO-BE     | 그룹 클릭 → 우측 패널에 **편집 가능한 이름 입력란 + 설명 textarea + 저장/삭제 버튼**이 바로 표시         |
| 비고      | 기존 모달 기반 수정(`showEditGroupModal`)은 유지하되, 기본 진입 경로를 인라인 편집으로 변경              |

#### UI-4: 트리 헤더 + 검색 통합 정리

| 항목      | 내용                                                    |
| --------- | ------------------------------------------------------- |
| 파일      | `groups.html`, `admin-groups.css`                       |
| 현상      | 트리 헤더, 검색바, 데이터 연결 레벨이 분산 배치         |
| 수정 방향 | 트리 패널 헤더에 **검색 + 깊이 선택**을 컴팩트하게 통합 |

### 4.2 수정 순서 (의존성 기반)

```
UI-1 (D&D 제거 + 폴더형) ──→ UI-2 (클릭 피드백 + 이동 성능) ──→ UI-3 (바로 수정 모드) ──→ UI-4 (헤더 정리)
  [트리 구조 기반]               [트리 인터랙션]                    [상세 패널]               [레이아웃]
```

### 4.3 관련 파일

| 구분    | 경로                                            | 수정 항목              |
| ------- | ----------------------------------------------- | ---------------------- |
| FE 트리 | `web/public/js/admin/keyword-group-treeview.js` | UI-1, UI-2             |
| FE CRUD | `web/public/js/admin/keyword-group-crud.js`     | UI-3                   |
| FE 매칭 | `web/public/js/admin/keyword-group-matching.js` | UI-2                   |
| HTML    | `web/src/pages/admin/groups.html`               | UI-3, UI-4             |
| CSS     | `web/public/css/admin/admin-groups.css`         | UI-1, UI-2, UI-3, UI-4 |

### 4.4 TO-BE 트리 UI 예시

```
키워드 그룹 트리                    [🔍] [깊이: 5]
─────────────────────────────────────────
▼ 📂 프로그래밍
    ▶ 📁 백엔드 개발          (12)
    ▼ 📂 프론트엔드 개발       (8)
        📁 React              (3)
        📁 Vue.js             (2)
    ▶ 📁 데이터베이스          (15)
▶ 📁 인공지능                  (20)
▶ 📁 DevOps                   (7)
─────────────────────────────────────────
```

- `▶/▼`: 접기/펼치기 토글
- `📁/📂`: 하위 그룹 유무 표시 (닫힘/열림)
- `(N)`: 하위 키워드 개수
- 클릭 시 즉시 하이라이트 + 우측 패널에 인라인 편집 폼 표시

---

**⚠️ 상세 분석 참조**: [docs/planning/260221-phase19-정밀분석.md §1 (19-3 키워드 그룹 UI 리뉴얼 정밀 분석)](260221-phase19-정밀분석.md#1-19-3-키워드-그룹-관리-ui-리뉴얼)

**상세 내용**:

- 1.1: 현황 진단 (5개 문제점, 아키텍처)
- 1.2: UI 개선항목 분석 (UI-1~4 상세 스펙)
- 1.3: 리스크 평가 매트릭스
- 1.4: 구현 스펙 체크리스트

---

## 5. 청크 관리 통합·고도화 (19-4) — P1

**참조**: `docs/planning/260221-1802-청크관리-통합-최적화-전략-10대-전문가-분석.md` (보존 문서), `docs/planning/overview/` (페르소나별 인터뷰 요약)

대상 메뉴: `/admin/chunk-create`, `/admin/approval`, `/admin/chunk-labels`. 생성→승인→관리 워크플로우 통합 및 단계적 고도화.

---

### 5.1 1단계: 고도화 전략 (단기, 약 3개월)

**목표**: 탭 기반 통합 + 다중 선택·일괄 작업으로 컨텍스트 유지·작업 시간 단축.

| 항목              | 내용                                                                     |
| ----------------- | ------------------------------------------------------------------------ |
| **구조**          | 단일 URL 예: `/admin/knowledge-workflow` — 탭1 생성, 탭2 승인, 탭3 관리  |
| **컨텍스트 유지** | 생성 3단계 완료 → 자동 탭2(승인) 이동. 탭 간 이동 시 선택 청크 정보 유지 |
| **공통 컴포넌트** | 청크 목록·청크 상세 Modal 3탭 공통 사용                                  |
| **빠른 작업**     | 탭1 완료 화면 "바로 승인" 버튼, 탭2 완료 후 "라벨 관리로 이동" 버튼      |
| **다중 선택**     | 청크 목록 체크박스 + "선택한 청크에 라벨 추가" 등 일괄 작업              |
| **추가**          | API 문서(Swagger UI), 키보드 단축키(10개), 한글화 강화                   |

**산출물**: 통합 페이지 HTML/JS/CSS, 기존 3페이지 리다이렉트 또는 메뉴 정리, `header-component.js`·`main.py` \_HTML_ROUTES 반영.

---

### 5.2 1단계 리뷰 기준

- [ ] 생성 완료 후 탭2 자동 전환 및 승인 대기 목록 갱신 여부
- [ ] 승인·관리 탭에서 동일 청크 목록/상세 컴포넌트 재사용 여부
- [ ] 다중 선택 후 일괄 라벨 추가·일괄 승인 동작 여부
- [ ] Knowledge Admin 탭과의 중복 진입점 정리(유지 vs 통합 메뉴로 이동 링크)
- [ ] `docs/planning/260221-1802-청크관리-통합-최적화-전략-10대-전문가-분석.md` §9(프로젝트 파일 매칭·영향도) 참고 회귀 영향 최소화

---

### 5.6 상세 분석 및 스펙 참조

**주요 참고 문서**:

1. [**전략 수립 문서** (260221-1802)](docs/planning/260221-1802-청크관리-통합-최적화-전략-10대-전문가-분석.md)
   - 10대 페르소나별 분석 + 통합 요구사항 도출
   - 3-stage 로드맵 (1: 탭 기반 / 2: Stepper / 3: 전자동)
   - KPI 목표 및 구현 타임라인

2. [**정밀 분석 보고서** (260221-phase19-정밀분석.md)](260221-phase19-정밀분석.md)
   - §2: 19-4 청크 관리 통합·고도화 세부 분석
   - 2.1: 현황 분석 (3개 메뉴 분산 문제)
   - 2.2~2.4: 1단계(탭 기반) 상세 스펙
   - 2.3: 2단계(Stepper) 비전 및 "빠른 생성+승인" 워크플로우
   - 2.4: 3단계(전자동 + 도메인 특화) 자세 요약
   - 2.5: 통합 스펙 체크리스트
   - §3: 통합 리스크 & 우선순위 매트릭스
   - §4: 마스터 플랜 (개월별 로드맵, 병렬 진행 매트릭스, 마일스톤)

---

### 5.3 2단계: 목표 (중기, 약 6개월)

**목표**: 워크플로우 기반 단일 화면 + 자동화 강화로 수동 작업 70% 감소.

| 항목                    | 내용                                                                                                      |
| ----------------------- | --------------------------------------------------------------------------------------------------------- |
| **구조**                | Stepper: 1. 생성 → 2. 승인 → 3. 관리. 우측에 현재 단계 상세 화면                                          |
| **빠른 생성+승인**      | "빠른 생성 + 승인" 버튼: AI 자동 분할 → Draft 저장 → AI 자동 승인 → 완료. 사용자는 결과만 확인            |
| **상세 설정**           | 기존 3단계 프로세스는 "상세 설정" 선택 시 진입                                                            |
| **전체 승인+라벨 적용** | 승인 단계에서 "전체 승인 + 라벨 적용" → 현재 페이지 청크 전체 승인·AI 추천 라벨 적용 후 3단계 이동        |
| **Bulk API**            | `POST /api/knowledge/chunks/bulk-create`, `POST /api/approval/chunks/bulk-approve` (또는 기존 batch 확장) |
| **RBAC·감사 추적**      | 역할 기반 권한, 승인·거절·라벨 변경 이력 저장(감사 추적)                                                  |

**성공 지표**: 사용자 만족도 +60%, 작업 시간 70% 감소, 공공기관 도입률 +50% 목표.

---

### 5.4 3단계: 자동화 목표 (장기, 약 12개월)

**목표**: 지능형 워크플로우 + 전자동 모드로 수동 작업 90% 감소.

| 항목                    | 내용                                                                                           |
| ----------------------- | ---------------------------------------------------------------------------------------------- |
| **모드 구성**           | 모드1 전자동(AI가 모든 단계) / 모드2 반자동(사용자 승인만) / 모드3 수동(기존 3단계)            |
| **전자동 모드**         | 파일 업로드 → AI 분석·분할·자동 승인(신뢰도 문턱)·자동 라벨·임베딩 생성. 진행률·완료 항목 표시 |
| **문서 유형 자동 인식** | 논문(섹션·BibTeX), 보고서(헤딩·담당자), 규정(조항·법률 번호) 등                                |
| **도메인 특화(선택)**   | 화학연구원 모드(안전 키워드·화학 DB), 정책(부처·정책명), 관공서(결재선 템플릿)                 |
| **적응형 학습**         | 사용자 수정 라벨 → AI 학습, 조직별 커스텀 모델 검토                                            |
| **Webhook·SaaS**        | 청크 생성/승인 완료 이벤트, 클라우드 버전 검토                                                 |

**성공 지표**: 청크 생성(200페이지) 30분→2분(전자동), 승인+라벨 15분→10초 수준, 사용자 만족도 95%, API 호출 수 확대.

---

### 5.5 관련 파일 (19-4 공통 참고)

| 구분        | 경로                                                                                                                                                            |
| ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 기획·영향도 | `docs/planning/260221-1802-청크관리-통합-최적화-전략-10대-전문가-분석.md` §9                                                                                    |
| HTML        | `web/src/pages/admin/chunk-create.html`, `approval.html`, `chunk-labels.html`                                                                                   |
| JS          | `chunk-create.js`, `chunk-approval-api.js`, `chunk-approval-manager.js`, `admin-approval.js`, `admin-chunk-labels.js`, `label-manager.js`, `knowledge-admin.js` |
| CSS         | `admin-chunk-create.css`, `admin-approval.css`, `admin-chunk-labels.css`, `knowledge-admin-approval.css`                                                        |
| BE          | `backend/routers/knowledge/approval.py`, `knowledge.py`, `suggestions.py`                                                                                       |
| 네비·라우트 | `web/public/js/components/header-component.js`, `backend/main.py` \_HTML_ROUTES                                                                                 |

---

## 6. 추후 작업 (Phase 19 확장 시)

- 위 19-1, 19-2, 19-3, 19-4 완료 후, 동일 문서에 19-5 … 항목 추가 가능.
- 키워드 추천 향후 확장 방향(2.6절)은 별도 Phase로 편성 검토.

---

**문서 상태**: Phase 19 작업 목록 갱신 완료. 19-1 키워드 추천 엔진 고도화(P0) + 19-3 키워드 그룹 관리 UI 리뉴얼(P1) + 19-2 통계 레이아웃(P2) + 19-4 청크 관리 통합·고도화(P1, 1·2·3단계 목표 반영).
