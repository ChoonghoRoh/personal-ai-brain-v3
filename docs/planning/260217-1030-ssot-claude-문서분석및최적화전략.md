# SSOT 문서 최적화 전략 — 분석 보고서

**작성일**: 2026-02-17 10:30  
**작성자**: QA & Security Analyst  
**분석 대상**: docs/SSOT/claude/ (0-ssot-index.md, 1-project-ssot.md, 2-architecture-ssot.md, 3-workflow-ssot.md, role-*-ssot.md)  
**목적**: SSOT 문서 체계 파악 → 읽기성·관리성·적응성 개선안 제시  

---

## 📊 현재 SSOT 상태 분석

### 1. 문서 규모 분석

| 파일 | 줄 수 | 평가 | 문제점 |
|------|------|------|--------|
| 0-ssot-index.md | 300줄 | ⚠️ 중간 | 인덱스인데 내용 많음 (진입 장벽) |
| 1-project-ssot.md | 578줄 | 🔴 과다 | 팀원 정의+역할+상세 모두 포함 |
| 2-architecture-ssot.md | 516줄 | 🔴 과다 | 인프라+BE+FE 구조 모두 포함 |
| 3-workflow-ssot.md | 1,059줄 | 🔴 매우 과다 | 상태머신+상태파일+워크플로우 모두 포함 |
| role-backend-dev-ssot.md | 154줄 | ✅ 적절 | 역할 전용, 간결 |
| role-verifier-ssot.md | 149줄 | ✅ 적절 | 역할 전용, 간결 |
| **합계** | **2,756줄** | 🔴 과다 | **한 세션 읽기 500줄 기준: 5.5배 초과** |

### 2. 구조적 문제점

| 문제 | 원인 | 영향 |
|------|------|------|
| **지나친 집중화** | 핵심 내용(상태머신, 워크플로우)을 한 파일에 모음 | 로딩 시간 증가, 검색 어려움 |
| **계층 부재** | 역할별·도메인별 필터링 없음 | 백엔드 개발자도 FE 정보 읽어야 함 |
| **중복 정보** | 팀원 정의, 역할, 시나리오가 여러 파일에 반복 | 유지보수 비용 증가 |
| **진입 경로 불명확** | 상태파일(status.md)과 SSOT의 관계가 모호 | 팀원이 어디서 시작할지 혼란 |
| **버전 관리 약함** | 각 파일이 독립적 버전 (일관성 유지 어려움) | 일부만 업데이트되는 경우 발생 |

### 3. 강점 (유지할 것)

| 항목 | 평가 |
|------|------|
| **Hub-and-Spoke 모델** | ✅ 명확한 통신 구조 (Team Lead 중심) |
| **상태 머신 정의** | ✅ 명확한 전이 규칙 |
| **역할별 전용 SSOT** | ✅ 백엔드/검증자 전용 문서는 깔끔 |
| **Lock 규칙** | ✅ SSOT 변경 시 안전장치 |

---

## 🔧 개선안 3가지 제시

### 방안 A: 계층화 (Layered) 구조

**목표**: 문서를 **코어·도메인·역할별 3계층**으로 분류 → 역할별로 필요한 것만 읽기

```
SSOT/ 
├── CORE/                  (모두 읽기, 200줄)
│   ├── 0-entrypoint.md    (SSOT Lock, ENTRY 규칙 — 50줄)
│   ├── 1-state-machine.md (상태 정의, 전이 규칙 — 150줄)
│   └── 2-communication.md (Hub-and-Spoke, SendMessage — 50줄)
│
├── DOMAIN/               (도메인별 읽기, 250줄 × 3 = 750줄)
│   ├── project-domain.md (프로젝트/팀 정의 — 250줄)
│   ├── backend-domain.md (BE 기술 스택, 디렉토리 구조 — 250줄)
│   ├── frontend-domain.md (FE 기술 스택, 디렉토리 구조 — 250줄)
│   └── architecture.md    (인프라, 컨테이너 — 200줄)
│
└── ROLES/                (역할별 선택 읽기, 100-150줄)
    ├── team-lead.md      (팀 리더 — 120줄)
    ├── planner.md        (기획자 — 100줄)
    ├── backend-dev.md    (백엔드 개발자 — 100줄)
    ├── frontend-dev.md   (프론트엔드 개발자 — 100줄)
    ├── verifier.md       (검증자 — 100줄)
    └── tester.md         (테스터 — 80줄)

총 줄 수: 200 + 750 + 600 = 1,550줄 (43% 감소)
```

**읽기 경로** (역할별):

```
Backend Developer:
  1. CORE/0-entrypoint.md (진입점 확인) — 50줄
  2. CORE/1-state-machine.md (상태 이해) — 150줄
  3. DOMAIN/backend-domain.md (코드 구조) — 250줄
  4. ROLES/backend-dev.md (역할별 규칙) — 100줄
  ─────────────────────────────────────────────────
  총 읽을 분량: 550줄 / 2,756줄 기존 (80% 감소)

Verifier (QA):
  1. CORE/0-entrypoint.md — 50줄
  2. CORE/1-state-machine.md — 150줄
  3. DOMAIN/backend-domain.md + frontend-domain.md — 500줄
  4. ROLES/verifier.md — 100줄
  ─────────────────────────────────────────────────
  총 읽을 분량: 800줄 (71% 감소)

Team Lead:
  1. CORE 모두 — 200줄
  2. DOMAIN 모두 — 750줄
  3. ROLES 모두 — 600줄
  ─────────────────────────────────────────────────
  총 읽을 분량: 1,550줄 (43% 감소, 필요한 모든 정보 포함)
```

**장점**:
- ✅ 역할별 읽기 분량 80% 감소
- ✅ 계층적 진입 경로 명확
- ✅ 도메인별 유지보수 용이
- ✅ 새로운 역할 추가 시 ROLES/**/*.md만 생성

**단점**:
- ⚠️ 문서 개수 증가 (1개 → 13개)
- ⚠️ 각 파일의 경계 정의 필요

---

### 방안 B: 분기 (Branching) 구조

**목표**: **세션 시작 시 역할 선택** → 해당 역할에 필요한 정보만 동적으로 렌더링

**구현 방식** (마크다운 메타데이터 + 자동 렌더러):

```markdown
---
# 0-ssot-index.md

## 지정 역할 선택

누구로 실행 중인가요? (선택하면 해당 정보만 표시됩니다)

[ ] Team Lead (총 읽기: 1,550줄, 20분)
[ ] Backend Developer (총 읽기: 550줄, 10분)
[ ] Frontend Developer (총 읽기: 550줄, 10분)
[ ] Verifier (총 읽기: 800줄, 15분)
[ ] Tester (총 읽기: 400줄, 8분)
[ ] Planner (총 읽기: 350줄, 7분)

---
# 1-project-ssot.md

## 팀 구성 (📌 Team Lead · Planner 필독, 기타는 선택)

:::note[role-filter]
show_for: ["team-lead", "planner"]
hide_for: ["backend-dev", "frontend-dev", "verifier", "tester"]
:::

(팀 구성 내용 — 이 섹션은 위 역할만 표시)

## 백엔드 기술 스택 (📌 Backend Developer 필독)

:::note[role-filter]
show_for: ["backend-dev", "team-lead"]
hide_for: ["frontend-dev", "planner"]
:::

(백엔드 내용 — 해당 역할만 표시)
```

**렌더러 예시** (JavaScript):

```javascript
// web/src/js/ssot-role-filter.js
class SSOTRoleFilter {
  constructor(selectedRole = null) {
    this.selectedRole = selectedRole || localStorage.getItem('ssot_role') || 'team-lead';
    this.init();
  }
  
  init() {
    // 모든 `:::note[role-filter]` 블록 찾기
    document.querySelectorAll('[role-filter]').forEach(block => {
      const showFor = block.dataset.showFor?.split(',') || [];
      const hideFor = block.dataset.hideFor?.split(',') || [];
      
      if (hideFor.includes(this.selectedRole)) {
        block.style.display = 'none';
      } else if (showFor.length === 0 || showFor.includes(this.selectedRole)) {
        block.style.display = 'block';
      } else {
        block.style.display = 'none';
      }
    });
    
    // 역할 선택 UI 업데이트
    this.updateRoleUI();
  }
  
  updateRoleUI() {
    document.querySelectorAll('.role-selector button').forEach(btn => {
      btn.classList.toggle('active', btn.dataset.role === this.selectedRole);
    });
  }
  
  switchRole(newRole) {
    this.selectedRole = newRole;
    localStorage.setItem('ssot_role', newRole);
    this.init();
  }
}

// 페이지 로드 시
document.addEventListener('DOMContentLoaded', () => {
  window.ssotFilter = new SSOTRoleFilter();
});
```

**장점**:
- ✅ **최소 읽기 분량** (350-800줄, 7-15분)
- ✅ 문서 수 변화 없음 (기존 유지)
- ✅ 메타데이터만 추가 (마크다운 호환)
- ✅ 쉬운 구현 (자동 렌더러)

**단점**:
- ⚠️ 마크다운 메타데이터 문법 학습 필요
- ⚠️ 기자 Git 용 별도 도구 필수

---

### 방안 C: 요약 + 상세 분리 (Executive Summary)

**목표**: 모든 문서에 **500줄 이내 요약본** + **링크로 상세 내용 제공**

**구현 방식**:

```markdown
---
# 1-project-ssot.md

# 프로젝트 SSOT (빠른 참조)

## 필독 (모두)

### 팀 구성 (요약, 50줄)
| 역할 | 팀원 | 역할 |
|------|------|------|
| Team Lead | — | 팀 생성·조율·판정 |
| Backend Dev | backend-dev | API·DB 구현 |
| Frontend Dev | frontend-dev | UI 구현 |
| Verifier | verifier | 코드 리뷰 |
| Tester | tester | 테스트 |

**➜ [상세 역할 정의로 이동](../rules/role/LEADER.md) (링크)**

### 상태 머신 (요약, 30줄)

```
IDLE → TEAM_SETUP → PLANNING → BUILDING → VERIFYING → TESTING → E2E → DONE
```

**상태 정의**:
- PLANNING: 요구사항 분석
- BUILDING: 코드 작성 (병렬 가능)
- VERIFYING: 코드 리뷰
- E2E: 사용자 시나리오 테스트

**➜ [상태 전이 규칙 (1,000+ 줄)](3-workflow-ssot.md#1-workflow) (링크)**

### 워크플로우 (요약, 50줄)

1. Phase 시작 → `phase-X-Y-status.md` 읽기 (ENTRY-1)
2. 팀 구성: `TeamCreate` + 팀원 스폰
3. 상태 기반 다음 행동 결정
4. SendMessage로 팀원 간 통신 (Hub-and-Spoke)
5. 완료 시 TeamDelete + DONE

**➜ [상세 워크플로우](3-workflow-ssot.md) (링크)**

---

## 선택 (역할별, 클릭하여 展開)

<details>
<summary>📌 Backend Developer 필독 (250줄)</summary>

### 백엔드 구조

- 디렉토리: `backend/main.py` → `routers/` → `services/`
- 기술 스택: FastAPI, SQLAlchemy ORM, PostgreSQL
- 규칙: ORM 필수, raw SQL 금지

**➜ [백연드 전용 가이드](role-backend-dev-ssot.md) (링크)**

</details>

<details>
<summary>📌 Frontend Developer 필독 (250줄)</summary>

### 프론트엔드 구조

- 디렉토리: `web/src/pages/` (HTML) + `web/public/js/` (Vanilla JS)
- 기술 스택: Vanilla JS (ES6), Jinja2 템플릿, Bootstrap CSS
- 규칙: ESM import, innerHTML 시 esc() 필수

**➜ [프론트엔드 전용 가이드](role-frontend-dev-ssot.md) (링크)**

</details>

<details>
<summary>📌 Verifier 필독 (200줄)</summary>

### 검증 기준

**백엔드 Critical**:
- 구문 오류 없음
- ORM 사용 (raw SQL 없음)
- 입력 검증 존재

**프론트엔드 Critical**:
- 콘솔 에러 없음
- innerHTML 시 esc() 적용
- 기존 기능 깨지지 않음

**➜ [Verifier 전용 가이드](role-verifier-ssot.md) (링크)**

</details>

---

## 아키텍처 (선택)

- 인프라: Docker Compose (PostgreSQL, Qdrant, Redis, Backend)
- 백엔드: FastAPI 모놀리식
- 프론트엔드: Vanilla JS + Jinja2

**➜ [아키텍처 상세](2-architecture-ssot.md) (링크)**

---

# 상세 가이드

(나머지 파일 1-project-ssot.md, 2-architecture-ssot.md, 3-workflow-ssot.md는 변경 없음)
```

**장점**:
- ✅ **첫 진입 시 500줄** 이내 (모든 정보 구조 파악 가능, 10-15분)
- ✅ 기존 파일 구조 유지
- ✅ 단계적 깊이 조절 가능 (요약 → 상세)
- ✅ 마크다운 표준 문법만 사용 (호환성 높음)

**단점**:
- ⚠️ 중복 정보 발생 (요약 + 상세)
- ⚠️ 업데이트 시 중복 유지 필요

---

## 🎯 권장사항 및 선택

### 단기 (1주) — 방안 C 적용

**이유**: 즉시 구현 가능, 기존 구조 유지, 읽기성 대폭 개선

1. 0-ssot-index.md → 요약 500줄 버전으로 리팩토링
2. 각 파일 시작에 <details> 펼침형으로 주요 섹션 요약 추가
3. 역할별 진입 경로 명확화 (마크다운 주석으로 표시)

```
### Backend Developer가 읽어야 할 것

[ ] 0-ssot-index.md — 전체 개요 (15분)
[ ] 1-project-ssot.md — "팀 구성·상태 머신" 섹션만 (5분)
[ ] role-backend-dev-ssot.md — 역할 전용 (10분)
[ ] 2-architecture-ssot.md — "백엔드 구조" 섹션만 (5분)
────────────────────────────────────────
총 35분, ~600줄

필요 시 깊이 있게:
[ ] 3-workflow-ssot.md — 상태 전이 규칙 상세 (추가 20분)
```

### 중기 (1개월) — 방안 A 단계적 전환

1. CORE/ 폴더 생성 (entrypoint, state-machine, communication)
2. DOMAIN/ 폴더 생성 (project, backend, frontend, architecture 분리)
3. ROLES/ 폴더 재정리 (기존 role-*-ssot.md → ROLES/ 이동)
4. 역할별 읽기 경로 문서화 (README.md in CORE/)

### 장기 (3개월) — 방안 B 자동화 구현

1. SSOT 렌더러 개발 (web/src/js/ssot-role-filter.js)
2. 메타데이터 추가 (모든 섹션에 role-filter 적용)
3. Admin 대시보드에 SSOT 뷰어 추가

---

## 📋 세밀한 제어를 위한 버전 관리

현재: 각 파일이 독립적 버전 (0-ssot-index.md v4.3, 1-project-ssot.md v4.2 등)
→ **문제**: 어떤 파일이 최신인지 불명확

### 개선안: 통합 버전 + 파일별 릴리스 날짜

```yaml
# docs/SSOT/claude/VERSION.md

---
ssot_release: "4.5"
ssot_released_at: "2026-02-17T10:30:00Z"

file_versions:
  - file: "0-ssot-index.md"
    version: "4.3"
    updated_at: "2026-02-16T15:00:00Z"
    changes: "Lock rules 추가"
  
  - file: "1-project-ssot.md"
    version: "4.2"
    updated_at: "2026-02-16T14:00:00Z"
    changes: "팀 구성 테이블 개선"
  
  - file: "3-workflow-ssot.md"
    version: "4.5"
    updated_at: "2026-02-17T10:00:00Z"
    changes: "상태 머신 도표 추가"

incompatible_versions:
  - "3.x 이하: 상태 머신 다름, 업그레이드 필수"

---
```

### 각 Role의 필독 파일 명시

```markdown
# docs/SSOT/claude/0-ssot-index.md

## 역할별 읽기 체크리스트

### ✅ Backend Developer (필독 v4.0+)

| 파일 | 버전 | 읽기 분량 | 필수 |
|------|------|----------|------|
| 0-ssot-index.md | 4.3+ | 50줄 | ✅ |
| 1-project-ssot.md § 팀 구성/상태 | 4.2+ | 100줄 | ✅ |
| role-backend-dev-ssot.md | 1.1+ | 150줄 | ✅ |
| 2-architecture-ssot.md § 백엔드 | 4.0+ | 200줄 | ✅ |
| **합계** | — | **500줄** | **10-15분** |

필요시 (선택):
- 3-workflow-ssot.md (상태 전이 상세)

### ✅ Verifier (필독 v4.0+)

| 파일 | 버전 | 읽기 분량 | 필수 |
|------|------|----------|------|
| 0-ssot-index.md | 4.3+ | 50줄 | ✅ |
| 1-project-ssot.md § 상태 머신 | 4.2+ | 80줄 | ✅ |
| role-verifier-ssot.md | 2.1+ | 150줄 | ✅ |
| 2-architecture-ssot.md § BE+FE | 4.0+ | 400줄 | ✅ |
| **합계** | — | **680줄** | **15-20분** |
```

---

## 🔐 SSOT Lock 고도화

현재: Phase 실행 중 SSOT 변경 금지 (Lock Level 1)  
→ **세밀한 제어**: 파일별·섹션별 Lock

```yaml
# docs/SSOT/claude/LOCK-STATUS.md

lock_rules:
  - rule_id: "LOCK-Core"
    scope: "CORE/ (entrypoint, state-machine, communication)"
    level: "STRICT"  # Phase 실행 중 절대 수정 금지
    override: "Team Lead 승인 + SSOT Lock 프로세스"
  
  - rule_id: "LOCK-Domain"
    scope: "DOMAIN/ (기술 스택, 아키텍처)"
    level: "NORMAL"  # Phase 완료 후 수정 가능
    override: "자유 변경 (Phase 일정에 영향 없음)"
  
  - rule_id: "LOCK-Roles"
    scope: "ROLES/ (역할별 가이드)"
    level: "FLEXIBLE"  # 당해 역할만 수정 가능
    override: "해당 역할의 팀원이 제안 → Team Lead 승인"

# 현재 잠금 상태
current_locks:
  - file: "3-workflow-ssot.md"
    reason: "Phase 15 실행 중"
    locked_at: "2026-02-17T09:00:00Z"
    expected_unlock: "2026-03-10T18:00:00Z"
    locked_by: "Team Lead"
```

---

## 📝 구현 로드맵

### Phase 1: 빠른 정리 (1주)

- [ ] 0-ssot-index.md 요약 버전으로 리팩토링 (500줄 이내)
- [ ] 각 역할별 필독 체크리스트 추가
- [ ] VERSION.md 생성 (파일별 버전 관리)

### Phase 2: 구조 최적화 (2주)

- [ ] 각 파일에 <details> 펼침형 요약 추가
- [ ] 역할별 진입 경로 명확화 (마크다운 주석)
- [ ] LOCK-STATUS.md 생성

### Phase 3: 자동화 (1개월+)

- [ ] 렌더러 개발 (ssot-role-filter.js)
- [ ] Admin 대시보드에 SSOT 뷰어 추가
- [ ] 자동 버전 감지 (status.md의 ssot_version과 비교)

---

## 결론

| 방안 | 읽기 시간 | 구현 난이도 | 권장 시점 |
|------|----------|-----------|----------|
| **A: 계층화** | 10-20분 | 높음 | 중기 (1개월) |
| **B: 분기 필터링** | 7-15분 | 중간 | 장기 (3개월) |
| **C: 요약+상세** | 10-20분 | 낮음 | **즉시 (1주)** ⭐ |

**최종 권고**: 방안 C 즉시 적용 → 중기에 방안 A 단단히 전환 → 장기에 방안 B 자동화

목표: **사용자 읽기 분량 80% 감소**, 역할별 관리 **세밀화**

---

**문서 관리**:
- 버전: 1.0
- 최종 수정: 2026-02-17
- 다음 리뷰: Phase 15 시작 전 (2026-02-17 착수 시)
