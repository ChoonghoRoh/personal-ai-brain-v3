# PAB AI 질의 통합/개선 보고서

**작성일**: 2026-02-21 23:30
**범위**: AI 질의 메뉴(/ask) 및 대화 기록, 검색/지식 연계
**근거 문서**: [docs/overview/cursor-overview-260208.md](../overview/cursor-overview-260208.md), [docs/overview/vscode-overview-260208.md](../overview/vscode-overview-260208.md), [docs/overview/claude-backend-overview-260209-1635.md](../overview/claude-backend-overview-260209-1635.md)

---

## 1. 현재 기능 설명

### 1.1 메뉴/화면

- **AI 질의**: `/ask` (ask.html)
- 기능: 자연어 대화, 대화 기록 저장

### 1.2 API/서비스

- `/api/ask` (POST): AI 질의
- `/api/conversations` (GET): 대화 기록 조회
- LLM: Ollama 로컬 LLM, 프롬프트/정책/프리셋은 Admin에서 관리

---

## 2. 사용 후기(가설 기반)

- **강점**: 로컬 LLM 기반 개인정보 보호, 대화 기록 저장
- **약점**: 출처/근거 표시 제한, RAG 필터의 사용자 제어 부족

---

## 3. 사용 불편점 및 리스크

| 구분 | 증상                             | 영향                     | 우선순위 |
| ---- | -------------------------------- | ------------------------ | -------- |
| 신뢰 | 답변 근거/출처 표시 부족         | 정책/연구 활용 신뢰 저하 | 높음     |
| 통제 | RAG 범위/라벨/프로젝트 선택 불가 | 민감 지식 혼입           | 높음     |
| 운영 | 대화 기록 관리/내보내기 부족     | 감사/공유 어려움         | 중간     |
| 보안 | 민감 정보 유출 방지 정책 미비    | 내부 규정 위반           | 높음     |

---

## 4. 통합/서비스 개선 방향

### 4.1 검색/지식 연계

- 검색 결과 선택 → AI 질의 컨텍스트로 전달
- 지식 구조에서 선택한 청크 기반 질의

### 4.2 정책 기반 응답

- 정책 세트(금지어, 민감정보 마스킹) 강화
- 답변에 출처/근거 표기(청크 링크)

---

## 5. 기능 고도화 제안

### 5.1 컨텍스트 제어

- 라벨/프로젝트/승인 상태 기반 컨텍스트 필터
- 컨텍스트 미리보기 + 선택 편집

### 5.2 대화 관리

- 대화 폴더/태그
- 대화 내보내기 (PDF/HWP/Markdown)
- 공유 링크(만료/권한 설정)

---

## 6. 보안/운영/정책

- 민감 카테고리 차단, 보안 등급별 RAG 제한
- 요청/응답 감사 로그
- Rate Limiting 강화(LLM 비용/자원 보호)

---

## 7. 테스트·검증 계획

### 7.1 pytest (Backend)

- 컨텍스트 필터(라벨/승인 상태) 정확성
- 민감 지식 차단 정책 테스트
- 대화 기록 CRUD

### 7.2 Playwright (E2E)

- 검색 → AI 질의 연계 흐름
- 지식 구조 → AI 질의 연계 흐름
- 대화 내보내기/공유

---

## 8. 단계별 실행 시나리오

- **1단계**: 출처/근거 표시, RAG 필터 UI
- **2단계**: 대화 관리/내보내기, 공유 기능
- **3단계**: 정책 세트 고도화, 민감 정보 자동 차단

---

## 9. KPI 제안

- 출처 포함 답변 비율 90% 이상
- AI 질의 재사용/공유 비율 25% 이상
- 정책 위반/민감 정보 노출 0건
