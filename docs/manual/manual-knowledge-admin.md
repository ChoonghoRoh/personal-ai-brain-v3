# ⚙️ Knowledge Admin 사용 매뉴얼

## 개요

Knowledge Admin은 지식 구조를 관리하는 관리자 도구입니다. 라벨을 생성/삭제하고, 청크에 라벨을 부여하거나 제거할 수 있습니다.

**접속 경로**: `/knowledge-admin`

---

## 주요 기능

### 1. 라벨 관리

#### 1.1 라벨 생성

새로운 라벨을 생성할 수 있습니다.

**필수 입력 항목**:

- **라벨 이름**: 라벨의 고유 이름 (예: `ai`, `architecture`, `backend`)
- **라벨 타입**: 다음 중 하나를 선택
  - `project_phase`: 프로젝트 단계 (예: planning, development, testing)
  - `role`: 역할 (예: developer, designer, manager)
  - `domain`: 도메인 (예: frontend, backend, database)
  - `importance`: 중요도 (예: high, medium, low)

**선택 입력 항목**:

- **설명**: 라벨에 대한 설명 (선택사항)

**사용 방법**:

1. "라벨 이름" 필드에 이름을 입력합니다
2. "라벨 타입" 드롭다운에서 타입을 선택합니다
3. 필요시 "설명" 필드에 설명을 입력합니다
4. "라벨 생성" 버튼을 클릭합니다

**성공 시**:

- 성공 메시지가 표시됩니다
- 라벨 목록에 새 라벨이 추가됩니다
- 폼이 초기화됩니다

#### 1.2 라벨 목록 확인

생성된 모든 라벨이 테이블 형태로 표시됩니다.

**표시 정보**:

- **이름**: 라벨 이름 (배지 형태로 표시)
- **타입**: 라벨 타입
- **설명**: 라벨 설명
- **작업**: 삭제 버튼

**라벨 타입별 색상**:

- `project_phase`: 파란색 배경
- `role`: 분홍색 배경
- `domain`: 초록색 배경
- `importance`: 노란색 배경

#### 1.3 라벨 삭제

더 이상 사용하지 않는 라벨을 삭제할 수 있습니다.

**사용 방법**:

1. 라벨 목록에서 삭제할 라벨의 "삭제" 버튼을 클릭합니다
2. 확인 대화상자에서 "확인"을 클릭합니다

**주의사항**:

- 라벨을 삭제하면 해당 라벨이 모든 청크에서 제거됩니다
- 삭제 작업은 되돌릴 수 없습니다

---

### 2. 청크 라벨 관리

#### 2.1 청크 검색

청크를 검색하여 선택할 수 있습니다.

**사용 방법**:

1. "청크 검색" 필드에 검색어를 입력합니다
2. 청크 내용에 검색어가 포함된 청크만 필터링됩니다
3. 검색어를 지우면 모든 청크가 다시 표시됩니다

**검색 기능**:

- 대소문자 구분 없음
- 청크 내용 전체에서 검색
- 실시간 필터링

#### 2.2 청크 선택

청크 목록에서 청크를 클릭하여 선택합니다.

**표시 정보**:

- 청크 ID
- 청크 내용 미리보기 (처음 100자)

**선택된 청크**:

- 파란색 배경으로 강조 표시됩니다
- 선택된 청크의 정보가 상단에 표시됩니다

#### 2.3 청크 라벨 확인

선택한 청크에 부여된 라벨을 확인할 수 있습니다.

**표시 정보**:

- 현재 부여된 모든 라벨이 배지 형태로 표시됩니다
- 각 라벨 옆에 "×" 버튼이 있어 바로 제거할 수 있습니다

#### 2.4 청크에 라벨 추가

선택한 청크에 새로운 라벨을 부여할 수 있습니다.

**사용 방법**:

1. 청크를 선택합니다
2. "라벨 추가" 드롭다운에서 추가할 라벨을 선택합니다
3. "라벨 추가" 버튼을 클릭합니다

**성공 시**:

- 성공 메시지가 표시됩니다
- 현재 라벨 목록에 새 라벨이 추가됩니다
- 드롭다운이 초기화됩니다

#### 2.5 청크에서 라벨 제거

청크에 부여된 라벨을 제거할 수 있습니다.

**사용 방법**:

1. 청크를 선택합니다
2. 제거할 라벨 옆의 "×" 버튼을 클릭합니다
3. 확인 대화상자에서 "확인"을 클릭합니다

**성공 시**:

- 성공 메시지가 표시됩니다
- 해당 라벨이 청크에서 제거됩니다

---

## 사용 시나리오

### 시나리오 1: 새 프로젝트 단계 라벨 생성

1. "라벨 관리" 패널에서:
   - 라벨 이름: `planning`
   - 라벨 타입: `project_phase` 선택
   - 설명: `프로젝트 기획 단계` 입력
2. "라벨 생성" 버튼 클릭
3. 라벨 목록에서 생성된 라벨 확인

### 시나리오 2: 여러 청크에 동일한 라벨 부여

1. "청크 라벨 관리" 패널에서:
   - 청크 검색으로 관련 청크들을 찾습니다
   - 첫 번째 청크를 선택합니다
   - 라벨을 추가합니다
2. 다음 청크를 선택하고 같은 라벨을 추가합니다
3. 반복하여 모든 관련 청크에 라벨을 부여합니다

### 시나리오 3: 청크 라벨 정리

1. 청크를 선택합니다
2. 부적절한 라벨을 확인합니다
3. "×" 버튼을 클릭하여 라벨을 제거합니다
4. 필요시 올바른 라벨을 추가합니다

---

## 레이아웃

Knowledge Admin은 두 개의 패널로 구성됩니다:

### 왼쪽 패널: 라벨 관리

- 라벨 생성 폼
- 라벨 목록 테이블

### 오른쪽 패널: 청크 라벨 관리

- 청크 검색
- 청크 목록
- 선택된 청크의 라벨 관리

---

## API 엔드포인트

Knowledge Admin은 다음 API를 사용합니다:

### 라벨 관리

- `GET /api/labels` - 라벨 목록 조회
- `POST /api/labels` - 라벨 생성
  ```json
  {
    "name": "라벨 이름",
    "label_type": "project_phase|role|domain|importance",
    "description": "설명 (선택사항)"
  }
  ```
- `DELETE /api/labels/{id}` - 라벨 삭제

### 청크 라벨 관리

- `GET /api/knowledge/chunks` - 청크 목록 조회
- `GET /api/labels/chunks/{chunk_id}/labels` - 청크의 라벨 목록 조회
- `POST /api/labels/chunks/{chunk_id}/labels/{label_id}` - 청크에 라벨 추가
- `DELETE /api/labels/chunks/{chunk_id}/labels/{label_id}` - 청크에서 라벨 제거

---

## 팁

1. **라벨 네이밍**: 일관된 네이밍 규칙을 사용하면 나중에 관리가 쉬워집니다

   - 예: `ai`, `backend`, `frontend` (소문자, 단어 구분 없음)
   - 예: `project-phase-1`, `role-developer` (하이픈 사용)

2. **라벨 타입 활용**: 라벨 타입을 적절히 사용하면 필터링과 그룹화가 용이합니다

   - 프로젝트 단계: `project_phase`
   - 기술 스택: `domain`
   - 중요도: `importance`

3. **청크 검색 활용**: 청크 내용으로 검색하여 관련 청크를 빠르게 찾을 수 있습니다

4. **일괄 작업**: 여러 청크에 같은 라벨을 부여할 때는 청크를 순차적으로 선택하여 라벨을 추가합니다

---

## 문제 해결

### 라벨 생성이 실패할 때

- 라벨 이름이 이미 존재하는지 확인하세요
- 필수 항목(이름, 타입)이 모두 입력되었는지 확인하세요
- 브라우저 콘솔에서 오류 메시지를 확인하세요

### 청크 목록이 표시되지 않을 때

- 서버가 실행 중인지 확인하세요
- 브라우저를 새로고침해보세요
- 네트워크 연결을 확인하세요

### 라벨이 추가되지 않을 때

- 청크가 선택되었는지 확인하세요
- 라벨이 선택되었는지 확인하세요
- 브라우저 콘솔에서 오류 메시지를 확인하세요

### 성능 문제

- 청크 목록은 최대 100개까지만 표시됩니다
- 검색을 사용하여 필요한 청크만 필터링하세요
- 대량의 라벨 작업은 시간이 걸릴 수 있습니다

---

## 제한사항

- 청크 목록은 한 번에 최대 100개까지만 로드됩니다
- 라벨 삭제는 되돌릴 수 없습니다
- 청크 라벨 관리는 한 번에 하나의 청크만 선택할 수 있습니다
