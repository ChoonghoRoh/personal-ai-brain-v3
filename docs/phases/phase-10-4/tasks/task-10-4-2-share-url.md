# Task 10-4-2: 결과 공유 (URL 생성)

**우선순위**: 10-4 내 2순위  
**예상 작업량**: 2일  
**의존성**: Phase 10-3 완료 후 권장  
**상태**: ✅ 완료

**기반 문서**: [phase-10-4-0-todo-list.md](../phase-10-4-0-todo-list.md)  
**작업 순서**: [phase-10-navigation.md](../../phase-10-navigation.md)

---

## 1. 개요

### 1.1 목표

Reasoning **결과를 공유할 수 있는 URL**을 생성하고, 해당 URL로 접근 시 **결과만 읽기 전용**으로 표시한다.

### 1.2 대상

| 대상           | 내용                                              |
| -------------- | ------------------------------------------------- |
| 결과 식별·저장 | 결과 식별자 또는 스냅샷 저장 설계                 |
| URL 생성       | 공유 URL 생성 API 또는 정적 경로 설계             |
| 읽기 전용 뷰   | 공유 URL로 접근 시 결과만 표시 (편집·재실행 없음) |

---

## 2. 파일 변경 계획

### 2.1 신규/수정

| 파일 경로                             | 용도                                     |
| ------------------------------------- | ---------------------------------------- |
| 백엔드: 결과 스냅샷 저장 API·스토리지 | 결과 식별자·스냅샷 저장                  |
| 백엔드 또는 프론트: URL 생성          | 공유 URL 생성 (예: `/reason/share/{id}`) |
| 프론트엔드: 공유 결과 뷰              | 읽기 전용 결과 표시 페이지/모드          |

---

## 3. 작업 체크리스트

### 3.1 설계

- [x] 결과 식별자 또는 스냅샷 저장 설계
  - [x] 저장소: PostgreSQL `reasoning_results` 테이블 (share_id 컬럼 추가)
  - [x] TTL: 별도 만료 없음 (영구 저장)
- [x] 공유 URL 생성 API 설계
  - [x] URL 형식: `/reason?share={share_id}` (8자 UUID hex)
  - [x] 인증: 공개 링크 (인증 불필요)

### 3.2 구현

- [x] `POST /api/reason/share` → share_id 생성·반환, 클립보드 복사
- [x] `GET /api/reason/share/{share_id}` → 스냅샷 조회
- [x] 공유 URL 접근 시 폼 숨김 + 결과 읽기 전용 표시 (`checkSharedView()`)
- [x] 존재하지 않는 share_id 시 토스트 안내 메시지

---

## 4. 참고 문서

- [Phase 10-4 Plan](../phase-10-4-0-plan.md)
- [Phase 10-4 Todo List](../phase-10-4-0-todo-list.md)
- [Task 10-3-1 공통 결과 구조](../../phase-10-3/tasks/task-10-3-1-common-result-structure.md) — 스냅샷 구조 참고
