# Task 19-4-5: ë„¤ë¹„ê²Œì´ì…˜ + ë¦¬ë‹¤ì´ë ‰íŠ¸

> **ë„ë©”ì¸**: [FS]
> **ë‹´ë‹¹**: backend-dev (ë¦¬ë‹¤ì´ë ‰íŠ¸) + frontend-dev (ë©”ë‰´)
> **ì˜ì¡´ì„±**: 19-4-1, 19-4-2, 19-4-3, 19-4-4 (ëª¨ë“  íƒ­ ì™„ì„± í›„)
> **ì˜ˆìƒ ì¤„ ìˆ˜**: BE ~15ì¤„ ë³€ê²½, FE ~10ì¤„ ë³€ê²½

---

## 1. ëª©í‘œ

LNB ë©”ë‰´ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ , ê¸°ì¡´ 3ê°œ URLì— ëŒ€í•œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ ì„¤ì •í•œë‹¤. ê¸°ì¡´ ë¶ë§ˆí¬/ë§í¬ í˜¸í™˜ì„±ì„ ë³´ì¥í•œë‹¤.

---

## 2. êµ¬í˜„ ë‹¨ê³„

### 2.1 FE: header-component.js ë©”ë‰´ ì—…ë°ì´íŠ¸

**íŒŒì¼**: `web/public/js/components/header-component.js`

`ADMIN_MENU` ë°°ì—´ ë³€ê²½:

**ë³€ê²½ ì „**:
```javascript
const ADMIN_MENU = [
  { path: "/admin/groups", label: "í‚¤ì›Œë“œ ê´€ë¦¬", icon: "ğŸ“¦" },
  { path: "/admin/labels", label: "ë¼ë²¨ ê´€ë¦¬", icon: "ğŸ·ï¸" },
  { path: "/admin/chunk-create", label: "ì²­í¬ ìƒì„±", icon: "â•" },
  { path: "/admin/approval", label: "ì²­í¬ ìŠ¹ì¸", icon: "âœ…" },
  { path: "/admin/chunk-labels", label: "ì²­í¬ ê´€ë¦¬", icon: "ğŸ“" },
  { path: "/admin/knowledge-files", label: "íŒŒì¼ê´€ë¦¬", icon: "ğŸ“" },
  { path: "/admin/ai-automation", label: "AI ìë™í™”", icon: "ğŸ¤–" },
  { path: "/knowledge-graph", label: "ì§€ì‹ ê·¸ë˜í”„", icon: "ğŸ•¸ï¸" },
  { path: "/admin/statistics", label: "í†µê³„", icon: "ğŸ“ˆ" },
];
```

**ë³€ê²½ í›„**:
```javascript
const ADMIN_MENU = [
  { path: "/admin/groups", label: "í‚¤ì›Œë“œ ê´€ë¦¬", icon: "ğŸ“¦" },
  { path: "/admin/labels", label: "ë¼ë²¨ ê´€ë¦¬", icon: "ğŸ·ï¸" },
  { path: "/admin/knowledge-workflow", label: "ì§€ì‹ ì›Œí¬í”Œë¡œìš°", icon: "ğŸ“‹" },
  { path: "/admin/knowledge-files", label: "íŒŒì¼ê´€ë¦¬", icon: "ğŸ“" },
  { path: "/admin/ai-automation", label: "AI ìë™í™”", icon: "ğŸ¤–" },
  { path: "/knowledge-graph", label: "ì§€ì‹ ê·¸ë˜í”„", icon: "ğŸ•¸ï¸" },
  { path: "/admin/statistics", label: "í†µê³„", icon: "ğŸ“ˆ" },
];
```

### 2.2 BE: ê¸°ì¡´ URL ë¦¬ë‹¤ì´ë ‰íŠ¸

**íŒŒì¼**: `backend/main.py`

ê¸°ì¡´ 3ê°œ ë¼ìš°íŠ¸ë¥¼ `_HTML_ROUTES`ì—ì„œ ì œê±°í•˜ê³ , ë³„ë„ ë¦¬ë‹¤ì´ë ‰íŠ¸ í•¸ë“¤ëŸ¬ë¡œ êµì²´:

```python
from fastapi.responses import RedirectResponse

# ê¸°ì¡´ 3ê°œ ì²­í¬ ê´€ë¦¬ URL -> í†µí•© í˜ì´ì§€ ë¦¬ë‹¤ì´ë ‰íŠ¸
_CHUNK_REDIRECTS = [
    ("/admin/chunk-create", "/admin/knowledge-workflow?tab=create"),
    ("/admin/approval", "/admin/knowledge-workflow?tab=approval"),
    ("/admin/chunk-labels", "/admin/knowledge-workflow?tab=manage"),
]

def _register_chunk_redirects(application: FastAPI) -> None:
    for old_path, new_url in _CHUNK_REDIRECTS:
        def _make_redirect(_url=new_url):
            async def _handler():
                return RedirectResponse(url=_url, status_code=302)
            return _handler
        application.get(old_path)(_make_redirect())
```

**ì£¼ì˜**: `_HTML_ROUTES`ì—ì„œ ê¸°ì¡´ 3ê°œ í•­ëª©ì„ ì œê±°í•˜ê³ , ë¦¬ë‹¤ì´ë ‰íŠ¸ë¥¼ `_register_html_routes()` í˜¸ì¶œ ì „ì— ë“±ë¡í•´ì•¼ í•œë‹¤.

ë³€ê²½ ìˆœì„œ:
1. `_HTML_ROUTES`ì—ì„œ `/admin/chunk-create`, `/admin/approval`, `/admin/chunk-labels` 3ê°œ ì œê±°
2. `_register_chunk_redirects(app)` í˜¸ì¶œ ì¶”ê°€
3. `_HTML_ROUTES`ì— `/admin/knowledge-workflow` ì¶”ê°€ (19-4-1ì—ì„œ ì´ë¯¸ ì™„ë£Œ)

### 2.3 íšŒê·€ í…ŒìŠ¤íŠ¸

ìˆ˜ë™ í…ŒìŠ¤íŠ¸ í•­ëª©:

| # | í…ŒìŠ¤íŠ¸ í•­ëª© | ê¸°ëŒ€ ê²°ê³¼ |
|---|-----------|----------|
| 1 | LNB ë©”ë‰´ì— "ì§€ì‹ ì›Œí¬í”Œë¡œìš°" í‘œì‹œ | 1ê°œ ë©”ë‰´ë¡œ í†µí•© í‘œì‹œ |
| 2 | LNBì— ê¸°ì¡´ 3ê°œ ë©”ë‰´ ë¯¸í‘œì‹œ | chunk-create, approval, chunk-labels ë©”ë‰´ ì—†ìŒ |
| 3 | `/admin/chunk-create` ì§ì ‘ ì ‘ê·¼ | `/admin/knowledge-workflow?tab=create`ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 4 | `/admin/approval` ì§ì ‘ ì ‘ê·¼ | `/admin/knowledge-workflow?tab=approval`ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 5 | `/admin/chunk-labels` ì§ì ‘ ì ‘ê·¼ | `/admin/knowledge-workflow?tab=manage`ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| 6 | ë¦¬ë‹¤ì´ë ‰íŠ¸ í›„ íƒ­ ìƒíƒœ | ì˜¬ë°”ë¥¸ íƒ­ì´ í™œì„±í™” |
| 7 | `/admin/knowledge-workflow` LNB active | "ì§€ì‹ ì›Œí¬í”Œë¡œìš°" ë©”ë‰´ì— active í´ë˜ìŠ¤ |
| 8 | ë‹¤ë¥¸ í˜ì´ì§€ì—ì„œ LNB ì •ìƒ | ê¸°ì¡´ ë©”ë‰´ êµ¬ì¡° ì˜í–¥ ì—†ìŒ |

---

## 3. ìˆ˜ì •/ìƒì„± íŒŒì¼ ëª©ë¡

| êµ¬ë¶„ | íŒŒì¼ | ì‘ì—… |
|------|------|------|
| ìˆ˜ì • | `web/public/js/components/header-component.js` | ADMIN_MENU 3ê°œ ì œê±°, 1ê°œ ì¶”ê°€ |
| ìˆ˜ì • | `backend/main.py` | _HTML_ROUTES 3ê°œ ì œê±°, ë¦¬ë‹¤ì´ë ‰íŠ¸ í•¸ë“¤ëŸ¬ ì¶”ê°€ |

---

## 4. Done Definition

- [ ] LNB ë©”ë‰´ì— "ì§€ì‹ ì›Œí¬í”Œë¡œìš°" 1ê°œë§Œ í‘œì‹œ (ê¸°ì¡´ 3ê°œ ë©”ë‰´ ë¯¸í‘œì‹œ)
- [ ] `/admin/chunk-create` -> 302 ë¦¬ë‹¤ì´ë ‰íŠ¸ -> `?tab=create`
- [ ] `/admin/approval` -> 302 ë¦¬ë‹¤ì´ë ‰íŠ¸ -> `?tab=approval`
- [ ] `/admin/chunk-labels` -> 302 ë¦¬ë‹¤ì´ë ‰íŠ¸ -> `?tab=manage`
- [ ] ë¦¬ë‹¤ì´ë ‰íŠ¸ í›„ ì˜¬ë°”ë¥¸ íƒ­ í™œì„±í™”
- [ ] `/admin/knowledge-workflow` í˜ì´ì§€ì—ì„œ LNB active ì •í™•
- [ ] ë‹¤ë¥¸ í˜ì´ì§€ì˜ LNB ì˜í–¥ ì—†ìŒ
- [ ] ì½˜ì†” ì—ëŸ¬ 0ê±´

---

## 5. ë¦¬ìŠ¤í¬

| ë¦¬ìŠ¤í¬ | ëŒ€ì‘ |
|--------|------|
| ê¸°ì¡´ URL ë¶ë§ˆí¬ ê¹¨ì§ | 302 ë¦¬ë‹¤ì´ë ‰íŠ¸ë¡œ ì›í™œí•œ ì „í™˜ ë³´ì¥ |
| LNB `startsWith` ë§¤ì¹­ìœ¼ë¡œ `/admin/knowledge-workflow?tab=X` active íŒë³„ | `currentPath.startsWith(item.path)` ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë¯€ë¡œ ì •ìƒ ë™ì‘ |
| ë¦¬ë‹¤ì´ë ‰íŠ¸ ë“±ë¡ ìˆœì„œ ì´ìŠˆ | `_register_chunk_redirects()`ë¥¼ `_register_html_routes()` ì „ì— í˜¸ì¶œ |

---

**ë¬¸ì„œ ê´€ë¦¬**: Phase 19-4, Task 19-4-5, ì‘ì„±ì¼ 2026-02-22
