# Task 10-1-2: 분석 작업 취소 기능

**우선순위**: 10-1 내 2순위  
**예상 작업량**: 1일  
**의존성**: 10-1-1 완료 후 권장  
**상태**: ⏳ 대기

**기반 문서**: [phase-10-1-0-todo-list.md](../phase-10-1-0-todo-list.md)  
**작업 순서**: [phase-10-navigation.md](../../phase-10-navigation.md)

---

## 1. 개요

### 1.1 목표

진행 중인 Reasoning 분석을 **사용자가 취소**할 수 있도록 백엔드 취소 API와 프론트엔드 취소 버튼을 구현한다.

### 1.2 대상

| 대상       | 내용                                         |
| ---------- | -------------------------------------------- |
| 백엔드     | 취소 엔드포인트, 진행 중 추론 작업 중단 로직 |
| 프론트엔드 | 취소 버튼, 취소 후 UI 상태 정리              |

---

## 2. 파일 변경 계획

### 2.1 신규/수정

| 파일 경로                                                | 용도                                              |
| -------------------------------------------------------- | ------------------------------------------------- |
| `backend/routers/reasoning/reason.py` (또는 별도 라우터) | `POST /api/reason/{task_id}/cancel` 또는 동등 API |
| 백엔드 서비스 레이어                                     | 진행 중인 추론 중단 로직 (플래그·취소 토큰 등)    |
| `web/src/pages/reason.html` (또는 해당 뷰)               | 취소 버튼, API 호출, UI 상태 정리                 |

---

## 3. 작업 체크리스트

### 3.1 백엔드

- [ ] 취소 API 설계 및 구현
  - [ ] `POST /api/reason/{task_id}/cancel` 또는 동등 엔드포인트
  - [ ] task_id 발급·관리 방식 결정 (세션·요청 ID 등)
- [ ] 진행 중인 추론 작업 중단 로직
  - [ ] LLM 호출 중단 가능 여부 확인 (Ollama 등)
  - [ ] 취소 후 응답·에러 메시지 일관화

### 3.2 프론트엔드

- [ ] 진행 중일 때만 취소 버튼 노출
- [ ] 취소 버튼 클릭 시 취소 API 호출
- [ ] 취소 후 UI 상태 정리 (로딩 해제, 결과 영역 초기화 등)

---

## 4. 참고 문서

- [Phase 10-1 Plan](../phase-10-1-0-plan.md)
- [Phase 10-1 Todo List](../phase-10-1-0-todo-list.md)
- [Task 10-1-1 진행 상태](task-10-1-1-progress-status.md) — 진행 상태와 연동
- Reasoning API: `backend/routers/reasoning/reason.py`
