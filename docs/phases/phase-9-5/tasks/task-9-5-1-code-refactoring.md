# Task 9-5-1: 코드 리팩토링

**우선순위**: 9-5 내 1순위
**예상 작업량**: 1.5일
**의존성**: 없음
**상태**: ✅ 구현 완료 (공통 HTTP 헬퍼 backend/utils/common.py, utils/**init**.py 정리)

**기반 문서**: [phase-9-5-todo-list.md](../phase-9-5-todo-list.md)

---

## 1. 개요

### 1.1 목표

backend 코드의 중복 제거, 구조 개선, 불필요 코드 정리, 네이밍 일관화를 통해 유지보수성과 가독성을 높인다.

### 1.2 대상

| 대상        | 경로/내용                            | 비고           |
| ----------- | ------------------------------------ | -------------- |
| 라우터      | `backend/routers/`                   | 공통 로직 추출 |
| 서비스      | `backend/services/`                  | 레이어 일관성  |
| 유틸리티    | `backend/utils/` (필요시 생성)       | 함수 통합      |
| 모델/스키마 | `backend/models/` 및 Pydantic 스키마 | 중복 정리      |

---

## 2. 작업 체크리스트

### 2.1 중복 코드 제거

- [ ] 라우터 간 공통 로직 추출 (인증·검증·에러 포맷 등)
- [ ] 유틸리티 함수 통합 (validation, 포맷팅 등)
- [ ] 중복 모델/스키마 정리

### 2.2 구조 개선

- [ ] 서비스 레이어 일관성 확보 (호출 패턴, 반환 타입)
- [ ] 의존성 주입 패턴 통일
- [ ] 에러 핸들링 통일 (HTTPException, 메시지 포맷)

### 2.3 불필요한 코드 정리

- [ ] 사용하지 않는 import 제거
- [ ] 주석 처리된 코드 정리
- [ ] 빈 파일/디렉토리 제거

### 2.4 네이밍 개선

- [ ] 일관된 네이밍 컨벤션 적용 (snake_case, 일관된 접두/접미사)
- [ ] 의미 명확한 변수/함수명

### 2.5 품질 기준

- [ ] 함수 길이 50줄 이하
- [ ] 클래스 크기 300줄 이하
- [ ] 순환 복잡도 10 이하
- [ ] 단일 책임 원칙 준수

---

## 3. 파일 변경 계획

### 3.1 수정 예상

| 경로                       | 변경 내용                        |
| -------------------------- | -------------------------------- |
| `backend/routers/**/*.py`  | 공통 의존성·헬퍼 사용, 중복 제거 |
| `backend/services/**/*.py` | 인터페이스·에러 처리 통일        |
| `backend/models/*.py`      | 중복 스키마 정리                 |

### 3.2 신규 생성 (필요 시)

| 경로                         | 용도                  |
| ---------------------------- | --------------------- |
| `backend/utils/common.py`    | 공통 유틸·헬퍼        |
| `backend/core/exceptions.py` | 공통 예외 정의 (선택) |

---

## 4. 참고 문서

- [Phase 9-5 Todo List](../phase-9-5-todo-list.md)
- [Phase 9 Navigation](../../phase-9-navigation.md)
- Google Python Style Guide: https://google.github.io/styleguide/pyguide.html
