# Task 19-3-2: D&D 제거 + 폴더형 트리 전환

> **우선순위**: P0
> **의존성**: 19-3-1 (CSS 분리 완료 후)
> **담당**: frontend-dev
> **상태**: PLANNED

---

## §1 목표

드래그&드롭 기능 전면 제거. 폴더형 아이콘(📁/📂) 트리로 전환.
우클릭 컨텍스트 메뉴 확장으로 노드 이동 기능 대체.

## §2 대상 파일 및 변경 범위

| 파일 | 변경 유형 |
|------|----------|
| `web/public/js/admin/keyword-group-treeview.js` (567줄) | **수정** (D&D 제거 + 폴더 아이콘 + 컨텍스트 메뉴 확장) |
| `web/public/css/admin/admin-groups-tree.css` | **수정** (D&D 관련 스타일 제거 + 폴더 아이콘 스타일 추가) |

## §3 구현 상세

### 3.1 제거 항목 (keyword-group-treeview.js)

| 위치 | 내용 | 줄 수 |
|------|------|------:|
| L11 | `this._dragSourceId = null` | 1 |
| L124 | `li.draggable = true` | 1 |
| L175~186 | dragstart, dragend 이벤트 | 12 |
| L188~217 | dragover, dragleave, drop 이벤트 | 30 |
| L79~110 | rootDropZone 전체 블록 | 32 |
| **합계** | | **76줄** |

### 3.2 제거 항목 (CSS)

- `.tree-node.dragging` (opacity: 0.4)
- `.tree-node-content.drag-over` (background: #dbeafe, border dashed)
- `.tree-node-content.drop-target-highlight` (box-shadow)
- `.tree-root-drop-zone` 및 `.tree-root-drop-zone.drop-target-highlight`

### 3.3 폴더 아이콘 추가

`_renderNode()` 수정 — 토글 아이콘 오른쪽에 폴더 아이콘 추가:
- 자식 있음 + 펼침: 📂
- 자식 있음 + 접힘: 📁
- 리프 노드: 아이콘 없음 (또는 태그 아이콘)

CSS (admin-groups-tree.css):
```css
.tree-folder-icon { font-size: 14px; min-width: 18px; text-align: center; }
```

### 3.4 컨텍스트 메뉴 확장

`_showNodeContextMenu()` 확장:
- 기존: "루트로 이동"
- 추가: "부모 변경" → 그룹 선택 모달/드롭다운 → `moveNode()` 호출
- 추가: "하위 그룹 추가" → 해당 노드를 부모로 새 그룹 생성

### 3.5 줄 수 예측

567줄 - 76줄(D&D) + ~20줄(폴더 아이콘) + ~20줄(메뉴 확장) ≈ ~531줄
→ 500줄 초과 시 컨텍스트 메뉴를 별도 모듈로 분리 검토

## §4 완료 기준 (Done Definition)

1. D&D 관련 코드 완전 제거 (JS + CSS)
2. 트리 노드에 폴더 아이콘 표시 (📁 접힘, 📂 펼침)
3. 우클릭 → "루트로 이동", "부모 변경" 메뉴 동작 확인
4. 노드 이동 API 정상 동작 (우클릭 메뉴 경유)
5. keyword-group-treeview.js 500줄 이내 확인 (초과 시 모듈 분리)
6. 드래그 시도 시 아무 동작 없음 확인
