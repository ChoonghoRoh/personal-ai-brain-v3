# Task 19-3-4: 바로 수정 모드

> **우선순위**: P1
> **의존성**: 19-3-2 (D&D 제거 완료 후)
> **담당**: frontend-dev
> **상태**: PLANNED

---

## §1 목표

그룹 선택 시 즉시 인라인 편집 폼 표시 (보기 모드 제거).
`keyword-group-crud.js`의 중복 HTML 제거로 500줄 이내 달성.

## §2 대상 파일 및 변경 범위

| 파일 | 변경 유형 |
|------|----------|
| `web/public/js/admin/keyword-group-crud.js` (546줄) | **수정** (중복 HTML 추출, 보기모드 제거) |
| `web/public/js/admin/keyword-group-matching.js` | **수정** (selectGroup에서 편집 폼 직접 호출) |
| `web/public/css/admin/admin-groups-panel.css` | **수정** (편집 폼 기본 스타일 조정) |

## §3 구현 상세

### 3.1 공통 HTML 추출

`showEditGroupInline()` (66줄)과 `showCreateGroupModal()` (64줄)의 HTML 90% 중복.
→ `_buildEditFormHTML(group, isNew)` 헬퍼 메서드 추출:
- isNew=true: 생성 타이틀, 빈 필드
- isNew=false: 기존 값 채움, 삭제 버튼 표시

### 3.2 보기 모드 제거

`renderDetailPanel(group)`: 기존 보기 모드 HTML 대신 편집 폼을 직접 렌더링.
`manager.editingGroupId`를 선택 즉시 설정.

### 3.3 부모 변경 드롭다운

편집 폼에 부모 그룹 선택 드롭다운 추가:
- `_buildParentOptions(excludeId)`: treeData를 flat 리스트로 변환
- 자기 자신과 하위 노드 제외 (순환 참조 방지)

### 3.4 saveEditInline() 수정

부모 변경 값이 기존과 다르면 `moveNode()` 추가 호출.

### 3.5 줄 수 예측

| 변경 | 줄 수 변화 |
|------|-----------|
| 보기 모드 renderDetailPanel() HTML 제거 | -25줄 |
| showEditGroupInline() 공통 추출 | -30줄 |
| showCreateGroupModal() 공통 추출 | -30줄 |
| _buildEditFormHTML() 신규 | +40줄 |
| _buildParentOptions() 신규 | +15줄 |
| 부모 변경 로직 | +5줄 |
| 레거시 래퍼 메서드 제거 | -14줄 |
| 미사용 createGroupCard() 제거 | -20줄 |
| **순 변화** | **-59줄** (546 → ~487줄) |

## §4 완료 기준 (Done Definition)

1. 트리에서 그룹 선택 시 즉시 편집 폼 표시 (중간 보기 모드 없음)
2. 편집 폼에 이름, 설명, 색상, 부모 변경 드롭다운, AI 추천, 저장/삭제 버튼 포함
3. 부모 변경 → 저장 시 노드 이동 정상 동작
4. 새 그룹 생성도 동일 폼 사용
5. `keyword-group-crud.js` 500줄 이내 확인
6. 기존 CRUD 기능 회귀 없음
