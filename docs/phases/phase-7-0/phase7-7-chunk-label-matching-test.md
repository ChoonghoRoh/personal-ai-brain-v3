# Phase 7.7 청크 상세 라벨 매칭 카드 테스트

## 테스트 목적

Phase 7.7에서 구현한 청크 상세 라벨 매칭 카드 UI의 기능을 검증합니다.

## 테스트 환경

- **날짜**: 2026-01-07
- **테스트 대상**: `/knowledge` (Knowledge Studio) 페이지
- **기능**: 청크 상세 라벨 매칭 카드 패널

## 테스트 시나리오

### 1. 청크 상세 열기 및 라벨 매칭 패널 표시

**전제 조건:**
- Knowledge Studio 페이지 접근
- 최소 1개 이상의 청크 존재

**테스트 단계:**
1. Knowledge Studio 페이지 접근 (`/knowledge`)
2. 청크 카드 클릭하여 상세 정보 열기
3. "💡 라벨 매칭" 섹션 확인

**예상 결과:**
- ✅ 청크 상세 정보가 표시됨
- ✅ "연결된 라벨" 섹션에 현재 연결된 라벨이 칩 형태로 표시됨
- ✅ "라벨 매칭" 패널이 표시됨
- ✅ "추천 키워드" 및 "추천 그룹" 탭이 표시됨
- ✅ 첫 번째 탭("추천 키워드")이 자동으로 로드됨

---

### 2. 추천 키워드 탭 동작

**전제 조건:**
- 청크 상세 정보가 열려 있음
- 해당 청크에 추천 가능한 키워드가 존재

**테스트 단계:**
1. "추천 키워드" 탭 클릭
2. 추천 키워드 카드 목록 확인
3. 각 카드의 정보 확인 (이름, 타입, 신뢰도)

**예상 결과:**
- ✅ 추천 키워드 목록이 로드됨
- ✅ 각 카드에 다음 정보가 표시됨:
  - 라벨 이름
  - 라벨 타입 (keyword)
  - 신뢰도 (퍼센트)
- ✅ "추가" 버튼이 표시됨
- ✅ 이미 연결된 키워드는 "연결됨" 상태로 비활성화됨

---

### 3. 추천 그룹 탭 동작

**전제 조건:**
- 청크 상세 정보가 열려 있음
- 해당 청크에 추천 가능한 키워드 그룹이 존재

**테스트 단계:**
1. "추천 그룹" 탭 클릭
2. 추천 그룹 카드 목록 확인
3. 각 카드의 정보 확인

**예상 결과:**
- ✅ 추천 그룹 목록이 로드됨
- ✅ 각 카드에 다음 정보가 표시됨:
  - 그룹 이름
  - 라벨 타입 (keyword_group)
  - 신뢰도 (퍼센트)
- ✅ "추가" 버튼이 표시됨
- ✅ 이미 연결된 그룹은 "연결됨" 상태로 비활성화됨

---

### 4. 추천 라벨 추가 기능

**전제 조건:**
- 청크 상세 정보가 열려 있음
- 추천 라벨 목록에 추가 가능한 라벨이 존재

**테스트 단계:**
1. 추천 라벨 카드에서 "추가" 버튼 클릭
2. 성공 메시지 확인
3. 청크 상세 정보 새로고침 확인
4. "연결된 라벨" 섹션에 추가된 라벨 확인

**예상 결과:**
- ✅ "추가" 버튼 클릭 시 API 호출 성공
- ✅ 성공 메시지 표시 ("라벨이 추가되었습니다.")
- ✅ 청크 상세 정보가 자동으로 새로고침됨
- ✅ 추가된 라벨이 "연결된 라벨" 섹션에 칩 형태로 표시됨
- ✅ 해당 라벨의 추천 카드가 "연결됨" 상태로 변경됨

---

### 5. 연결된 라벨 제거 기능

**전제 조건:**
- 청크 상세 정보가 열려 있음
- 연결된 라벨이 최소 1개 이상 존재

**테스트 단계:**
1. "연결된 라벨" 섹션에서 라벨 칩의 "×" 버튼 클릭
2. 확인 다이얼로그에서 확인 클릭
3. 라벨 제거 확인
4. 청크 상세 정보 새로고침 확인

**예상 결과:**
- ✅ "×" 버튼 클릭 시 확인 다이얼로그 표시
- ✅ 확인 시 API 호출 성공
- ✅ 라벨 칩이 UI에서 즉시 제거됨
- ✅ 청크 상세 정보가 자동으로 새로고침됨
- ✅ 해당 라벨의 추천 카드가 다시 "추가" 가능한 상태로 변경됨

---

### 6. 탭 전환 동작

**전제 조건:**
- 청크 상세 정보가 열려 있음

**테스트 단계:**
1. "추천 키워드" 탭 클릭
2. "추천 그룹" 탭 클릭
3. 다시 "추천 키워드" 탭 클릭

**예상 결과:**
- ✅ 탭 클릭 시 활성 탭이 변경됨 (시각적 표시)
- ✅ 각 탭 클릭 시 해당 타입의 추천 라벨이 로드됨
- ✅ 탭 전환 시 로딩 상태가 표시됨

---

### 7. 추천 라벨이 없는 경우

**전제 조건:**
- 청크 상세 정보가 열려 있음
- 해당 청크에 추천 가능한 라벨이 없음

**테스트 단계:**
1. "추천 키워드" 탭 확인
2. "추천 그룹" 탭 확인

**예상 결과:**
- ✅ "추천 키워드/그룹가 없습니다." 메시지 표시
- ✅ 빈 상태 UI가 적절히 표시됨

---

### 8. API 오류 처리

**전제 조건:**
- 청크 상세 정보가 열려 있음
- 네트워크 오류 또는 서버 오류 상황 시뮬레이션

**테스트 단계:**
1. 네트워크 연결 끊기 (또는 서버 중지)
2. 추천 라벨 로드 시도
3. 라벨 추가/제거 시도

**예상 결과:**
- ✅ 오류 메시지가 적절히 표시됨
- ✅ 사용자에게 친화적인 오류 메시지 제공
- ✅ 콘솔에 상세 오류 로그 기록

---

## 테스트 결과 요약

### 성공 기준

- ✅ 모든 기본 기능이 정상 동작
- ✅ UI/UX가 직관적이고 사용하기 쉬움
- ✅ 오류 처리가 적절함
- ✅ 성능이 허용 가능한 수준 (로딩 시간 < 2초)

### 발견된 이슈

(테스트 수행 후 기록)

---

## 테스트 수행 방법

1. 웹 서버 실행 확인
2. 브라우저에서 `/knowledge` 페이지 접근
3. 위 시나리오를 순차적으로 수행
4. 각 시나리오의 결과를 기록
5. 발견된 이슈를 문서화

---

## 참고

- API 엔드포인트:
  - `GET /api/knowledge/chunks/{chunk_id}` - 청크 상세 정보
  - `POST /api/knowledge/labels/suggest?chunk_id={chunk_id}` - 추천 라벨 조회
  - `POST /api/knowledge/chunks/{chunk_id}/labels` - 라벨 추가
  - `DELETE /api/knowledge/chunks/{chunk_id}/labels` - 라벨 제거

