# Phase 7.9.3 관계 타입 필터링 기능 테스트 가이드

**작성일**: 2026-01-09  
**테스트 대상**: Knowledge Studio - 관계 매칭 보드

---

## 테스트 접속 방법

1. **서버 확인**
   ```bash
   # 서버가 실행 중인지 확인
   curl http://localhost:8001/health
   ```

2. **브라우저 접속**
   - URL: `http://localhost:8001/knowledge`
   - 또는 대시보드에서 "지식 구조" 메뉴 클릭

---

## 테스트 시나리오

### 1. 기본 UI 확인

**단계:**
1. Knowledge Studio 페이지 접속
2. 청크 카드 중 하나 클릭
3. 청크 상세 정보가 하단에 표시되는지 확인
4. "🔗 관계 매칭" 탭 클릭

**예상 결과:**
- ✅ 3단 레이아웃이 표시됨:
  - 좌측: 기준 청크 카드
  - 중앙: 연결된 관계 (상단에 필터 버튼 그룹 표시)
  - 우측: 추천 관계 (상단에 필터 버튼 그룹 표시)

---

### 2. 필터 버튼 UI 확인

**단계:**
1. 관계 매칭 탭 열기
2. 중앙 영역 상단 확인
3. 우측 영역 상단 확인

**예상 결과:**
- ✅ 각 영역 상단에 다음 필터 버튼들이 표시됨:
  - "전체" (활성화 상태, 진한 파란색)
  - "유사" (similar)
  - "설명" (explains)
  - "결과" (result_of)
  - "원인" (cause_of)
  - "참조" (refers_to)

---

### 3. 필터 기능 테스트 - 기존 관계

**전제 조건:**
- 관계가 있는 청크 선택
- 관계 매칭 탭 열기

**테스트:**
1. 중앙 영역의 "유사" 필터 버튼 클릭
2. 관계 카드 목록 확인

**예상 결과:**
- ✅ "유사" 버튼이 활성화됨 (초록색)
- ✅ "전체" 버튼이 비활성화됨
- ✅ similar 타입 관계만 표시됨
- ✅ 다른 타입 관계는 숨겨짐

---

### 4. 필터 기능 테스트 - 추천 관계

**전제 조건:**
- 관계 매칭 탭 열기
- 추천 관계가 로드됨

**테스트:**
1. 우측 영역의 "설명" 필터 버튼 클릭
2. 추천 관계 카드 목록 확인

**예상 결과:**
- ✅ "설명" 버튼이 활성화됨 (파란색)
- ✅ "전체" 버튼이 비활성화됨
- ✅ explains 타입 추천 관계만 표시됨

---

### 5. 다중 필터 선택 테스트

**테스트:**
1. 중앙 영역에서 "유사" 클릭
2. "설명" 클릭
3. 관계 카드 목록 확인

**예상 결과:**
- ✅ "유사"와 "설명" 버튼이 모두 활성화됨
- ✅ similar 또는 explains 타입 관계가 모두 표시됨

---

### 6. "전체" 선택 테스트

**테스트:**
1. 여러 필터 선택 상태에서
2. "전체" 버튼 클릭

**예상 결과:**
- ✅ 모든 필터 버튼이 비활성화됨
- ✅ "전체" 버튼만 활성화됨
- ✅ 모든 타입의 관계가 표시됨

---

### 7. 필터 상태 유지 테스트

**테스트:**
1. 필터 선택 (예: "유사")
2. 관계 연결 또는 해제
3. 필터 상태 확인

**예상 결과:**
- ✅ 관계 연결/해제 후에도 필터 상태가 유지됨
- ✅ 선택한 필터에 맞는 관계만 계속 표시됨

---

## 문제 해결

### 필터 버튼이 보이지 않는 경우

1. **브라우저 캐시 삭제**
   - 개발자 도구 열기 (F12)
   - 네트워크 탭에서 "Disable cache" 체크
   - 페이지 새로고침 (Cmd+Shift+R 또는 Ctrl+Shift+R)

2. **콘솔 오류 확인**
   - 개발자 도구 콘솔 탭 확인
   - JavaScript 오류가 있는지 확인

3. **서버 재시작**
   ```bash
   # 서버 재시작
   cd scripts
   source venv/bin/activate
   python start_server.py
   ```

### 필터가 동작하지 않는 경우

1. **JavaScript 함수 확인**
   - 콘솔에서 `toggleRelationFilter` 함수가 정의되어 있는지 확인
   - `applyRelationFilters` 함수가 정의되어 있는지 확인

2. **필터 상태 확인**
   - 콘솔에서 `window.relationTypeFilters` 확인
   - 필터 상태가 올바르게 저장되는지 확인

---

## 확인 사항 체크리스트

- [ ] 관계 매칭 탭이 정상적으로 표시됨
- [ ] 필터 버튼 그룹이 각 영역 상단에 표시됨
- [ ] 필터 버튼 클릭 시 활성화 상태가 변경됨
- [ ] 필터 선택 시 관계 카드가 필터링됨
- [ ] "전체" 선택 시 모든 관계가 표시됨
- [ ] 다중 필터 선택이 정상 동작함
- [ ] 필터 상태가 관계 연결/해제 후에도 유지됨
- [ ] 관계 타입별 색상이 구분됨

---

## 참고

- 테스트 중 문제가 발견되면 브라우저 개발자 도구의 콘솔과 네트워크 탭을 확인하세요.
- 서버 로그도 확인하여 API 호출이 정상적으로 이루어지는지 확인하세요.
