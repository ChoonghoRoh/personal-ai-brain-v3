# Phase 7.9.4: 청크 상세 페이지 분리 테스트 시나리오

**작성일**: 2026-01-07  
**대상 버전**: Phase 7.9.4  
**변경 사항**: 청크 상세를 모달에서 별도 페이지로 분리

---

## 🎯 테스트 목표

청크 상세 페이지 분리 기능이 정상적으로 작동하는지 검증합니다:

1. `knowledge.html`에서 청크 클릭 시 상세 페이지로 이동
2. `knowledge-detail.html`에서 URL 파라미터로 청크 정보 로드
3. 상세 페이지의 모든 기능 정상 작동

---

## 📋 테스트 전제 조건

### 환경 준비

1. **서버 실행**

   ```bash
   python scripts/start_server.py
   ```

2. **필수 데이터**

   - 최소 1개 이상의 청크가 데이터베이스에 존재해야 함
   - 청크에 연결된 라벨이 있으면 더 좋음
   - 청크에 연결된 관계가 있으면 더 좋음

3. **브라우저**
   - Chrome, Firefox, Safari 등 최신 브라우저
   - 개발자 도구(F12) 사용 가능

---

## 🧪 테스트 시나리오

### 시나리오 1: 청크 목록 페이지 접근

**목적**: `knowledge.html`이 정상적으로 로드되는지 확인

**절차**:

1. 브라우저에서 `http://localhost:8000/knowledge` 접근
2. 페이지가 정상적으로 로드되는지 확인
3. 청크 목록이 표시되는지 확인

**예상 결과**:

- ✅ 페이지가 정상적으로 로드됨
- ✅ 헤더에 "🧠 Knowledge Studio" 표시
- ✅ 좌측에 라벨 필터 사이드바 표시
- ✅ 우측에 청크 목록 카드들이 표시됨
- ✅ 각 청크 카드에 내용 미리보기, 라벨, 관계 개수 표시

**검증 기준**: ✅ 모든 요소가 정상적으로 표시되어야 함

---

### 시나리오 2: 청크 카드 클릭 → 상세 페이지 이동

**목적**: 청크 카드 클릭 시 상세 페이지로 이동하는지 확인

**절차**:

1. `knowledge.html`에서 임의의 청크 카드 클릭
2. URL이 `/knowledge-detail?id={chunkId}`로 변경되는지 확인
3. 페이지가 전환되는지 확인

**예상 결과**:

- ✅ 클릭 시 즉시 페이지 이동
- ✅ URL이 `/knowledge-detail?id={숫자}` 형식으로 변경됨
- ✅ 브라우저 뒤로가기 버튼으로 목록으로 돌아갈 수 있음

**검증 기준**: ✅ 정상적으로 페이지 이동해야 함

---

### 시나리오 3: 상세 페이지 초기 로드

**목적**: URL 파라미터에서 id를 읽어 청크 정보를 로드하는지 확인

**절차**:

1. `knowledge.html`에서 청크 클릭하여 상세 페이지 이동
2. 페이지 로드 완료 대기
3. 청크 정보가 표시되는지 확인

**예상 결과**:

- ✅ 헤더에 "📄 청크 상세" 표시
- ✅ "← 목록으로" 버튼 표시
- ✅ 청크 메타 정보 표시 (프로젝트명/문서명/청크 번호)
- ✅ 청크 내용 전체 표시
- ✅ 연결된 라벨 목록 표시
- ✅ 로딩 중 메시지가 잠시 표시된 후 내용으로 대체

**검증 기준**: ✅ 모든 정보가 정상적으로 표시되어야 함

---

### 시나리오 4: 상세 페이지 - 라벨 매칭 탭

**목적**: 라벨 매칭 탭이 정상 작동하는지 확인

**절차**:

1. 상세 페이지에서 "💡 라벨 매칭" 탭 확인 (기본 활성화)
2. "추천 키워드" 탭 클릭
3. 추천 키워드 목록이 표시되는지 확인
4. "추천 그룹" 탭 클릭
5. 추천 그룹 목록이 표시되는지 확인
6. 추천 라벨 "추가" 버튼 클릭
7. 라벨이 추가되고 목록이 갱신되는지 확인

**예상 결과**:

- ✅ "라벨 매칭" 탭이 기본 활성화 상태
- ✅ "추천 키워드" 탭 클릭 시 키워드 목록 표시
- ✅ "추천 그룹" 탭 클릭 시 그룹 목록 표시
- ✅ 각 추천 라벨에 신뢰도 표시
- ✅ "추가" 버튼 클릭 시 라벨 추가 성공 메시지
- ✅ 추가 후 청크 정보 자동 갱신

**검증 기준**: ✅ 모든 기능이 정상 작동해야 함

---

### 시나리오 5: 상세 페이지 - 관계 매칭 탭

**목적**: 관계 매칭 탭이 정상 작동하는지 확인

**절차**:

1. 상세 페이지에서 "🔗 관계 매칭" 탭 클릭
2. 3단 레이아웃이 표시되는지 확인 (좌측: 기준 청크, 중앙: 기존 관계, 우측: 추천 관계)
3. 기존 관계 목록 확인
4. 추천 관계 목록 확인
5. 관계 타입 필터 버튼 클릭
6. 필터링이 정상 작동하는지 확인
7. 추천 관계 "연결" 버튼 클릭
8. 관계가 연결되고 목록이 갱신되는지 확인

**예상 결과**:

- ✅ "관계 매칭" 탭 클릭 시 3단 레이아웃 표시
- ✅ 좌측에 기준 청크 카드 표시
- ✅ 중앙에 기존 관계 카드 목록 표시 (관계 타입, 확정 여부)
- ✅ 우측에 추천 관계 카드 목록 표시 (유사도 점수, 공유 라벨)
- ✅ 필터 버튼 클릭 시 해당 타입만 표시
- ✅ "연결" 버튼 클릭 시 관계 연결 성공 메시지
- ✅ 연결 후 청크 정보 자동 갱신

**검증 기준**: ✅ 모든 기능이 정상 작동해야 함

---

### 시나리오 6: 상세 페이지 - 뒤로가기 버튼

**목적**: "← 목록으로" 버튼이 정상 작동하는지 확인

**절차**:

1. 상세 페이지에서 "← 목록으로" 버튼 클릭
2. `knowledge.html`로 돌아가는지 확인
3. 브라우저 뒤로가기 버튼으로도 돌아갈 수 있는지 확인

**예상 결과**:

- ✅ "← 목록으로" 버튼 클릭 시 목록 페이지로 이동
- ✅ 브라우저 뒤로가기 버튼으로도 목록으로 돌아갈 수 있음
- ✅ 목록 페이지에서 이전 필터 상태 유지 (가능한 경우)

**검증 기준**: ✅ 정상적으로 목록으로 돌아가야 함

---

### 시나리오 7: 잘못된 ID 처리

**목적**: 존재하지 않는 청크 ID로 접근 시 오류 처리 확인

**절차**:

1. 브라우저에서 `http://localhost:8000/knowledge-detail?id=999999` 접근
2. 오류 메시지가 표시되는지 확인

**예상 결과**:

- ✅ "청크 ID가 없습니다" 또는 "청크를 찾을 수 없습니다" 메시지 표시
- ✅ "목록으로 돌아가기" 버튼 표시
- ✅ 콘솔에 오류 로그 출력

**검증 기준**: ✅ 적절한 오류 메시지가 표시되어야 함

---

### 시나리오 8: ID 파라미터 없이 접근

**목적**: ID 파라미터 없이 접근 시 오류 처리 확인

**절차**:

1. 브라우저에서 `http://localhost:8000/knowledge-detail` 접근
2. 오류 메시지가 표시되는지 확인

**예상 결과**:

- ✅ "청크 ID가 없습니다" 메시지 표시
- ✅ "목록으로 돌아가기" 버튼 표시

**검증 기준**: ✅ 적절한 오류 메시지가 표시되어야 함

---

### 시나리오 9: 라벨 제거 기능

**목적**: 상세 페이지에서 라벨 제거가 정상 작동하는지 확인

**절차**:

1. 상세 페이지에서 연결된 라벨 중 하나의 "×" 버튼 클릭
2. 확인 메시지 표시 확인
3. 확인 후 라벨 제거 확인
4. 목록이 갱신되는지 확인

**예상 결과**:

- ✅ "이 라벨을 제거하시겠습니까?" 확인 메시지 표시
- ✅ 확인 시 라벨 제거 성공
- ✅ 제거 후 청크 정보 자동 갱신

**검증 기준**: ✅ 정상적으로 라벨이 제거되어야 함

---

### 시나리오 10: 관계 해제 기능

**목적**: 상세 페이지에서 관계 해제가 정상 작동하는지 확인

**절차**:

1. 상세 페이지에서 "관계 매칭" 탭 클릭
2. 기존 관계 카드의 "해제" 버튼 클릭
3. 확인 메시지 표시 확인
4. 확인 후 관계 해제 확인
5. 목록이 갱신되는지 확인

**예상 결과**:

- ✅ "이 관계를 해제하시겠습니까?" 확인 메시지 표시
- ✅ 확정 관계인 경우 더 강한 확인 메시지 표시
- ✅ 확인 시 관계 해제 성공
- ✅ 해제 후 청크 정보 자동 갱신

**검증 기준**: ✅ 정상적으로 관계가 해제되어야 함

---

### 시나리오 11: Reasoning 시작 버튼

**목적**: 상세 페이지에서 Reasoning 시작이 정상 작동하는지 확인

**절차**:

1. 상세 페이지 하단의 "🧠 이 청크로 Reasoning 시작" 버튼 클릭
2. `/reason?seed_chunk={chunkId}`로 이동하는지 확인

**예상 결과**:

- ✅ 버튼 클릭 시 `/reason?seed_chunk={chunkId}`로 이동
- ✅ Reasoning 페이지에서 해당 청크 정보가 자동 입력됨

**검증 기준**: ✅ 정상적으로 Reasoning 페이지로 이동해야 함

---

### 시나리오 12: 브라우저 호환성

**목적**: 다양한 브라우저에서 정상 작동하는지 확인

**절차**:

1. Chrome에서 테스트
2. Firefox에서 테스트
3. Safari에서 테스트 (Mac인 경우)

**예상 결과**:

- ✅ 모든 브라우저에서 페이지 정상 로드
- ✅ 모든 브라우저에서 클릭 이벤트 정상 작동
- ✅ 모든 브라우저에서 스타일 정상 표시

**검증 기준**: ✅ 주요 브라우저에서 정상 작동해야 함

---

## 📝 테스트 체크리스트

### 기본 기능

- [ ] 시나리오 1: 청크 목록 페이지 접근
- [ ] 시나리오 2: 청크 카드 클릭 → 상세 페이지 이동
- [ ] 시나리오 3: 상세 페이지 초기 로드
- [ ] 시나리오 6: 뒤로가기 버튼

### 라벨 관련 기능

- [ ] 시나리오 4: 라벨 매칭 탭
- [ ] 시나리오 9: 라벨 제거 기능

### 관계 관련 기능

- [ ] 시나리오 5: 관계 매칭 탭
- [ ] 시나리오 10: 관계 해제 기능

### 오류 처리

- [ ] 시나리오 7: 잘못된 ID 처리
- [ ] 시나리오 8: ID 파라미터 없이 접근

### 기타 기능

- [ ] 시나리오 11: Reasoning 시작 버튼
- [ ] 시나리오 12: 브라우저 호환성

---

## 🔍 검증 방법

### 수동 검증

1. 브라우저에서 직접 접근하여 UI 확인
2. 개발자 도구(F12)에서 콘솔 오류 확인
3. 네트워크 탭에서 API 호출 확인

### API 검증

```bash
# 청크 상세 API 직접 호출 테스트
curl http://localhost:8000/api/knowledge/chunks/1

# 예상 응답: JSON 형식의 청크 정보
```

---

**작성일**: 2026-01-07  
**최종 업데이트**: 2026-01-07
