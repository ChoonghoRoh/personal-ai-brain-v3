# Task 11-3-4: API 연동·권한·에러 처리

**우선순위**: 11-3 내 4순위  
**예상 작업량**: 1.5일  
**의존성**: 11-3-2·11-3-3 연동 대상  
**상태**: ⏳ 대기

**기반 문서**: [phase-11-3-0-todo-list.md](../phase-11-3-0-todo-list.md)  
**Plan**: [phase-11-3-0-plan.md](../phase-11-3-0-plan.md)  
**작업 순서**: [phase-11-navigation.md](../../phase-11-navigation.md)

---

## 1. 개요

### 1.1 목표

11-2 Admin 설정 API를 호출하는 **클라이언트·연동**을 구현하고, **권한 체크**·**공통 에러·로딩 처리**를 적용한 뒤, **기존 지식 Admin**과 통합 검증(회귀 없음·메뉴 전환·헤더 일관성)을 완료한다.

---

## 2. 파일 변경 계획

### 2.1 신규 생성

| 파일 경로 | 용도 |
|-----------|------|
| `web/public/js/admin/` (또는 전용 모듈) | 11-2 엔드포인트 호출 래퍼(fetch 또는 공통 함수) |

### 2.2 수정

| 파일 경로 | 용도 |
|-----------|------|
| 템플릿·프리셋·RAG·정책·Audit Log 각 화면 JS | CRUD 호출 연결 |
| `web/public/js/admin/admin-common.js` (필요 시) | 에러·로딩·권한 처리 확장 |
| Backend (필요 시) | 설정 관리 경로별 권한 조정 |

---

## 3. 작업 체크리스트 (Done Definition)

### 3.1 11-3-4a: 설정 API 클라이언트·연동

- [ ] 11-2 엔드포인트 호출 래퍼(fetch 또는 공통 함수) 구현
- [ ] 템플릿·프리셋·RAG·정책·Audit Log 각 화면에서 CRUD 호출 연결
- [ ] JS 모듈 정리·문서화

### 3.2 11-3-4b: 권한 체크

- [ ] 설정 관리 메뉴/페이지 접근 시 인증·역할 확인(또는 API 403 시 메시지 처리)
- [ ] 개발 환경 예외 정책 유지
- [ ] 필요 시 Backend 경로 조정

### 3.3 11-3-4c: 공통 에러·로딩 처리

- [ ] API 실패 시 showError 등 기존 UX 유지
- [ ] 로딩 중 표시
- [ ] 낙관적 업데이트 정책(선택)
- [ ] admin-common 또는 전용 모듈 반영

### 3.4 11-3-4d: 기존 Admin과 통합 검증

- [ ] 지식 관리(라벨·그룹·청크·승인·통계) 회귀 없음 확인
- [ ] 설정 관리 ↔ 지식 관리 메뉴 전환·헤더 일관성 확인
- [ ] 체크리스트·문서화

---

## 4. 참조

- [phase-11-3-0-plan.md](../phase-11-3-0-plan.md) §5.4
- [phase-11-2-0-plan.md](../../phase-11-2/phase-11-2-0-plan.md) — Admin 설정 API 범위
- [phase-11-2-5-web-crud-review.md](../../phase-11-2/phase-11-2-5-web-crud-review.md) (작성 후) — Web CRUD 필요 부분·API 매핑
