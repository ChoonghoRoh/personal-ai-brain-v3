# Task 19-1-2: FIX-1 — 공백 분리 로직 개선

- **우선순위**: P0 (최우선)
- **의존성**: 19-1-1 (계층 매칭 완료 후)
- **담당 팀원**: backend-dev
- **상태**: PENDING

## §1 목적

`generate_keywords_via_llm()`의 무조건 공백 분리를 조건부로 변경하여 복합 키워드("머신 러닝", "데이터 분석") 파괴를 방지한다.

## §2 변경 범위

| 파일 | 변경 유형 |
|------|----------|
| `backend/services/reasoning/recommendation_llm.py` L76-90 | 수정 — 분리 로직 개선 |

## §3 구현 상세

**현재 문제**: LLM이 단일 줄로 응답 시 무조건 공백 분리 → "머신 러닝, 데이터 분석" → ["머신", "러닝,", "데이터", "분석"]

**수정 방향**:
1. 1순위: 쉼표(`,`) / 세미콜론(`;`) 분리 시도
2. 2순위: 개행(`\n`) 분리 시도
3. 3순위: 공백 분리는 **각 토큰이 단일 개념어인 경우에만** 수행

**`_is_single_concept_word()` 헬퍼 추가**:
```python
def _is_single_concept_word(token: str) -> bool:
    """토큰이 단일 개념어(한글만 2자+ 또는 영문만 2자+)인지 판별"""
    token = token.strip()
    return bool(re.match(r'^[가-힣]{2,}$', token) or re.match(r'^[a-zA-Z]{2,}$', token))
```

공백 분리 시 모든 토큰이 `_is_single_concept_word()` 통과해야 공백 분리 채택. 아니면 원본 유지.

## §4 완료 기준

- [ ] 쉼표/세미콜론 우선 분리 구현
- [ ] `_is_single_concept_word()` 헬퍼 추가
- [ ] "머신 러닝, 데이터 분석" → ["머신 러닝", "데이터 분석"]
- [ ] "Python\nJava\nC++" → ["Python", "Java", "C++"]
- [ ] "딥러닝 자연어처리 컴퓨터비전" → ["딥러닝", "자연어처리", "컴퓨터비전"] (단일 개념어)
- [ ] 기존 테스트 통과
