# Phase 17 Master Plan — UI/UX 고도화 및 기능 확장

**작성일**: 2026-02-18
**역할**: PM(Project Manager) 마스터 플랜
**선행 조건**: Phase 16 완료 (AI 자동화 고도화 + 500줄 리팩토링).
**기준 문서**:

- [Phase 17 개발 요구사항](../planning/260218-0830-phase17-개발-요구사항.md) — 키워드그룹·검색·AI질의·통계·대시보드 UI/UX 개선 로드맵

---

## 1. 목표 및 범위

### 1.1 Phase 17 목표 (1문장)

**키워드 그룹 3단 레이아웃 리뉴얼을 시작으로, 추천 아키텍처 분리·검색 UX 개선·AI 멀티턴 대화·통계/대시보드 리디자인까지 전 페이지의 UI/UX를 단계적으로 고도화하고, 최종적으로 트리 구조 지식 체계를 도입한다.**

### 1.2 범위 요약

| 블록 | 내용 |
|------|------|
| **키워드 그룹 리뉴얼 (17-1)** | 2단→3단 레이아웃, 모달 제거, 인라인 편집, 페이지네이션, 자동 선택 |
| **추천 아키텍처 분리 (17-2)** | ChunkLabelRecommender + GroupKeywordRecommender 전용 클래스 분리, 공통 유틸 추출, 단위 테스트 |
| **검색 + 추천 문서 개선 (17-3)** | 추천 문서 그리드 카드, 폴더 필터, 정렬, 유사어 파일명 검색 보완 |
| **AI 질의 고도화 (17-4)** | 멀티턴 대화 (session_id), 자동 요약, 대화 기록 그리드, 페이지네이션, 선택 삭제 |
| **로그 통계 개선 (17-5)** | 상단 카드 클릭→하단 필터링, 하단 목록 조회 영역, 통계 테이블 검색/필터 |
| **통계 레이아웃 리뉴얼 (17-6)** | 4단 레이아웃 (요약→분포→트렌드→상세), 서브타이틀, 시스템 상태 분리 |
| **대시보드 리디자인 (17-7)** | 시스템 상태 한줄 요약, 지식 현황, Reasoning 가이드, 카드뷰, 활동 분석 |
| **트리 구조 + AI 추천 (17-8)** | 다단계 트리 UI, 재귀 조회 API, 순환 방지, 드래그&드롭, AI 자동 분류 |

---

## 2. 기준 문서 반영 요약

### 2.1 Phase 17 개발 요구사항 (260218-0830) 반영

| 요구사항 섹션 | 내용 | Phase 17 대응 |
|--------------|------|---------------|
| §2 레이아웃 변경 | 2단→3단 + 모달 제거 + 페이지네이션 | 17-1 |
| §5 추천 아키텍처 분리 | 단일 함수 → 전용 Recommender 클래스 2종 | 17-2 |
| §6 검색 + 추천 문서 | 그리드 카드 + 폴더 필터 + 유사어 보완 | 17-3 |
| §7 AI 질의 고도화 | 멀티턴 + 요약 + 기록 관리 | 17-4 |
| §8 로그 통계 개선 | 카드 클릭 필터 + 목록 조회 | 17-5 |
| §9 통계 리뉴얼 | 4단 레이아웃 + 서브타이틀 | 17-6 |
| §10 대시보드 리디자인 | 전면 레이아웃 재구성 | 17-7 |
| §4 트리 구조 | 다단계 계층 + AI 추천 연결 | 17-8 |

---

## 3. Phase 17 구조

```
Phase 17

17-1   키워드 그룹 3단 레이아웃 리뉴얼
       ├── 17-1-1   [BE] 그룹 목록 페이지네이션 API (page/size + total)
       ├── 17-1-2   [FE] 3단 레이아웃 HTML 구조 (groups.html 전면 개편, 모달 제거)
       ├── 17-1-3   [FE] 상세 패널 인라인 편집 (crud.js 모달→인라인 전환)
       ├── 17-1-4   [FE] 키워드 목록 3단 영역 이동 (matching.js)
       ├── 17-1-5   [FE] 페이지네이션 + 자동 선택 (ui.js)
       └── 17-1-6   [FE] CSS 3단 그리드 (admin-groups.css)

17-2   키워드 추천 아키텍처 분리
       ├── 17-2-1   [BE] ChunkLabelRecommender 전용 클래스 분리
       ├── 17-2-2   [BE] GroupKeywordRecommender 전용 클래스 분리
       ├── 17-2-3   [BE] recommendation_llm.py 공통 유틸 함수 추출
       ├── 17-2-4   [BE] labels_handlers.py 라우터 연동 수정
       └── 17-2-5   [BE] 단위 테스트 23건 작성

17-3   검색 메뉴 + 추천 문서 개선
       ├── 17-3-1   [BE] hybrid_search.py 파일명 ILIKE 검색 추가
       ├── 17-3-2   [FE] 추천 문서 그리드 카드 UI (폴더·크기·수정일 표시)
       ├── 17-3-3   [FE] 추천 문서 조회 영역 (검색·폴더 필터·정렬)
       └── 17-3-4   [FE] search.css 그리드 스타일

17-4   AI 질의 고도화 — 멀티턴 대화 + 기록 관리
       ├── 17-4-1   [BE] 세션 관리 API (POST /sessions, GET /sessions/{id})
       ├── 17-4-2   [BE] 이어서 질문 API (session_id 파라미터 + 이전 요약 주입)
       ├── 17-4-3   [BE] 자동 요약 생성 (답변 완료 후 LLM 요약 → DB 저장)
       ├── 17-4-4   [BE] 페이지네이션 + 다중 삭제 API
       ├── 17-4-5   [FE] 대화 스레드 UI + "이어서 질문하기" 버튼
       └── 17-4-6   [FE] 대화 기록 그리드 목록 + 페이지네이션 + 선택 삭제

17-5   로그 통계 개선
       ├── 17-5-1   [FE] 상단 카드 클릭 → 하단 필터링 연동
       ├── 17-5-2   [FE] 통계 테이블 조회 영역 (검색·필터·정렬)
       └── 17-5-3   [BE] 통계 API 필터링 파라미터 추가

17-6   통계 메뉴 4단 레이아웃 리뉴얼
       ├── 17-6-1   [FE] 4단 레이아웃 HTML 재구성 (요약→분포→트렌드→상세)
       ├── 17-6-2   [FE] 서브타이틀 + 섹션 구분 + 시스템 상태 분리
       └── 17-6-3   [FE] statistics.css 4단 레이아웃 스타일

17-7   대시보드 디자인 리뉴얼
       ├── 17-7-1   [FE] 시스템 상태 한줄 요약 + 지식 현황 카드
       ├── 17-7-2   [FE] Reasoning 가이드 + 기능 바로가기 카드
       ├── 17-7-3   [FE] 최근 업데이트 문서 카드뷰
       ├── 17-7-4   [FE] 활동 분석 차트 (통계 차트 재사용)
       └── 17-7-5   [FE] 삭제 대상 영역 제거 + dashboard.css 리뉴얼

17-8   트리 구조 + AI 추천 연결
       ├── 17-8-1   [BE] 재귀 트리 조회 API (CTE 기반) + 깊이 제한 + 순환 방지
       ├── 17-8-2   [BE] 노드 이동 API + 경로 조회 API
       ├── 17-8-3   [BE] AI 자동 분류 추천 (LLM 트리 분석 → 부모 노드 추천)
       ├── 17-8-4   [FE] 트리뷰 컴포넌트 (접기/펼치기 + 드래그&드롭)
       └── 17-8-5   [FE] Breadcrumb + 검색 시 트리 하이라이트
```

---

## 4. Phase 17-1 — 키워드 그룹 3단 레이아웃 리뉴얼

**목표**: 2단(목록+모달) → 3단(목록+상세+키워드) 레이아웃으로 전환
**선행**: Phase 16 완료

| Task | 도메인 | 내용 | 변경 파일 |
|------|--------|------|----------|
| 17-1-1 | [BE] | 그룹 목록 페이지네이션 API | `labels.py`, `labels_handlers.py` |
| 17-1-2 | [FE] | 3단 레이아웃 HTML 구조 | `groups.html` |
| 17-1-3 | [FE] | 상세 패널 인라인 편집 | `keyword-group-crud.js` |
| 17-1-4 | [FE] | 키워드 목록 3단 영역 이동 | `keyword-group-matching.js` |
| 17-1-5 | [FE] | 페이지네이션 + 자동 선택 | `keyword-group-ui.js` |
| 17-1-6 | [FE] | CSS 3단 그리드 | `admin-groups.css` |

---

## 5. Phase 17-2 — 키워드 추천 아키텍처 분리

**목표**: 단일 함수(recommend_labels_with_llm) → 전용 Recommender 2종 클래스 분리
**선행**: 17-1

| Task | 도메인 | 내용 | 변경 파일 |
|------|--------|------|----------|
| 17-2-1 | [BE] | ChunkLabelRecommender 분리 | `chunk_label_recommender.py` (신규) |
| 17-2-2 | [BE] | GroupKeywordRecommender 분리 | `group_keyword_recommender.py` (신규) |
| 17-2-3 | [BE] | 공통 유틸 함수 추출 | `recommendation_llm.py`, `korean_utils.py` |
| 17-2-4 | [BE] | 라우터 연동 수정 | `labels_handlers.py` |
| 17-2-5 | [BE] | 단위 테스트 23건 | `test_keyword_recommenders.py` (신규) |

---

## 6. Phase 17-3 — 검색 메뉴 + 추천 문서 개선

**목표**: 추천 문서 영역 그리드 카드화 + 조회 기능 + 파일명 검색 보완
**선행**: 독립 (17-1/17-2와 병행 가능)

| Task | 도메인 | 내용 | 변경 파일 |
|------|--------|------|----------|
| 17-3-1 | [BE] | 파일명 ILIKE 검색 추가 | `hybrid_search.py` |
| 17-3-2 | [FE] | 추천 문서 그리드 카드 UI | `search.html`, `search.js` |
| 17-3-3 | [FE] | 조회 영역 (검색·폴더 필터·정렬) | `search.js` |
| 17-3-4 | [FE] | 그리드 스타일 | `search.css` |

---

## 7. Phase 17-4 — AI 질의 고도화

**목표**: 멀티턴 대화(session_id) + 자동 요약 + 대화 기록 그리드 관리
**선행**: 17-3

| Task | 도메인 | 내용 | 변경 파일 |
|------|--------|------|----------|
| 17-4-1 | [BE] | 세션 관리 API | `reason_store.py` |
| 17-4-2 | [BE] | 이어서 질문 API + 요약 주입 | `reason_stream.py`, `stream_executor.py` |
| 17-4-3 | [BE] | 자동 요약 생성 | `stream_executor.py` |
| 17-4-4 | [BE] | 페이지네이션 + 다중 삭제 API | `reason_store.py` |
| 17-4-5 | [FE] | 대화 스레드 UI + 이어서 질문 | `reason.html`, `reason-control.js` |
| 17-4-6 | [FE] | 기록 그리드 + 페이지네이션 + 선택 삭제 | `reason-render.js`, `reason.html` |

---

## 8. Phase 17-5 — 로그 통계 개선

**목표**: 상단 카드 클릭→하단 필터링 + 통계 테이블 조회 영역
**선행**: 독립 (17-4와 병행 가능)

| Task | 도메인 | 내용 | 변경 파일 |
|------|--------|------|----------|
| 17-5-1 | [FE] | 카드 클릭→필터링 연동 | `statistics.js`, `statistics.html` |
| 17-5-2 | [FE] | 테이블 조회 영역 | `statistics.js`, `statistics.css` |
| 17-5-3 | [BE] | 통계 API 필터 파라미터 | `statistics.py`, `statistics_service.py` |

---

## 9. Phase 17-6 — 통계 메뉴 4단 레이아웃 리뉴얼

**목표**: 혼재 레이아웃 → 4단 정리 (요약→분포→트렌드→상세)
**선행**: 17-5

| Task | 도메인 | 내용 | 변경 파일 |
|------|--------|------|----------|
| 17-6-1 | [FE] | HTML 4단 레이아웃 재구성 | `statistics.html` |
| 17-6-2 | [FE] | 서브타이틀 + 시스템 상태 분리 | `statistics.js`, `statistics-charts.js` |
| 17-6-3 | [FE] | CSS 4단 스타일 | `statistics.css` |

---

## 10. Phase 17-7 — 대시보드 디자인 리뉴얼

**목표**: 대시보드 전면 재구성 — 시스템 상태 한줄 요약, Reasoning 가이드, 카드뷰
**선행**: 17-6 (통계 차트 재사용 의존)

| Task | 도메인 | 내용 | 변경 파일 |
|------|--------|------|----------|
| 17-7-1 | [FE] | 시스템 상태 한줄 + 지식 현황 | `dashboard.html`, `dashboard.js` |
| 17-7-2 | [FE] | Reasoning 가이드 + 바로가기 | `dashboard.html` |
| 17-7-3 | [FE] | 최근 문서 카드뷰 | `dashboard.js`, `dashboard-api.js` |
| 17-7-4 | [FE] | 활동 분석 차트 재사용 | `dashboard.js`, `statistics-charts.js` |
| 17-7-5 | [FE] | 삭제 영역 제거 + CSS 리뉴얼 | `dashboard.html`, `dashboard.css` |

---

## 11. Phase 17-8 — 트리 구조 + AI 추천 연결

**목표**: 플랫 1단계 → 다단계 트리 구조 확장 + AI 자동 분류
**선행**: 17-2 (추천 아키텍처 분리 완료 후)

| Task | 도메인 | 내용 | 변경 파일 |
|------|--------|------|----------|
| 17-8-1 | [BE] | 재귀 트리 조회 API + 깊이 제한 + 순환 방지 | `labels.py`, `labels_handlers.py` |
| 17-8-2 | [BE] | 노드 이동 + 경로 조회 API | `labels.py` |
| 17-8-3 | [BE] | AI 자동 분류 추천 | `group_keyword_recommender.py` |
| 17-8-4 | [FE] | 트리뷰 컴포넌트 + 드래그&드롭 | `groups.html`, 신규 JS |
| 17-8-5 | [FE] | Breadcrumb + 트리 하이라이트 | `groups.html`, CSS |

---

## 12. 의존성 및 순서

```
17-1 (키워드 그룹 3단 레이아웃)     ← 독립, 최우선
  ↓
17-2 (추천 아키텍처 분리)           ← 17-1 완료 후
  ↓
17-3 (검색 + 추천 문서)            ← 독립 (17-1/17-2와 병행 가능)
  ↓
17-4 (AI 질의 고도화)              ← 17-3 완료 후
  ↓
17-5 (로그 통계 개선)              ← 독립 (17-4와 병행 가능)
  ↓
17-6 (통계 레이아웃 리뉴얼)          ← 17-5 완료 후
  ↓
17-7 (대시보드 리디자인)            ← 17-6 완료 후 (차트 재사용)
  ↓
17-8 (트리 구조 + AI 추천)         ← 17-2 완료 후 (가장 큰 구조 변경)
```

### 마일스톤

- **M1**: 17-1 + 17-2 완료 (키워드 그룹 UI + 추천 아키텍처 안정화)
- **M2**: 17-3 완료 (검색 UX 개선)
- **M3**: 17-4 완료 (AI 멀티턴 대화)
- **M4**: 17-5 + 17-6 + 17-7 완료 (통계·대시보드 리디자인)
- **M5**: 17-8 완료 (트리 구조 도입)

---

## 13. 성공 기준

- [ ] 키워드 그룹 3단 레이아웃 정상 동작 (17-1)
- [ ] 추천 아키텍처 분리 + 단위 테스트 23건 통과 (17-2)
- [ ] 추천 문서 그리드 카드 + 폴더 필터 동작 (17-3)
- [ ] 멀티턴 대화 세션 유지 + 자동 요약 (17-4)
- [ ] 통계 카드 클릭→필터링 연동 (17-5)
- [ ] 통계 4단 레이아웃 + 서브타이틀 (17-6)
- [ ] 대시보드 리뉴얼 레이아웃 정상 표시 (17-7)
- [ ] 트리 구조 재귀 조회 + AI 자동 분류 (17-8)

---

## 14. 참고 문서

- [Phase 17 개발 요구사항](../planning/260218-0830-phase17-개발-요구사항.md)
- [Phase 16 Master Plan](phase-16-master-plan.md) — 선행 Phase
- [SSOT 4th Workflow](../SSOT/renewal/iterations/4th/3-workflow.md) — Phase Chain 프로토콜
