# Webtest — MCP Cursor Reasoning Lab (/reason) 시나리오

**대상**: Reasoning Lab (/reason) 전용 MCP 웹 브라우저 가상 테스트
**전제**: Base URL `http://localhost:8001`, 백엔드·웹 서버 기동
**도구**: MCP cursor-ide-browser 또는 cursor-browser-extension
**형식**: 시나리오 번호 | 시나리오 제목 | 조치 | 기대 결과 | 검증 방법

---

## 1. 진입·네비게이션 (10+ 시나리오)

| #      | 시나리오 제목                | 조치                                                                                 | 기대 결과                                      | 검증 방법                                          |
| ------ | ---------------------------- | ------------------------------------------------------------------------------------ | ---------------------------------------------- | -------------------------------------------------- |
| **1**  | /reason 직접 접속            | 브라우저에서 `http://localhost:8001/reason` 이동                                     | Reasoning Lab 페이지 로드, 질문 입력 영역 표시 | URL이 /reason, DOM에 #question 또는 질문 입력 요소 |
| **2**  | 대시보드에서 Reasoning 링크  | `http://localhost:8001/dashboard` 접속 후 "Reasoning" 또는 "Reasoning Lab" 링크 클릭 | /reason으로 이동                               | URL이 /reason                                      |
| **3**  | 네비게이션 바 Reasoning 메뉴 | 상단/사이드 네비에서 Reasoning 항목 클릭                                             | /reason 페이지 표시                            | URL 및 페이지 제목/헤더 확인                       |
| **4**  | /reason 접속 시 HTML 제목    | /reason 로드 후 document.title 또는 헤더 확인                                        | "Reasoning" 또는 "Reasoning Lab" 관련 제목     | title 또는 h1 텍스트                               |
| **5**  | 새 탭에서 /reason 열기       | 새 탭에서 localhost:8001/reason 열기                                                 | 독립 탭에서 동일 페이지                        | 탭 URL 및 콘텐츠                                   |
| **6**  | URL 파라미터 chunk_id        | `http://localhost:8001/reason?chunk_id=1` 접속                                       | 시드 청크 로드 시도(해당 기능 있을 경우)       | loadSeedChunk 호출 또는 질문/필터 반영             |
| **7**  | URL 파라미터 mode            | `http://localhost:8001/reason?mode=design_explain` 접속                              | 모드 선택이 design_explain으로 설정될 수 있음  | 모드 선택 UI 값                                    |
| **8**  | 루트에서 /reason 이동        | `http://localhost:8001/` 접속 후 /reason 링크 클릭                                   | /reason 도달                                   | URL 및 폼 존재                                     |
| **9**  | 뒤로가기 후 재진입           | /reason → 다른 페이지 → 브라우저 뒤로가기                                            | /reason 복귀, 상태 유지 또는 초기화            | URL /reason, 폼 표시                               |
| **10** | 직접 URL 입력 후 엔터        | 주소창에 localhost:8001/reason 입력 후 엔터                                          | /reason 로드                                   | 200 응답, 페이지 렌더                              |
| **11** | /reason 하위 경로            | `/reason/extra` 접속                                                                 | 404 또는 /reason으로 리다이렉트(구현에 따름)   | HTTP 상태 또는 리다이렉트 URL                      |

---

## 2. 질문 입력·모드 선택 (10+ 시나리오)

| #      | 시나리오 제목            | 조치                                                        | 기대 결과                              | 검증 방법                          |
| ------ | ------------------------ | ----------------------------------------------------------- | -------------------------------------- | ---------------------------------- |
| **1**  | 질문 텍스트 입력         | #question(또는 질문 textarea)에 "시스템 아키텍처는?" 입력   | 입력값이 필드에 표시                   | input/textarea value               |
| **2**  | 빈 질문 유지             | 질문 필드 비운 채 실행 버튼만 클릭                          | 유효성 처리 또는 비활성화(구현에 따름) | 4xx 응답 또는 버튼 disabled/메시지 |
| **3**  | 긴 질문 입력             | 500자 이상 텍스트 입력                                      | 잘림 또는 스크롤(구현에 따름)          | value 길이 또는 maxlength          |
| **4**  | design_explain 모드 선택 | 모드 선택에서 "Design Explain" 또는 design_explain 선택     | 해당 모드가 선택됨                     | 선택된 라디오/셀렉트 값            |
| **5**  | risk_review 모드 선택    | "Risk Review" 또는 risk_review 선택                         | 해당 모드 선택                         | UI 값 risk_review                  |
| **6**  | next_steps 모드 선택     | "Next Steps" 또는 next_steps 선택                           | 해당 모드 선택                         | UI 값 next_steps                   |
| **7**  | history_trace 모드 선택  | "History Trace" 또는 history_trace 선택                     | 해당 모드 선택                         | UI 값 history_trace                |
| **8**  | 모델 선택 변경           | 모델 드롭다운에서 다른 모델 선택(예: qwen2.5:7b)            | 선택값 반영                            | model 필드 값                      |
| **9**  | 프로젝트 필터 선택       | 프로젝트 다중 선택에서 1개 이상 선택                        | project_ids 반영                       | 필터 UI 선택 상태                  |
| **10** | 라벨 필터 선택           | 라벨 다중 선택에서 1개 이상 선택                            | label_ids 반영                         | 필터 UI 선택 상태                  |
| **11** | 질문 + 모드 + 필터 조합  | 질문 입력, design_explain 선택, 프로젝트 1개 선택 후 스냅샷 | 세 값 모두 폼에 반영                   | request payload 또는 폼 상태       |
| **12** | 모드 설명 툴팁/텍스트    | 각 모드 선택 시 설명 영역 확인                              | 모드별 설명 문구 표시                  | modeDescriptions 또는 설명 요소    |

---

## 3. 실행·진행·취소 (10+ 시나리오)

| #      | 시나리오 제목          | 조치                                 | 기대 결과                                                     | 검증 방법                                 |
| ------ | ---------------------- | ------------------------------------ | ------------------------------------------------------------- | ----------------------------------------- |
| **1**  | 실행 버튼 DOM 존재     | /reason 로드 후                      | #submit-btn 또는 "Reasoning 실행" 버튼 존재                   | snapshot에 submit 버튼                    |
| **2**  | 실행 클릭 시 로딩 표시 | 질문 입력 후 실행 버튼 클릭          | #results-loading 또는 로딩 영역 표시, 버튼 disabled           | results-loading 표시 또는 submit disabled |
| **3**  | 진행 단계 컨테이너     | 실행 직후 스냅샷                     | #progress-stages 또는 .progress-stage 존재                    | progress 관련 노드                        |
| **4**  | 진행 메시지 순차 변경  | 실행 후 2~15초 구간 스냅샷 2~3회     | "질문 분석", "검색", "확장", "AI 추론", "추천" 등 단계 메시지 | #progress-message 텍스트 변경             |
| **5**  | 경과 시간 증가         | 실행 중 5초 간격 2회 스냅샷          | #reasoning-elapsed-text의 N초 값 증가                         | elapsed 텍스트 숫자 비교                  |
| **6**  | ETA 표시               | 실행 전 또는 로딩 중                 | #eta-display 또는 #eta-text에 "예상 소요 시간" 등             | eta 요소 텍스트                           |
| **7**  | 취소 버튼 실행 중 노출 | 실행 후 1~2초 내 스냅샷              | #cancel-btn 보임                                              | cancel-btn visible                        |
| **8**  | 취소 버튼 클릭         | 실행 중 #cancel-btn 클릭             | 취소 처리, 로딩 해제 또는 "취소됨" 메시지                     | progress-message 또는 API 취소            |
| **9**  | 취소 후 실행 버튼 복구 | 취소 완료 후                         | submit 버튼 다시 활성화, "Reasoning 실행" 등                  | #submit-btn disabled 해제                 |
| **10** | 취소 후 재실행         | 취소 후 동일/다른 질문으로 다시 실행 | 두 번째 실행 시 로딩/진행 정상 표시                           | progress 및 결과 영역                     |
| **11** | 진행률 바 증가         | 실행 중 스냅샷                       | #progress-bar width 또는 퍼센트 증가                          | progress-bar style                        |
| **12** | 완료 후 로딩 해제      | 결과 수신 후                         | #results-loading 숨김, #results-content 표시                  | results-content 표시                      |

---

## 4. 결과 표시 (10+ 시나리오)

| #      | 시나리오 제목         | 조치                                     | 기대 결과                                       | 검증 방법                            |
| ------ | --------------------- | ---------------------------------------- | ----------------------------------------------- | ------------------------------------ |
| **1**  | 결과 영역 DOM         | 추론 완료 후                             | #results-content 또는 결과 컨테이너 표시        | snapshot에 results 영역              |
| **2**  | Summary 표시          | 결과 로드 후                             | 문서/청크/관계 개수 요약 텍스트                 | summary 블록 텍스트                  |
| **3**  | Conclusion 표시       | 결과 로드 후                             | LLM 답변(결론) 블록 표시                        | conclusion 또는 answer 영역          |
| **4**  | Context 탭 존재       | 결과 영역 내                             | "Used Context" 또는 청크/문서 탭 존재           | 탭 버튼 또는 탭 패널                 |
| **5**  | Context 탭 전환       | Context 탭 클릭                          | 청크/문서 목록 또는 상세 표시                   | 탭 내용 변경                         |
| **6**  | Reasoning Steps 표시  | 결과 내 "Reasoning Steps" 또는 단계 로그 | 단계별 프로세스 로그 표시                       | #reasoning-steps 또는 동일 역할 요소 |
| **7**  | design_explain 시각화 | design_explain 모드로 실행 후            | Mermaid 또는 설계 설명 시각화 영역              | mode viz 컨테이너 내용               |
| **8**  | risk_review 시각화    | risk_review 모드로 실행 후               | 위험/매트릭스 관련 시각화                       | risk viz 영역                        |
| **9**  | next_steps 시각화     | next_steps 모드로 실행 후                | 다음 단계/로드맵 시각화                         | next_steps viz 영역                  |
| **10** | history_trace 시각화  | history_trace 모드로 실행 후             | 히스토리/타임라인 시각화                        | history viz 영역                     |
| **11** | 빈 컨텍스트 시 메시지 | 관련 지식 없을 때(또는 모의)             | "관련 지식이 없습니다" 또는 안내 메시지         | conclusion 또는 메시지 영역          |
| **12** | 결과 스크롤           | 결과가 길 때 스크롤                      | 스크롤 가능, conclusion·steps·context 접근 가능 | scrollHeight 및 스크롤 동작          |

---

## 5. 추천 (10+ 시나리오)

| #      | 시나리오 제목          | 조치                          | 기대 결과                                                  | 검증 방법                              |
| ------ | ---------------------- | ----------------------------- | ---------------------------------------------------------- | -------------------------------------- |
| **1**  | 추천 섹션 DOM          | 추론 완료 후                  | 추천 영역(related chunks, questions, labels, explore) 존재 | recommendations 섹션 노드              |
| **2**  | 관련 청크 목록         | 결과 로드 후                  | "관련 청크" 또는 related_chunks 목록/카드 표시             | related chunks 영역                    |
| **3**  | 관련 청크 클릭         | 관련 청크 항목 클릭(구현 시)  | 상세 보기 또는 질문에 반영                                 | 클릭 핸들러 동작                       |
| **4**  | 샘플 질문 표시         | 결과 내 "샘플 질문" 패널      | sample_questions 목록 표시                                 | sample questions 영역                  |
| **5**  | 샘플 질문 클릭         | 샘플 질문 항목 클릭           | 질문 필드에 해당 질문 채워짐 또는 실행(구현에 따름)        | #question value 또는 실행              |
| **6**  | 라벨 추천 표시         | 결과 내 "추천 라벨"           | labels 목록 표시                                           | labels 영역                            |
| **7**  | 탐색 제안 표시         | "탐색 방향" 또는 explore 패널 | explore 제안 목록                                          | explore 영역                           |
| **8**  | 추천 없을 때           | 컨텍스트/결과 없을 때         | 추천 영역 숨김 또는 "추천 없음" 메시지                     | hideRecommendationsSection 또는 메시지 |
| **9**  | 추천 4패널 구분        | 스냅샷                        | 청크·질문·라벨·탐색 4개 구역 구분 가능                     | 4개 패널 또는 헤더                     |
| **10** | 추천 스크롤            | 추천 항목 다수 시             | 스크롤 가능 또는 접기/펼치기                               | overflow 또는 아코디언                 |
| **11** | 연속 실행 시 추천 갱신 | 다른 질문으로 재실행 후       | 새 결과에 맞는 추천 표시                                   | 추천 내용이 새 answer와 연관           |

---

## 6. 저장·공유·에러 (10+ 시나리오)

| #      | 시나리오 제목            | 조치                                              | 기대 결과                                         | 검증 방법                             |
| ------ | ------------------------ | ------------------------------------------------- | ------------------------------------------------- | ------------------------------------- |
| **1**  | 결과 저장 버튼           | 결과 표시 후 "저장" 버튼 존재 시 클릭             | POST /api/reasoning-results 호출, 성공 시 안내    | 네트워크 요청 및 201 또는 메시지      |
| **2**  | 저장된 결과 목록         | "저장된 결과" 또는 이력 페이지 이동(구현 시)      | GET /api/reasoning-results 목록 표시              | 목록 UI 또는 API 응답                 |
| **3**  | 저장된 결과 조회         | 목록에서 항목 클릭(구현 시)                       | GET /api/reasoning-results/{id}, 상세 표시        | 상세 영역에 question/answer           |
| **4**  | 공유 URL(기능 있을 경우) | "공유" 버튼 클릭                                  | 공유 URL 복사 또는 생성                           | clipboard 또는 URL 표시               |
| **5**  | API 오류 시 메시지       | 백엔드 중지 또는 500 유도 후 실행                 | 에러 메시지 또는 "일시적 오류" 등 표시            | #error 또는 showReasoningError 영역   |
| **6**  | 네트워크 끊김            | 오프라인 후 실행                                  | 타임아웃 또는 네트워크 에러 메시지                | 에러 텍스트                           |
| **7**  | LLM 실패 폴백            | Ollama 중지 등으로 LLM 실패 시                    | 템플릿 폴백 답변 또는 "생성 실패" 메시지          | conclusion 내용                       |
| **8**  | 빈 질문 제출             | 질문 비우고 실행                                  | 4xx 또는 클라이언트 유효성 메시지                 | 응답 코드 또는 alert/메시지           |
| **9**  | 취소 시 에러 없음        | 취소 후 스냅샷                                    | 에러 배너 없음, "취소됨" 등만 표시                | 에러 영역 비표시                      |
| **10** | 세션/저장 후 재접속      | 저장 후 브라우저 새로고침, 목록에서 열기(구현 시) | 저장된 결과 로드                                  | GET /api/reasoning-results/{id} 및 UI |
| **11** | 결과 삭제(구현 시)       | 저장 목록에서 삭제 클릭                           | DELETE /api/reasoning-results/{id}, 목록에서 제거 | 204/200 및 DOM 업데이트               |

---

## MCP 실행 체크리스트 (권장 순서)

1. **진입·네비게이션**: 시나리오 1→…→11
2. **질문 입력·모드 선택**: 시나리오 1→…→12
3. **실행·진행·취소**: 시나리오 1→…→12
4. **결과 표시**: 시나리오 1→…→12
5. **추천**: 시나리오 1→…→11
6. **저장·공유·에러**: 시나리오 1→…→11

**총 69개 시나리오** — MCP 브라우저로 각 조치 수행 후 기대 결과 확인하여 통과/실패 기록.

---

## 결과 기록 템플릿

| 항목                   | 시나리오 수 | 통과 | 비고 |
| ---------------------- | ----------- | ---- | ---- |
| 1. 진입·네비게이션     | 11          | ?/11 |      |
| 2. 질문 입력·모드 선택 | 12          | ?/12 |      |
| 3. 실행·진행·취소      | 12          | ?/12 |      |
| 4. 결과 표시           | 12          | ?/12 |      |
| 5. 추천                | 11          | ?/11 |      |
| 6. 저장·공유·에러      | 11          | ?/11 |      |
| **합계**               | **69**      | ?/69 |      |
