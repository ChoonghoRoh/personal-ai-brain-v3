# 🔍 Multi-Agent SSOT: 워크플로우 및 검증 기준

**작성일**: 2026-02-15
**역할**: GitHub Copilot (QA & Security Analyst) - 주도
**협업**: Cursor (Leader), Claude (Backend), Gemini (Frontend)
**목적**: 작업 흐름, 상태 관리, 검증 절차, 에러 처리를 모든 에이전트가 공유

---

## 1. QA 워크플로우 개요

### 1.1 전체 작업 흐름

```
┌──────────────────────────────────────────────────────────────┐
│                     Phase 시작                                │
│              (Cursor Leader가 Phase 정의)                     │
└────────────────────┬─────────────────────────────────────────┘
                     │
                     ▼
┌──────────────────────────────────────────────────────────────┐
│                   Task 할당                                   │
│         Claude (Backend) / Gemini (Frontend)                 │
└────────────────────┬─────────────────────────────────────────┘
                     │
                     ▼
┌──────────────────────────────────────────────────────────────┐
│                 코드 구현 (IN_PROGRESS)                       │
│         Claude/Gemini가 기능 구현                             │
└────────────────────┬─────────────────────────────────────────┘
                     │
                     ▼
┌──────────────────────────────────────────────────────────────┐
│           리뷰 요청 (REVIEW_READY)                            │
│         Claude/Gemini → Copilot에게 리뷰 요청                 │
└────────────────────┬─────────────────────────────────────────┘
                     │
                     ▼
┌──────────────────────────────────────────────────────────────┐
│              Copilot 코드 리뷰                                │
│   - 코드 품질 점검 (타입 힌트, 독스트링, 컨벤션)             │
│   - 보안 점검 (SQL Injection, XSS, CSRF)                     │
│   - 엣지 케이스 확인                                          │
└──────────┬──────────────────────┬────────────────────────────┘
           │                      │
        통과 ✅                  실패 ❌
           │                      │
           ▼                      ▼
┌─────────────────────┐   ┌──────────────────────────────────┐
│ APPROVED            │   │ REVISE (수정 필요)                │
│ 다음 단계: 테스트    │   │ - 구체적인 수정안 제시            │
└──────────┬──────────┘   │ - 재작업 요구                     │
           │              └──────────┬───────────────────────┘
           │                         │
           │                         ▼
           │              ┌──────────────────────────────────┐
           │              │ 수정 후 재검토 (IN_PROGRESS)      │
           │              └──────────┬───────────────────────┘
           │                         │
           │←────────────────────────┘
           │
           ▼
┌──────────────────────────────────────────────────────────────┐
│              테스트 수행 (TESTING)                            │
│   1. Unit Test (pytest)                                      │
│   2. Integration Test (pytest)                               │
│   3. E2E Test (Playwright)                                   │
│   4. 보안 테스트 (체크리스트)                                 │
└──────────┬──────────────────────┬────────────────────────────┘
           │                      │
        통과 ✅                  실패 ❌
           │                      │
           ▼                      ▼
┌─────────────────────┐   ┌──────────────────────────────────┐
│ DONE                │   │ ERROR (테스트 실패)               │
│ Task 완료           │   │ - 실패 원인 분석                  │
└─────────────────────┘   │ - 재작업 요구 (REVISE)            │
                          └──────────┬───────────────────────┘
                                     │
                                     ▼
                          ┌──────────────────────────────────┐
                          │ Critical Bug?                    │
                          └──────────┬───────┬───────────────┘
                                  YES │     │ NO
                                     │     │
                                     ▼     ▼
                          ┌──────────────┐ ┌───────────────┐
                          │ REWIND       │ │ REVISE        │
                          │ (리와인드)    │ │ (수정 후 재테스트)│
                          └──────────────┘ └───────────────┘
```

### 1.2 워크플로우 상태 정의

| 상태          | 코드         | 정의                 | 진입 조건      | 퇴출 조건          | 담당          |
| ------------- | ------------ | -------------------- | -------------- | ------------------ | ------------- |
| **미시작**    | NOT_STARTED  | 작업 할당 전         | Task 생성      | 할당 완료          | Cursor        |
| **진행 중**   | IN_PROGRESS  | 코드 작성 중         | 할당 완료      | 리뷰 요청          | Claude/Gemini |
| **리뷰 대기** | REVIEW_READY | 리뷰 요청 상태       | 구현 완료      | 승인/거부          | Copilot       |
| **승인**      | APPROVED     | 리뷰 통과            | 코드 리뷰 통과 | 테스트 시작        | Copilot       |
| **수정 필요** | REVISE       | 리뷰 거부, 수정 요구 | 결함 발견      | 재구현 완료        | Claude/Gemini |
| **테스트 중** | TESTING      | 테스트 진행          | 승인 완료      | 테스트 통과/실패   | Copilot       |
| **에러**      | ERROR        | 테스트 실패          | 테스트 실패    | 재작업 or 리와인드 | Copilot       |
| **완료**      | DONE         | Task 완료            | 테스트 통과    | -                  | -             |
| **리와인드**  | REWIND       | 이전 상태 복귀       | Critical Bug   | 재작업 시작        | Cursor        |

---

## 2. 작업 상태 관리

### 2.1 상태 전환 규칙

#### 정상 흐름

```
NOT_STARTED → IN_PROGRESS → REVIEW_READY → APPROVED → TESTING → DONE
```

#### 수정 필요 흐름

```
REVIEW_READY → REVISE → IN_PROGRESS → REVIEW_READY → APPROVED → ...
```

#### 테스트 실패 흐름

```
TESTING → ERROR → REVISE → IN_PROGRESS → REVIEW_READY → APPROVED → TESTING → ...
```

#### Critical Bug 흐름

```
TESTING → ERROR → REWIND → (이전 안정 상태) → IN_PROGRESS → ...
```

### 2.2 상태 전환 조건 상세

#### NOT_STARTED → IN_PROGRESS

| 조건     | 설명                                   |
| -------- | -------------------------------------- |
| **전제** | Task 문서 작성 완료                    |
| **할당** | Claude 또는 Gemini에게 할당            |
| **시작** | 코드 작성 시작                         |
| **문서** | Task 문서에 "Status: IN_PROGRESS" 표시 |

#### IN_PROGRESS → REVIEW_READY

| 조건            | 설명                                          |
| --------------- | --------------------------------------------- |
| **구현 완료**   | 기능 구현 완료                                |
| **자가 테스트** | 로컬에서 기본 동작 확인                       |
| **커밋**        | Git commit 완료                               |
| **요청**        | Copilot에게 리뷰 요청 (PR 또는 문서 업데이트) |

#### REVIEW_READY → APPROVED

| 조건               | 설명                                   |
| ------------------ | -------------------------------------- |
| **코드 리뷰 통과** | 코드 품질 기준 충족                    |
| **보안 점검 통과** | 보안 취약점 없음                       |
| **문서 확인**      | 독스트링, JSDoc 작성 완료              |
| **승인 기록**      | Task 문서에 "Approved by Copilot" 표시 |

#### REVIEW_READY → REVISE

| 조건            | 설명                              |
| --------------- | --------------------------------- |
| **결함 발견**   | 버그, 보안 취약점, 코드 품질 문제 |
| **수정안 제시** | 구체적인 수정 방법 제시           |
| **재작업 요구** | Claude/Gemini에게 재작업 요청     |
| **문서 기록**   | 결함 내용 및 수정안 문서화        |

#### APPROVED → TESTING

| 조건            | 설명                      |
| --------------- | ------------------------- |
| **리뷰 통과**   | 코드 리뷰 승인 완료       |
| **테스트 준비** | 테스트 환경 설정 완료     |
| **테스트 계획** | 테스트 시나리오 작성 완료 |

#### TESTING → DONE

| 조건                 | 설명                          |
| -------------------- | ----------------------------- |
| **모든 테스트 통과** | Unit + Integration + E2E 통과 |
| **보안 테스트 통과** | 보안 체크리스트 완료          |
| **문서 작성**        | 테스트 결과 보고서 작성       |
| **배포 판정**        | 배포 가능 여부 확정           |

#### TESTING → ERROR

| 조건            | 설명                           |
| --------------- | ------------------------------ |
| **테스트 실패** | 하나 이상의 테스트 실패        |
| **원인 분석**   | 실패 원인 파악                 |
| **심각도 판정** | Critical / High / Medium / Low |
| **조치 결정**   | REVISE 또는 REWIND             |

---

## 3. 리뷰 체크리스트

### 3.1 Backend 코드 리뷰

#### 기능 구현 (30점)

- [ ] **요구사항 충족** (10점)
  - [ ] API 명세 일치
  - [ ] 비즈니스 로직 정확성
  - [ ] 에러 케이스 처리

- [ ] **API 설계** (10점)
  - [ ] RESTful 원칙 준수
  - [ ] 입력 검증 (Pydantic)
  - [ ] 응답 형식 일관성

- [ ] **데이터 처리** (10점)
  - [ ] DB 트랜잭션 관리
  - [ ] 외래키 제약조건 준수
  - [ ] 데이터 무결성 보장

#### 코드 품질 (30점)

- [ ] **가독성** (10점)
  - [ ] 함수명·변수명 명확성
  - [ ] 함수 길이 적절 (<50줄)
  - [ ] 중복 코드 제거

- [ ] **타입 힌트** (10점)
  - [ ] 모든 함수 파라미터
  - [ ] 반환값 타입
  - [ ] 복잡한 타입 (List, Dict, Optional 등)

- [ ] **독스트링** (10점)
  - [ ] 함수 설명
  - [ ] 파라미터 설명
  - [ ] 반환값 설명
  - [ ] 예외 설명

#### 보안 (30점)

- [ ] **입력 검증** (10점)
  - [ ] Pydantic 모델 사용
  - [ ] 경계값 검증 (ge, le)
  - [ ] 필수 필드 확인

- [ ] **SQL Injection** (10점)
  - [ ] SQLAlchemy ORM 사용
  - [ ] 원시 SQL 미사용
  - [ ] 파라미터화 쿼리

- [ ] **권한 검증** (10점)
  - [ ] 인증 확인 (Depends)
  - [ ] 권한 확인 (역할 기반)
  - [ ] 리소스 접근 권한

#### 테스트 (10점)

- [ ] **Unit Test** (5점)
  - [ ] 정상 케이스
  - [ ] 엣지 케이스
  - [ ] 예외 케이스

- [ ] **문서** (5점)
  - [ ] Task 문서 업데이트
  - [ ] API 문서 (Swagger)
  - [ ] README 업데이트 (필요 시)

**총점: 100점 / 통과 기준: 70점 이상**

### 3.2 Frontend 코드 리뷰

#### 기능 구현 (30점)

- [ ] **UI/UX** (10점)
  - [ ] 요구사항 충족
  - [ ] 반응형 디자인
  - [ ] 사용자 피드백 (로딩, 성공, 에러)

- [ ] **API 연동** (10점)
  - [ ] fetch 사용 (async/await)
  - [ ] 에러 처리 (try-catch)
  - [ ] 응답 데이터 검증

- [ ] **상태 관리** (10점)
  - [ ] 로컬 상태 관리
  - [ ] 세션 스토리지 활용
  - [ ] 상태 동기화

#### 코드 품질 (30점)

- [ ] **모듈화** (10점)
  - [ ] ESM 모듈 사용
  - [ ] 전역 객체 최소화
  - [ ] 재사용 가능한 함수

- [ ] **JSDoc** (10점)
  - [ ] 모든 export 함수
  - [ ] 파라미터 설명
  - [ ] 반환값 설명

- [ ] **코드 스타일** (10점)
  - [ ] Prettier 적용
  - [ ] 일관된 네이밍
  - [ ] 주석 적절

#### 보안 (30점)

- [ ] **XSS 방어** (15점)
  - [ ] innerHTML 최소화
  - [ ] DOMPurify 사용
  - [ ] textContent 우선 사용

- [ ] **On-Premise** (15점)
  - [ ] CDN 의존성 0개
  - [ ] 로컬 자산만 사용
  - [ ] 인터넷 차단 테스트

#### 접근성 (10점)

- [ ] **키보드 네비게이션** (5점)
  - [ ] Tab 키 이동
  - [ ] Enter 키 실행
  - [ ] 포커스 표시

- [ ] **ARIA** (5점)
  - [ ] role 속성
  - [ ] aria-label
  - [ ] alt 텍스트

**총점: 100점 / 통과 기준: 70점 이상**

---

## 4. 테스트 워크플로우

### 4.1 테스트 실행 순서

```
1. Unit Test (pytest)
   ├─ 실행: pytest tests/ -v
   ├─ 커버리지: pytest --cov=backend tests/
   └─ 통과 기준: 모든 테스트 통과, 커버리지 ≥70%

2. Integration Test (pytest)
   ├─ 실행: pytest tests/integration/ -v
   ├─ DB 연동: 테스트 DB 사용 (SQLite 메모리)
   └─ 통과 기준: 모든 API 엔드포인트 테스트 통과

3. E2E Test (Playwright)
   ├─ 실행: npx playwright test
   ├─ 브라우저: Chromium, Firefox, WebKit
   └─ 통과 기준: 모든 사용자 시나리오 통과

4. 보안 테스트 (수동)
   ├─ 체크리스트: docs/SSOT/copilot/2-architecture-ssot.md §4
   └─ 통과 기준: 모든 항목 체크

5. 성능 테스트 (수동)
   ├─ API 응답 시간: <500ms
   ├─ 페이지 로드: <3초
   └─ Lighthouse: 점수 ≥80
```

### 4.2 테스트 실패 처리

#### 실패 분류

| 실패 유형                  | 심각도   | 조치                    |
| -------------------------- | -------- | ----------------------- |
| **Unit Test 실패**         | Medium   | REVISE (함수 단위 수정) |
| **Integration Test 실패**  | High     | REVISE (API 연동 수정)  |
| **E2E Test 50% 이상 실패** | Critical | REWIND (전면 재작업)    |
| **보안 테스트 실패**       | Critical | REWIND (보안 강화)      |

#### 실패 분석 템플릿

```markdown
## 테스트 실패 분석

### 기본 정보

- Task ID: phase-{X-Y}-task-{N}
- 실패 일시: YYYY-MM-DD HH:MM
- 테스트 종류: Unit / Integration / E2E / Security
- 담당자: Claude / Gemini

### 실패 상세

- 실패한 테스트: test_function_name
- 에러 메시지: [에러 메시지 전문]
- 스택 트레이스: [스택 트레이스]

### 원인 분석

- 직접 원인: (예: 잘못된 로직, 누락된 검증 등)
- 근본 원인: (예: 요구사항 오해, 엣지 케이스 미고려 등)

### 영향 범위

- 영향받는 기능: [기능 목록]
- 영향받는 사용자: [사용자 시나리오]

### 수정 계획

- 수정 방법: [구체적인 수정안]
- 예상 시간: [시간]
- 재테스트 계획: [테스트 시나리오]

### 예방 조치

- 향후 예방 방법: [예방 조치]
- 추가 테스트: [추가할 테스트 케이스]
```

---

## 5. 리와인드 (Rewind) 절차

### 5.1 리와인드 트리거

| 트리거            | 정의                     | 예시                                 |
| ----------------- | ------------------------ | ------------------------------------ |
| **시스템 크래시** | 서버 다운, DB 손상       | FastAPI 서버 무한 재시작             |
| **데이터 손실**   | DB 데이터 삭제·손상      | 외래키 제약조건 위반으로 데이터 삭제 |
| **보안 취약점**   | Critical/High 보안 이슈  | SQL Injection, XSS 취약점 발견       |
| **E2E 대량 실패** | E2E 테스트 50% 이상 실패 | UI 전면 개편으로 모든 E2E 실패       |
| **아키텍처 결함** | 근본적인 설계 오류       | DB 스키마 재설계 필요                |

### 5.2 리와인드 절차

```
1. 트리거 발생 확인
   ├─ 심각도 평가 (Critical / High)
   ├─ 영향 범위 파악
   └─ 리와인드 필요성 판단

2. 복귀 시점 결정
   ├─ 마지막 DONE 상태 확인
   ├─ Git 커밋 히스토리 확인
   └─ 안정 상태 선정

3. Cursor와 협의
   ├─ 리와인드 사유 설명
   ├─ 복귀 시점 제시
   └─ 승인 획득

4. Git 복귀
   ├─ git log --oneline (커밋 확인)
   ├─ git revert <commit> (안전한 복귀)
   └─ git reset --hard <commit> (강제 복귀, 주의)

5. 재작업 계획 수립
   ├─ Task 재정의
   ├─ 우선순위 조정
   ├─ 일정 재조정
   └─ 문서 업데이트

6. 재작업 시작
   ├─ Status: IN_PROGRESS
   └─ Copilot 재검증 필수
```

### 5.3 리와인드 문서화

```markdown
## 리와인드 기록

### 기본 정보

- Task ID: phase-{X-Y}-task-{N}
- 리와인드 일시: YYYY-MM-DD HH:MM
- 트리거: [시스템 크래시 / 데이터 손실 / 보안 취약점 등]
- 판정자: Copilot

### 리와인드 사유

- 직접 원인: [원인 상세]
- 근본 원인: [근본 원인 분석]
- 영향 범위: [영향받는 기능·사용자]

### 복귀 시점

- 복귀 커밋: [Git commit hash]
- 복귀 상태: [DONE / APPROVED 등]
- 복귀 일시: [상태 진입 시점]

### 재작업 계획

- 재정의된 Task: [새 Task 정의]
- 우선순위: [Critical / High / Medium]
- 예상 시간: [시간]
- 추가 조치: [예방 조치]

### 교훈 (Lessons Learned)

- 실수 요인: [실수 분석]
- 예방 방법: [향후 예방책]
- 프로세스 개선: [워크플로우 개선안]
```

---

## 6. 완료 판정 기준

### 6.1 Task 완료 조건

| 영역                 | 조건                         | 검증 방법         |
| -------------------- | ---------------------------- | ----------------- |
| **기능 구현**        | 요구사항 100% 충족           | 수동 테스트, 데모 |
| **코드 리뷰**        | 70점 이상                    | Copilot 리뷰 점수 |
| **Unit Test**        | 모든 테스트 통과             | pytest            |
| **Integration Test** | 모든 테스트 통과             | pytest            |
| **E2E Test**         | 모든 시나리오 통과           | Playwright        |
| **보안 점검**        | 체크리스트 100%              | 수동 검증         |
| **문서**             | Task 문서·테스트 보고서 작성 | 문서 확인         |

### 6.2 Phase 완료 조건

| 영역               | 조건                          | 검증 방법          |
| ------------------ | ----------------------------- | ------------------ |
| **모든 Task 완료** | 각 Task DONE 상태             | Task 목록 확인     |
| **통합 테스트**    | Phase 전체 통합 테스트 통과   | 통합 테스트 리포트 |
| **문서 완성**      | Phase 요약·테스트 리포트 작성 | 문서 확인          |
| **배포 판정**      | 배포 가능 여부 확정           | Copilot 최종 판정  |

### 6.3 배포 판정 프로세스

```
1. 모든 Task 검증
   ├─ Task별 DONE 상태 확인
   ├─ 테스트 결과 리포트 확인
   └─ 코드 리뷰 점수 확인

2. 통합 검증
   ├─ Phase 전체 통합 테스트
   ├─ 브라우저 호환성 테스트
   └─ 성능 테스트

3. 보안 최종 점검
   ├─ 보안 체크리스트 재확인
   ├─ 취약점 스캔 (OWASP ZAP 등)
   └─ 인증/인가 테스트

4. 배포 차단 요소 확인
   ├─ Critical Bug 0개
   ├─ 보안 취약점 0개
   ├─ CDN 의존성 0개
   └─ E2E 테스트 100% 통과

5. 최종 판정
   ├─ 점수 계산 (100점 만점)
   ├─ 등급 부여 (A+ ~ F)
   └─ 배포 가능 여부 판정
      ├─ ✅ 즉시 배포 (A+, A)
      ├─ ✅ 조건부 배포 (B+)
      └─ ❌ 배포 불가 (B 이하)

6. 배포 체크리스트 작성
   ├─ 환경 변수 확인
   ├─ 데이터베이스 마이그레이션
   ├─ 백업 생성
   └─ 롤백 계획
```

---

## 7. 에러 처리 및 로깅

### 7.1 에러 분류

| 유형                  | 정의         | 예시                        | 대응                 |
| --------------------- | ------------ | --------------------------- | -------------------- |
| **Syntax Error**      | 문법 오류    | 세미콜론 누락, 괄호 불일치  | 즉시 수정            |
| **Runtime Error**     | 실행 중 오류 | NullPointerException, 404   | try-catch, 로깅      |
| **Logic Error**       | 논리 오류    | 잘못된 계산, 무한 루프      | 디버깅, 재작업       |
| **Security Error**    | 보안 오류    | SQL Injection, XSS          | 즉시 수정 (Critical) |
| **Performance Error** | 성능 오류    | 응답 시간 초과, 메모리 누수 | 최적화               |

### 7.2 로깅 전략

#### Backend 로깅

```python
import logging

logger = logging.getLogger(__name__)

# 로그 레벨
logging.DEBUG    # 디버깅 정보
logging.INFO     # 일반 정보
logging.WARNING  # 경고
logging.ERROR    # 에러 (처리 가능)
logging.CRITICAL # 치명적 에러 (처리 불가)

# 로깅 예시
logger.info(f"User {user_id} logged in")
logger.warning(f"Rate limit exceeded for IP {ip}")
logger.error(f"Failed to parse document: {e}", exc_info=True)
logger.critical(f"Database connection lost: {e}")
```

#### Frontend 로깅

```javascript
// 로그 레벨
console.log("일반 정보"); // 개발 환경만
console.info("상태 정보"); // 개발 환경만
console.warn("경고"); // 개발·프로덕션
console.error("에러"); // 개발·프로덕션

// 프로덕션 환경에서는 Sentry 등 에러 추적 서비스 사용
try {
  // 위험한 작업
} catch (error) {
  console.error("Failed to process:", error);
  // Sentry.captureException(error);
}
```

### 7.3 에러 리포트 템플릿

```markdown
## 에러 리포트

### 기본 정보

- 에러 ID: ERR-YYYYMMDD-NNNN
- 발생 일시: YYYY-MM-DD HH:MM:SS
- 발생 위치: [파일명:라인번호]
- 심각도: Critical / High / Medium / Low

### 에러 내용

- 에러 메시지: [에러 메시지]
- 스택 트레이스: [스택 트레이스]
- 재현 단계: [재현 방법]

### 영향 분석

- 영향받는 기능: [기능 목록]
- 영향받는 사용자: [사용자 범위]
- 데이터 손실 여부: Yes / No

### 해결 방법

- 임시 조치: [Workaround]
- 근본 해결: [수정안]
- 예상 시간: [시간]

### 예방 조치

- 테스트 추가: [추가 테스트]
- 코드 개선: [개선안]
- 모니터링: [모니터링 항목]
```

---

## 8. 다음 작업 (Next Task) 결정

### 8.1 우선순위 결정 기준

| 기준          | 설명                           | 가중치 |
| ------------- | ------------------------------ | ------ |
| **심각도**    | Critical > High > Medium > Low | 40%    |
| **영향 범위** | 전체 > 일부 > 개별             | 30%    |
| **긴급성**    | 배포 차단 > 기능 오동작 > 개선 | 20%    |
| **의존성**    | 선행 작업 필요 여부            | 10%    |

### 8.2 다음 작업 결정 프로세스

```
1. 현재 Task 완료 확인
   ├─ Status: DONE
   └─ 배포 판정 완료

2. 미완료 Task 목록 확인
   ├─ Phase 내 남은 Task
   └─ 다음 Phase Task

3. 우선순위 계산
   ├─ 심각도 점수 (40%)
   ├─ 영향 범위 점수 (30%)
   ├─ 긴급성 점수 (20%)
   └─ 의존성 점수 (10%)
   → 총점 계산

4. Cursor와 협의
   ├─ 우선순위 제안
   ├─ 일정 조율
   └─ 할당 결정

5. 다음 Task 시작
   ├─ Task 문서 확인
   ├─ 요구사항 분석
   └─ Status: IN_PROGRESS
```

### 8.3 백로그 관리

```markdown
## 백로그 (Backlog)

### High Priority (이번 주)

- [ ] Task A: CDN 의존성 제거 (Critical, Frontend)
- [ ] Task B: API 에러 응답 표준화 (High, Backend)

### Medium Priority (다음 주)

- [ ] Task C: DB 인덱스 추가 (Medium, Backend)
- [ ] Task D: 타입 힌트 보완 (Medium, Backend)

### Low Priority (향후)

- [ ] Task E: 테스트 커버리지 80% (Low, QA)
- [ ] Task F: Lighthouse 점수 90+ (Low, Frontend)

### 완료 (Done)

- [x] Task 9-1-1: JWT 인증 구현 (2026-02-09)
- [x] Task 10-1: Reasoning 기본 구현 (2026-02-10)
```

---

---

## 9. Multi-Agent 협업 워크플로우

### 9.1 전체 협업 흐름 (Phase 진행)

```
┌──────────────────────────────────────────────────────────────┐
│                    Cursor (Phase 계획)                       │
│  1. 요구사항 정의 → 2. Task 분해 → 3. 에이전트 할당         │
└─────────────────────────┬──────────────────────────────────┘
                          │
        ┌─────────────────┼─────────────────┐
        │                 │                 │
        ▼                 ▼                 ▼
┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐
│ Claude Task      │  │ Gemini Task      │  │ Copilot 검증     │
│ (Backend)        │  │ (Frontend)       │  │ (QA)             │
│ ┌──────────────┐ │  │ ┌──────────────┐ │  │ ┌──────────────┐ │
│ │ 1. 코드 작성 │ │  │ │ 1. 코드 작성 │ │  │ │ 테스트 환경  │ │
│ │    (IN_PROGRESS) │  │ │ (IN_PROGRESS)│ │  │ │ 준비         │ │
│ │ 2. 로컬 테스트   │  │ │ 2. 로컬 테스트   │  │ │ (TESTING)    │ │
│ │ 3. 커밋         │  │ │ 3. 커밋         │  │ └──────────────┘ │
│ │ 4. 리뷰 요청     │  │ │ 4. 리뷰 요청     │  │                  │
│ │    (REVIEW_READY) │  │ │ (REVIEW_READY)│  │ ┌──────────────┐ │
│ └──────┬──────────┘ │  │ └──────┬──────────┘ │  │ → Copilot    │ │
│        │            │  │        │            │  │   리뷰       │ │
│        └────────────┼──┼────────┼────────────┼─→ │ (코드 품질,  │ │
│                     │  │        │            │  │  보안, 성능) │ │
│                     │  │        │            │  └──────┬───────┘ │
│                     │  │        │            │         │          │
└─────────────────────┼──┼────────┼────────────┼─────────┤──────────┘
                      │  │        │            │         │
                      ▼  ▼        ▼            │         ▼
                  ┌─────────────────────┐     │    ┌──────────────┐
                  │ APPROVED?           │     │    │ 피드백       │
                  └─────┬────────────┬──┘     │    └──────────────┘
                      YES            NO       │         │
                        │            │        │         │
                        ▼            ▼        │         ▼
                    ┌────────┐  ┌─────────┐  │    ┌──────────────┐
                    │테스트  │  │ REVISE  │  │    │Claude/Gemini │
                    │실행    │  │ 재작업  │  │    │ 수정 후      │
                    │(TESTING)  │(IN_PROGRESS) │    │ 재제출       │
                    └──┬──────┘  └────┬────┘  │    └──────┬───────┘
                       │             │       │           │
                       └─────┬───────┘       │           │
                             │               │           │
                             ▼               │           │
                        ┌──────────┐         │           │
                        │ 완료?    │         │           │
                        │(DONE)    │         │           │
                        └──┬───────┘         │           │
                           │                 │           │
                          YES               NO          │
                           │                 └───────────┘
                           │
                           ▼
                ┌──────────────────────┐
                │ 최종 배포 판정        │
                │ (Cursor with Copilot│
                │  검증 결과)          │
                └──────────────────────┘
```

### 9.2 각 에이전트 간 협업 포인트

#### **Claude ↔ Copilot: Backend 협업**

| 단계             | 내용                               | 담당    | 체크 항목              |
| ---------------- | ---------------------------------- | ------- | ---------------------- |
| **1. 코드 제출** | Backend API/서비스 구현            | Claude  | ✅ 자가 테스트 통과    |
| **2. 리뷰 요청** | "Task N 리뷰 요청: [요약]"         | Claude  | ✅ 커밋 & PR 준비      |
| **3. 코드 리뷰** | 타입 힌트, 독스트링, 컨벤션 점검   | Copilot | ✅ 체크리스트 100%     |
| **4. 보안 검증** | SQL Injection, ORM 사용, 입력 검증 | Copilot | ✅ 취약점 0개          |
| **5. 판정**      | APPROVED or REVISE                 | Copilot | ✅ 점수 70점 이상      |
| **6. 테스트**    | Unit/Integration 테스트 실행       | Copilot | ✅ 커버리지 70%        |
| **7. 재작업**    | Copilot 피드백 반영                | Claude  | ✅ 수정 완료 후 재제출 |

#### **Gemini ↔ Copilot: Frontend 협업**

| 단계              | 내용                                  | 담당    | 체크 항목              |
| ----------------- | ------------------------------------- | ------- | ---------------------- |
| **1. UI 제출**    | HTML/CSS/JS 구현                      | Gemini  | ✅ 자가 테스트 통과    |
| **2. 리뷰 요청**  | "Task N 리뷰 요청: [요약]"            | Gemini  | ✅ 커밋 준비           |
| **3. 코드 리뷰**  | ESM 모듈, JSDoc, 스타일 점검          | Copilot | ✅ 체크리스트 100%     |
| **4. 보안 검증**  | XSS 리스크, innerHTML 점검, DOMPurify | Copilot | ✅ 취약점 0개          |
| **5. On-Premise** | CDN 의존성 0개 확인                   | Copilot | ✅ 로컬 자산만 사용    |
| **6. 판정**       | APPROVED or REVISE                    | Copilot | ✅ 점수 70점 이상      |
| **7. E2E 테스트** | Playwright 시나리오 실행              | Copilot | ✅ 모든 시나리오 통과  |
| **8. 재작업**     | Copilot 피드백 반영                   | Gemini  | ✅ 수정 완료 후 재제출 |

#### **Copilot ↔ Cursor: 배포 협업**

| 단계             | 내용                                  | 담당    | 체크 항목                  |
| ---------------- | ------------------------------------- | ------- | -------------------------- |
| **1. 진행 상황** | "Phase X-Y 진행률: N/M 완료"          | Copilot | ✅ 주 1회 정기 보고        |
| **2. 이슈 보고** | Critical/High 이슈 즉시 보고          | Copilot | ✅ 영향도 & 조치 포함      |
| **3. 배포 요청** | "Phase X-Y 배포 준비: 품질 점수 XX점" | Copilot | ✅ 검증 완료 & 테스트 통과 |
| **4. 최종 판정** | "배포 가능" / "조건부" / "불가"       | Cursor  | ✅ Copilot 의견 반영       |

### 9.3 협업 워크플로우

#### **코드 리뷰 요청 (Claude/Gemini → Copilot)**

```markdown
## Code Review Request

**Task**: Phase X-Y-Task-N
**Author**: Claude / Gemini
**Date**: YYYY-MM-DD HH:MM

### 변경 사항 요약

- [기능 설명]
- [수정 사항]

### 테스트 결과

- Unit Test: ✅ All passed
- Integration Test: ✅ All passed
- 자가 테스트: ✅ Manual testing done

### 자가 체크리스트

- [x] Type hints added (or NA)
- [x] Docstring written
- [x] No security vulnerabilities (to best knowledge)
- [x] Code style passed (ruff/prettier)
```

#### **리뷰 결과 (Copilot → Claude/Gemini)**

```markdown
## Code Review Result

**Task**: Phase X-Y-Task-N
**Reviewer**: Copilot (QA)
**Date**: YYYY-MM-DD HH:MM
**Score**: XX/100

### 판정

- [x] ✅ APPROVED → 다음 단계 (테스트/배포)
- [ ] ⚠️ REVISE → 재작업 필요

### 발견 사항

#### 🔴 Critical (즉시 수정)

- [항목]: [문제 설명]
- **수정안**: [구체적인 해결책]

#### 🟠 High (배포 전 필수)

- [항목]: [문제 설명]
- **수정안**: [구체적인 해결책]

### 점수 계산

| 항목      | 점수      | 비고                      |
| --------- | --------- | ------------------------- |
| 코드 품질 | 25/30     | 타입 힌트 5개 누락        |
| 보안      | 20/20     | ✅ 양호                   |
| 테스트    | 15/20     | Unit 70%, Integration 80% |
| **합계**  | **60/70** | **A (APPROVED)**          |

### 다음 단계

- APPROVED: 자동 테스트 실행 & 배포 대기
- REVISE: 수정 후 재제출
```

#### **배포 준비 보고 (Copilot → Cursor)**

```markdown
## Deployment Readiness Report

**Phase**: X-Y
**Date**: YYYY-MM-DD HH:MM

### 완료 현황

- 완료한 Task: N/M
- 진행 중: [Task 이름]
- 예상 완료: YYYY-MM-DD

### 품질 점수

- 전체 평균: XX/100
- 등급: [A+ / A / B+ / B / C / F]

### 배포 차단 이슈

- Critical: [이슈 0개 / 있음: 상세]
- High: [이슈 0개 / 있음: 상세]

### 배포 판정

- [ ] ✅ 즉시 배포 가능 (A+ / A)
- [ ] ⚠️ 조건부 배포 (B+: 조건 상세)
- [ ] ❌ 배포 불가 (B 이하)

### 다음 단계

- 배포 승인 필요
- 환경 변수 확인
- 백업 생성
```

### 9.4 에이전트 간 커뮤니케이션 원칙

#### **Claude/Gemini → Copilot**

- **리뷰 요청**: 구현 완료 + 자가 테스트 통과 + 커밋 완료 상태
- **제공 정보**: Task ID, 파일 변경 사항, 테스트 결과, 알려진 이슈
- **대기 시간**: 24시간 이내 리뷰 결과 기대

#### **Copilot → Claude/Gemini**

- **APPROVED**: "다음 단계: 테스트 실행 & 배포 대기"
- **REVISE**: "구체적인 수정안 제시, 우선순위 표시, 재제출 요청"
- **응답 시간**: 즉시 피드백 제공

#### **Copilot → Cursor**

- **상태 보고**: 주 1회 정기 + Critical/High 즉시
- **배포 판정**: SSOT §2.2 기준표 참조
- **피드백 반영**: 배포 가능 여부 확정 후 최종 보고

---

## 10. 참조 문서

| 문서                                                                                                  | 역할                       |
| ----------------------------------------------------------------------------------------------------- | -------------------------- |
| [0-ssot-index.md](0-ssot-index.md)                                                                    | SSOT 인덱스                |
| [1-project-ssot.md](1-project-ssot.md)                                                                | 프로젝트 개요 및 품질 기준 |
| [2-architecture-ssot.md](2-architecture-ssot.md)                                                      | 아키텍처 및 보안 기준      |
| [docs/rules/testing/integration-test-guide.md](../../rules/testing/integration-test-guide.md)         | 통합 테스트 가이드         |
| [docs/rules/testing/phase-unit-user-test-guide.md](../../rules/testing/phase-unit-user-test-guide.md) | 사용자 테스트 가이드       |

---

**작업 시작**: [0-ssot-index.md](0-ssot-index.md)부터 순서대로 읽고 워크플로우 시작
