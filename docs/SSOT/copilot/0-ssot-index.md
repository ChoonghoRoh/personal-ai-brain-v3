# 🔍 Multi-Agent SSOT 인덱스

**작성일**: 2026-02-15
**주도**: GitHub Copilot (QA & Security Analyst)
**협업**: Cursor (Leader) + Claude (Backend) + Gemini (Frontend) + Copilot (QA)
**목적**: 모든 에이전트가 동일한 기준으로 협업하기 위한 단일 진실 공급원(SSOT) 제공

---

## 📋 SSOT 목적 및 원칙

### SSOT란?

**Single Source of Truth (단일 진실 공급원)**은 프로젝트의 모든 에이전트(Cursor, Claude, Gemini, Copilot)가 동일한 기준 정보를 참조하여 협업하도록 보장하는 문서 세트입니다.

### 핵심 원칙

1. **모든 에이전트 필독**: Phase 문서나 Task 문서 참조 전에 **반드시 SSOT 세트를 먼저 로딩**
2. **단일 소스**: 충돌되는 정보가 있을 경우 **SSOT가 우선**
3. **일관성**: 모든 에이전트가 동일한 품질 기준, 검증 기준, 테스트 전략, 보안 기준 적용
4. **협업 중심**: Copilot은 QA 역할로서 모든 에이전트의 작업을 검증하고 피드백을 제공하며, 다른 에이전트는 Copilot의 요청에 따라 재작업

---

## 📁 SSOT 문서 구조

### 필수 문서 (4개)

| 번호 | 문서명                                           | 역할                       | 읽기 순서 |
| ---- | ------------------------------------------------ | -------------------------- | --------- |
| 0    | [0-ssot-index.md](0-ssot-index.md)               | SSOT 인덱스 (본 문서)      | 1순위     |
| 1    | [1-project-ssot.md](1-project-ssot.md)           | 프로젝트 개요 및 품질 기준 | 2순위     |
| 2    | [2-architecture-ssot.md](2-architecture-ssot.md) | 아키텍처 및 보안 기준      | 3순위     |
| 3    | [3-workflow-ssot.md](3-workflow-ssot.md)         | 워크플로우 및 검증 기준    | 4순위     |

### 읽기 순서 예시

```
작업 시작
  ↓
1. 0-ssot-index.md 읽기 (전체 개요)
  ↓
2. 1-project-ssot.md 읽기 (프로젝트 상태, 품질 기준)
  ↓
3. 2-architecture-ssot.md 읽기 (기술 스택, 보안 기준)
  ↓
4. 3-workflow-ssot.md 읽기 (작업 흐름, 검증 절차)
  ↓
5. 해당 Phase/Task 문서 참조
  ↓
작업 수행 (코드 리뷰, 테스트, 보안 점검)
```

---

## 🎯 에이전트 역할 정의

### 전체 협업 구조

```
┌────────────────────────────────────────────────────────┐
│         Cursor (Leader/오케스트라 리더)               │
│  - Phase 계획 수립 및 Task 할당                        │
│  - 최종 배포 판정                                     │
│  - 에이전트 간 조율                                   │
└────────────────┬──────────────────────────────────────┘
                 │
    ┌────────────┼────────────┐
    │            │            │
    ▼            ▼            ▼
┌───────────┐  ┌──────────┐  ┌──────────┐
│  Claude   │  │ Copilot  │  │ Gemini   │
│ (Backend) │  │  (QA)    │  │(Frontend)│
└────┬──────┘  └────┬─────┘  └────┬─────┘
     │              │             │
     │         (검증 허브)        │
     │              │             │
     └──────────┬───┴───┬─────────┘
                │       │
            코드 제출   리뷰
                │       │
                ▼       ▼
            APPROVED / REVISE 판정
                │
                ├─→ 테스트 & 배포 가능 여부 판정
                └─→ 피드백 제공 & 재작업 요구
```

### 각 에이전트 역할

#### **Cursor - 오케스트라 리더 (Leader)**

| 임무               | 설명                             | 협업 대상      |
| ------------------ | -------------------------------- | -------------- |
| **Phase 계획**     | 요구사항 수집, 아키텍처 설계     | 모든 에이전트  |
| **Task 할당**      | Claude/Gemini에게 작업 분배      | Claude, Gemini |
| **검증 피드백**    | Copilot의 리뷰 결과 반영         | Copilot        |
| **최종 배포 판정** | Copilot 검증 결과 기반 배포 승인 | Copilot        |

#### **Claude - Backend 엔지니어**

| 임무              | 설명                              | 협업 대상                           |
| ----------------- | --------------------------------- | ----------------------------------- |
| **API 구현**      | FastAPI 라우터 및 엔드포인트 개발 | Copilot (리뷰)                      |
| **DB 설계**       | PostgreSQL 스키마 및 쿼리 작성    | Copilot (보안 검증)                 |
| **비즈니스 로직** | 서비스 레이어 구현                | Gemini (API 연동), Copilot (테스트) |
| **재작업**        | Copilot 피드백에 따른 수정        | Copilot                             |

#### **Gemini - Frontend 아키텍트**

| 임무                | 설명                              | 협업 대상         |
| ------------------- | --------------------------------- | ----------------- |
| **UI/UX 구현**      | HTML, CSS, Vanilla JS 개발        | Copilot (리뷰)    |
| **API 연동**        | Backend 호출 및 데이터 바인딩     | Claude (API 확인) |
| **On-Premise 준수** | CDN 의존성 제거, 로컬 자산만 사용 | Copilot (검증)    |
| **재작업**          | Copilot 피드백에 따른 수정        | Copilot           |

#### **Copilot - QA & Security Analyst (검증 허브)**

| 임무          | 설명                                   | 협업 대상      |
| ------------- | -------------------------------------- | -------------- |
| **코드 리뷰** | 품질 기준(타입 힌트, 독스트링 등) 점검 | Claude, Gemini |
| **보안 검증** | SQL Injection, XSS, CSRF 등 점검       | Claude, Gemini |
| **테스트**    | Unit/Integration/E2E 테스트 실행       | Claude, Gemini |
| **배포 판정** | 품질 점수 계산 및 배포 가능 판정       | Cursor         |
| **피드백**    | APPROVED/REVISE 판정 및 수정안 제시    | Claude, Gemini |

---

## 📊 품질 기준 및 메트릭

### 배포 가능 점수 기준

| 등급 | 점수   | 배포 가능 여부 | 조건                                 |
| ---- | ------ | -------------- | ------------------------------------ |
| A+   | 95-100 | ✅ 즉시 배포   | 중요 이슈 0개, 보안 취약점 0개       |
| A    | 90-94  | ✅ 배포 가능   | 중요 이슈 0개, 경미한 이슈 ≤3개      |
| B+   | 85-89  | ✅ 조건부 배포 | 중요 이슈 ≤1개, 배포 전 수정 필요    |
| B    | 80-84  | ⚠️ 권장 연기   | 중요 이슈 ≤2개, 수정 후 재검증       |
| C    | 70-79  | ❌ 배포 불가   | 중요 이슈 ≥3개 또는 보안 취약점 존재 |
| F    | <70    | ❌ 배포 불가   | 심각한 결함, 전면 재작업 필요        |

### 이슈 심각도 분류

| 심각도          | 정의                        | 예시                       | 대응              |
| --------------- | --------------------------- | -------------------------- | ----------------- |
| 🔴 **Critical** | 시스템 동작 불가, 보안 위협 | SQL Injection, 서버 크래시 | 즉시 수정 필수    |
| 🟠 **High**     | 핵심 기능 오동작            | 데이터 손실, 인증 실패     | 배포 전 필수 수정 |
| 🟡 **Medium**   | 일부 기능 오동작            | UI 버그, 성능 저하         | 배포 전 권장 수정 |
| 🟢 **Low**      | 사용성 개선                 | 타입 힌트, 코드 스타일     | 배포 후 개선 가능 |

---

## 🔒 보안 점검 체크리스트

### 필수 점검 항목 (배포 전)

- [ ] **인증/인가**
  - [ ] JWT 토큰 검증 로직 확인
  - [ ] API Key 인증 체계 점검
  - [ ] 세션 관리 보안 (만료 시간, 토큰 블랙리스트)

- [ ] **입력 검증**
  - [ ] SQL Injection 방어 (ORM 사용 확인)
  - [ ] XSS 방어 (innerHTML 사용 점검, DOMPurify 적용)
  - [ ] CSRF 토큰 구현 여부

- [ ] **보안 헤더**
  - [ ] X-Content-Type-Options: nosniff
  - [ ] X-Frame-Options: DENY
  - [ ] X-XSS-Protection: 1; mode=block
  - [ ] Strict-Transport-Security (프로덕션)

- [ ] **Rate Limiting**
  - [ ] API 요청 제한 설정 확인
  - [ ] 브루트포스 공격 방지 (인증 API)

- [ ] **환경 변수**
  - [ ] .env 파일 .gitignore 등록 확인
  - [ ] 프로덕션 환경 변수 강도 점검 (SECRET_KEY 등)

---

## 🧪 테스트 전략

### 테스트 계층

```
┌─────────────────────────────────────┐
│  E2E Test (Playwright)              │  ← 사용자 시나리오
│  - 브라우저 자동화                   │
│  - 전체 플로우 검증                  │
└─────────────┬───────────────────────┘
              │
┌─────────────▼───────────────────────┐
│  Integration Test (pytest)          │  ← API 연동
│  - API 엔드포인트 통합               │
│  - DB 연동 검증                      │
└─────────────┬───────────────────────┘
              │
┌─────────────▼───────────────────────┐
│  Unit Test (pytest)                 │  ← 함수 단위
│  - 로직 검증                         │
│  - 엣지 케이스 테스트                │
└─────────────────────────────────────┘
```

### 테스트 커버리지 목표

| 구분              | 목표 커버리지 | 우선순위 |
| ----------------- | ------------- | -------- |
| Backend 핵심 로직 | 80%           | 높음     |
| API 엔드포인트    | 70%           | 높음     |
| Frontend 컴포넌트 | 60%           | 중간     |
| 보안 관련 코드    | 100%          | 최고     |

### 테스트 실행 시점

| 시점          | 테스트 종류                     | 도구                                  |
| ------------- | ------------------------------- | ------------------------------------- |
| 코드 작성 중  | Unit Test                       | pytest (watch mode)                   |
| PR/Commit 전  | Unit + Integration              | pytest                                |
| Phase 완료 시 | 전체 (Unit + Integration + E2E) | pytest + Playwright                   |
| 배포 전       | 전체 + 보안 점검                | pytest + Playwright + 보안 체크리스트 |

---

## 📝 워크플로우 상태 정의

### Task 상태

| 상태             | 정의         | 다음 단계         | 담당            |
| ---------------- | ------------ | ----------------- | --------------- |
| **NOT_STARTED**  | 작업 미시작  | IN_PROGRESS       | 할당된 에이전트 |
| **IN_PROGRESS**  | 작업 진행 중 | REVIEW_READY      | 할당된 에이전트 |
| **REVIEW_READY** | 리뷰 대기    | APPROVED / REVISE | Copilot (QA)    |
| **APPROVED**     | 리뷰 통과    | TESTING           | Copilot (QA)    |
| **REVISE**       | 수정 필요    | IN_PROGRESS       | 할당된 에이전트 |
| **TESTING**      | 테스트 진행  | DONE / ERROR      | Copilot (QA)    |
| **ERROR**        | 테스트 실패  | IN_PROGRESS       | 할당된 에이전트 |
| **DONE**         | 완료         | -                 | -               |

### 상태 전환 다이어그램

```
NOT_STARTED
    ↓
IN_PROGRESS
    ↓
REVIEW_READY ────→ REVISE
    ↓                ↓
APPROVED         (수정 후)
    ↓                ↓
TESTING ←───────────┘
    ↓
  성공?
  ↙   ↘
DONE  ERROR
        ↓
   (재작업)
```

---

## 🔄 리와인드(Rewind) 시점

### 리와인드 정의

**이전 안정 상태로 복귀**하여 재작업하는 것. 심각한 결함 발견 시 적용.

### 리와인드 트리거

| 트리거            | 설명                       | 복귀 시점               |
| ----------------- | -------------------------- | ----------------------- |
| **Critical Bug**  | 시스템 크래시, 데이터 손실 | 마지막 DONE 상태        |
| **보안 취약점**   | SQL Injection, XSS 등 발견 | 취약점 도입 이전 커밋   |
| **테스트 실패**   | E2E 테스트 50% 이상 실패   | 마지막 테스트 통과 커밋 |
| **아키텍처 오류** | 근본적인 설계 결함         | Phase 시작 시점         |

### 리와인드 절차

1. **결함 문서화**: 이슈 등록, 원인 분석
2. **복귀 시점 결정**: Cursor와 협의
3. **Git 복귀**: `git revert` 또는 `git reset` (상황에 따라)
4. **재작업 계획**: Task 재정의, 우선순위 조정
5. **QA 재검증**: Copilot이 재작업 결과 재검증

---

## 📚 참조 문서

### 프로젝트 전체

| 문서                                                              | 역할               |
| ----------------------------------------------------------------- | ------------------ |
| [AGENTS.md](../../../AGENTS.md)                                   | 에이전트 역할 정의 |
| [docs/rules/role/QA.md](../../rules/role/QA.md)                   | Copilot 페르소나   |
| [docs/README/02-architecture.md](../../README/02-architecture.md) | 아키텍처 개요      |

### 테스트 관련

| 문서                                                                                                  | 역할                 |
| ----------------------------------------------------------------------------------------------------- | -------------------- |
| [docs/rules/testing/integration-test-guide.md](../../rules/testing/integration-test-guide.md)         | 통합 테스트 가이드   |
| [docs/rules/testing/phase-unit-user-test-guide.md](../../rules/testing/phase-unit-user-test-guide.md) | 사용자 테스트 가이드 |
| [pytest.ini](../../../pytest.ini)                                                                     | pytest 설정          |
| [playwright.config.js](../../../playwright.config.js)                                                 | Playwright 설정      |

### 규칙 문서

| 문서                                                                                    | 역할             |
| --------------------------------------------------------------------------------------- | ---------------- |
| [docs/rules/backend/backend-rules-index.md](../../rules/backend/backend-rules-index.md) | Backend 규칙     |
| [docs/rules/common/common-rules-index.md](../../rules/common/common-rules-index.md)     | 공통 규칙        |
| [docs/rules/rules-index.md](../../rules/rules-index.md)                                 | 통합 규칙 인덱스 |

---

## 🔧 다른 SSOT와의 차이점

### 기존 SSOT vs Copilot SSOT

| 항목           | 기존 SSOT             | Copilot SSOT             |
| -------------- | --------------------- | ------------------------ |
| **관점**       | 전체 개발 흐름        | QA 및 검증 중심          |
| **우선순위**   | 기능 구현             | 품질 보증, 보안          |
| **협업**       | 에이전트 간 업무 분담 | 검증 및 피드백           |
| **산출물**     | 코드, 문서            | 리뷰 보고서, 테스트 결과 |
| **워크플로우** | 개발 → 테스트 → 배포  | 리뷰 → 승인 → 검증       |

### 통합 활용 방법

```
Cursor(Leader) - 기존 SSOT 참조
    ↓
Claude(Backend) - 기존 SSOT + Backend 규칙
    ↓
코드 구현
    ↓
Copilot(QA) - Copilot SSOT 참조
    ↓
품질 검증 (코드 리뷰, 테스트, 보안)
    ↓
    승인? ───→ 다음 Task
    거부? ───→ Claude에게 재작업 요청
```

---

## 📅 버전 및 업데이트

| 버전 | 날짜       | 변경 내용 | 작성자       |
| ---- | ---------- | --------- | ------------ |
| 1.0  | 2026-02-15 | 초기 작성 | Copilot (QA) |

---

**다음 단계**: [1-project-ssot.md](1-project-ssot.md) 읽기 → 프로젝트 품질 기준 확인
